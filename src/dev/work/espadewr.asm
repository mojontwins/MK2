;* * * * *  Small-C/Plus z88dk * * * * *
;  Version: 18462-8d70c5a-20210624
;
;	Reconstructed for z80 Module Assembler
;
;	Module compile time: Thu Mar 03 14:30:37 2022


	C_LINE	0,"mk2.c"

	MODULE	mk2_c


	INCLUDE "z80_crt0.hdr"


	C_LINE	0,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	26,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	27,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	32,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	33,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	133,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	150,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	165,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	175,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	189,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	196,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	204,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	215,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	221,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	234,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	240,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	251,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	257,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	268,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	277,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	285,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	398,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	399,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	400,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	401,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	402,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	403,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	404,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	405,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	410,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	411,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	412,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	413,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	414,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	415,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	416,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	417,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	418,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	423,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	424,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	425,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	426,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	427,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	432,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	433,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	434,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	435,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	437,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	438,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	439,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	440,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	441,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	442,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	443,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	448,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	449,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	450,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	451,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	452,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	453,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	454,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	455,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	456,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	457,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	458,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	464,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	465,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	466,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	467,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	468,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	469,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	474,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	475,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	476,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	477,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	478,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	479,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	480,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	485,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	486,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	487,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	488,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	489,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	490,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	491,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	492,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	493,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	494,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	495,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	496,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	497,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	498,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	499,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	500,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	501,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	502,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	503,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	504,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	505,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	506,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	507,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	512,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	513,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	514,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	515,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	516,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	517,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	518,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	519,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	520,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	521,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	522,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	541,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	542,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	543,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	544,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	545,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	546,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	547,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	548,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	549,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	550,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	551,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	552,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	553,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	554,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	556,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	557,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	563,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	564,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	565,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	566,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	567,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	580,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	581,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	582,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	583,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	584,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	612,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	613,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	614,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	615,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	617,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	618,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	619,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	620,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	10,"mk2.c"
	C_LINE	13,"mk2.c"
		LIB SPMoveSprAbs
		LIB SPPrintAtInv
		LIB SPTileArray
		LIB SPInvalidate
		LIB SPCompDListAddr
	C_LINE	0,"my/config.h"
	C_LINE	39,"my/config.h"
	C_LINE	129,"my/config.h"
	SECTION	data_compiler
._keyscancodes
	defw	763
	defw	765
	defw	509
	defw	1277
	defw	1151
	defw	2175
	defw	507
	defw	509
	defw	735
	defw	479
	defw	1151
	defw	2175
	SECTION	code_compiler
	C_LINE	651,"my/config.h"
	SECTION	data_compiler
._behs
	defb	0
	defb	8
	defb	8
	defb	8
	defb	8
	defb	8
	defb	8
	defb	4
	defb	4
	defb	8
	defb	8
	defb	8
	defb	8
	defb	1
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	defb	0
	SECTION	code_compiler
	C_LINE	21,"mk2.c"
	C_LINE	0,"my/sfx_config.h"
	C_LINE	22,"mk2.c"
	C_LINE	0,"definitions.h"
	C_LINE	55,"definitions.h"
	C_LINE	56,"definitions.h"
	C_LINE	57,"definitions.h"
	C_LINE	61,"definitions.h"
	C_LINE	62,"definitions.h"
	SECTION	data_compiler
._joyfunc
	defw	sp_JoyKeyboard + 0
	SECTION	code_compiler
	C_LINE	64,"definitions.h"
	SECTION	rodata_compiler
._joyfuncs
	defw	sp_JoyKeyboard + 0
	defw	sp_JoyKeyboard + 0
	defw	sp_JoyKempston + 0
	defw	sp_JoySinclair1 + 0
	SECTION	code_compiler
	C_LINE	68,"definitions.h"
	C_LINE	70,"definitions.h"

; Function my_malloc flags 0x00000200 __smallc 
; void * my_malloc(unsigned int bytes)
; parameter 'unsigned int bytes' at sp+2 size(2)
	C_LINE	70,"definitions.h::my_malloc::0::0"
._my_malloc
	ld	hl,0	;const
	push	hl
	call	sp_BlockAlloc
	pop	bc
	ret


	C_LINE	74,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._u_malloc
	defw	_my_malloc + 0
	SECTION	code_compiler
	C_LINE	75,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._u_free
	defw	sp_FreeBlock + 0
	SECTION	code_compiler
	C_LINE	77,"definitions.h::my_malloc::0::1"
	C_LINE	78,"definitions.h::my_malloc::0::1"
	C_LINE	83,"definitions.h::my_malloc::0::1"
	C_LINE	97,"definitions.h::my_malloc::0::1"
	.vpClipStruct defb  2 ,  2  + 20,  0 ,  0  + 30
	.fsClipStruct defb 0, 24, 0, 32
	C_LINE	104,"definitions.h::my_malloc::0::1"
	C_LINE	108,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._half_life
	defb	0
	SECTION	code_compiler
	C_LINE	111,"definitions.h::my_malloc::0::1"
	C_LINE	113,"definitions.h::my_malloc::0::1"
	C_LINE	119,"definitions.h::my_malloc::0::1"
	C_LINE	126,"definitions.h::my_malloc::0::1"
	C_LINE	127,"definitions.h::my_malloc::0::1"
	C_LINE	128,"definitions.h::my_malloc::0::1"
	C_LINE	129,"definitions.h::my_malloc::0::1"
	C_LINE	130,"definitions.h::my_malloc::0::1"
	C_LINE	131,"definitions.h::my_malloc::0::1"
	C_LINE	132,"definitions.h::my_malloc::0::1"
	C_LINE	133,"definitions.h::my_malloc::0::1"
	C_LINE	137,"definitions.h::my_malloc::0::1"
	C_LINE	139,"definitions.h::my_malloc::0::1"
	C_LINE	142,"definitions.h::my_malloc::0::1"
	C_LINE	144,"definitions.h::my_malloc::0::1"
	C_LINE	145,"definitions.h::my_malloc::0::1"
	C_LINE	167,"definitions.h::my_malloc::0::1"
	C_LINE	168,"definitions.h::my_malloc::0::1"
	C_LINE	178,"definitions.h::my_malloc::0::1"
	C_LINE	180,"definitions.h::my_malloc::0::1"
	C_LINE	181,"definitions.h::my_malloc::0::1"
	C_LINE	182,"definitions.h::my_malloc::0::1"
	C_LINE	185,"definitions.h::my_malloc::0::1"
	C_LINE	193,"definitions.h::my_malloc::0::1"
	C_LINE	194,"definitions.h::my_malloc::0::1"
	C_LINE	195,"definitions.h::my_malloc::0::1"
	C_LINE	196,"definitions.h::my_malloc::0::1"
	C_LINE	201,"definitions.h::my_malloc::0::1"
	C_LINE	202,"definitions.h::my_malloc::0::1"
	C_LINE	222,"definitions.h::my_malloc::0::1"
	C_LINE	228,"definitions.h::my_malloc::0::1"
	C_LINE	245,"definitions.h::my_malloc::0::1"
	C_LINE	246,"definitions.h::my_malloc::0::1"
	C_LINE	247,"definitions.h::my_malloc::0::1"
	C_LINE	248,"definitions.h::my_malloc::0::1"
	C_LINE	249,"definitions.h::my_malloc::0::1"
	C_LINE	250,"definitions.h::my_malloc::0::1"
	C_LINE	254,"definitions.h::my_malloc::0::1"
	C_LINE	258,"definitions.h::my_malloc::0::1"
	C_LINE	262,"definitions.h::my_malloc::0::1"
	C_LINE	263,"definitions.h::my_malloc::0::1"
	C_LINE	264,"definitions.h::my_malloc::0::1"
	C_LINE	265,"definitions.h::my_malloc::0::1"
	C_LINE	266,"definitions.h::my_malloc::0::1"
	C_LINE	270,"definitions.h::my_malloc::0::1"
	C_LINE	274,"definitions.h::my_malloc::0::1"
	C_LINE	275,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._level
	defb	0
	SECTION	code_compiler
	C_LINE	276,"definitions.h::my_malloc::0::1"
	C_LINE	277,"definitions.h::my_malloc::0::1"
	C_LINE	279,"definitions.h::my_malloc::0::1"
	C_LINE	298,"definitions.h::my_malloc::0::1"
	C_LINE	303,"definitions.h::my_malloc::0::1"
	C_LINE	310,"definitions.h::my_malloc::0::1"
	C_LINE	318,"definitions.h::my_malloc::0::1"
	C_LINE	329,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._do_gravity
	defb	1
	SECTION	code_compiler
	C_LINE	336,"definitions.h::my_malloc::0::1"
	C_LINE	339,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._invalidate_fire
	defb	0
	SECTION	code_compiler
	C_LINE	348,"definitions.h::my_malloc::0::1"
	C_LINE	349,"definitions.h::my_malloc::0::1"
	C_LINE	350,"definitions.h::my_malloc::0::1"
	C_LINE	351,"definitions.h::my_malloc::0::1"
	C_LINE	352,"definitions.h::my_malloc::0::1"
	C_LINE	353,"definitions.h::my_malloc::0::1"
	C_LINE	354,"definitions.h::my_malloc::0::1"
	C_LINE	355,"definitions.h::my_malloc::0::1"
	C_LINE	356,"definitions.h::my_malloc::0::1"
	C_LINE	357,"definitions.h::my_malloc::0::1"
	C_LINE	358,"definitions.h::my_malloc::0::1"
	C_LINE	359,"definitions.h::my_malloc::0::1"
	C_LINE	360,"definitions.h::my_malloc::0::1"
	C_LINE	375,"definitions.h::my_malloc::0::1"
	C_LINE	376,"definitions.h::my_malloc::0::1"
	C_LINE	390,"definitions.h::my_malloc::0::1"
	C_LINE	393,"definitions.h::my_malloc::0::1"
	C_LINE	399,"definitions.h::my_malloc::0::1"
	C_LINE	409,"definitions.h::my_malloc::0::1"
	C_LINE	410,"definitions.h::my_malloc::0::1"
	C_LINE	26,"mk2.c::my_malloc::0::1"
	C_LINE	0,"autodefs.h::my_malloc::0::1"
	C_LINE	7,"autodefs.h::my_malloc::0::1"
	C_LINE	8,"autodefs.h::my_malloc::0::1"
	C_LINE	31,"autodefs.h::my_malloc::0::1"
	C_LINE	32,"autodefs.h::my_malloc::0::1"
	C_LINE	34,"autodefs.h::my_malloc::0::1"
	C_LINE	35,"autodefs.h::my_malloc::0::1"
	C_LINE	36,"autodefs.h::my_malloc::0::1"
	C_LINE	37,"autodefs.h::my_malloc::0::1"
	C_LINE	38,"autodefs.h::my_malloc::0::1"
	C_LINE	39,"autodefs.h::my_malloc::0::1"
	C_LINE	40,"autodefs.h::my_malloc::0::1"
	C_LINE	41,"autodefs.h::my_malloc::0::1"
	C_LINE	43,"autodefs.h::my_malloc::0::1"
	C_LINE	44,"autodefs.h::my_malloc::0::1"
	C_LINE	27,"mk2.c::my_malloc::0::1"
	C_LINE	0,"my/msc-config.h::my_malloc::0::1"
	C_LINE	5,"my/msc-config.h::my_malloc::0::1"
	C_LINE	6,"my/msc-config.h::my_malloc::0::1"
	SECTION	data_compiler
._script_result
	defb	0
	SECTION	code_compiler
	C_LINE	7,"my/msc-config.h::my_malloc::0::1"
	SECTION	data_compiler
._sc_terminado
	defb	0
	SECTION	code_compiler
	C_LINE	8,"my/msc-config.h::my_malloc::0::1"
	SECTION	data_compiler
._sc_continuar
	defb	0
	SECTION	code_compiler
	C_LINE	9,"my/msc-config.h::my_malloc::0::1"
	C_LINE	11,"my/msc-config.h::my_malloc::0::1"
	C_LINE	12,"my/msc-config.h::my_malloc::0::1"
    ._main_script
        BINARY "../bin/scripts.bin"
	C_LINE	18,"my/msc-config.h::my_malloc::0::1"
	C_LINE	19,"my/msc-config.h::my_malloc::0::1"
	C_LINE	20,"my/msc-config.h::my_malloc::0::1"
    ._script defw 0
	C_LINE	30,"mk2.c::my_malloc::0::1"
	C_LINE	0,"system/aplib.h::my_malloc::0::1"
	C_LINE	7,"system/aplib.h::my_malloc::0::1"
	C_LINE	8,"system/aplib.h::my_malloc::0::1"
	C_LINE	12,"system/aplib.h::my_malloc::0::1"
; aPPack decompressor
; original source by dwedit
; very slightly adapted by utopian
; optimized by Metalbrain
;hl = source
;de = dest
.depack		ld	ixl,128
.apbranch1	ldi
.aploop0	ld	ixh,1		;LWM = 0
.aploop		call 	ap_getbit
		jr 	nc,apbranch1
		call 	ap_getbit
		jr 	nc,apbranch2
		ld 	b,0
		call 	ap_getbit
		jr 	nc,apbranch3
		ld	c,16		;get an offset
.apget4bits	call 	ap_getbit
		rl 	c
		jr	nc,apget4bits
		jr 	nz,apbranch4
		ld 	a,b
.apwritebyte	ld 	(de),a		;write a 0
		inc 	de
		jr	aploop0
.apbranch4	and	a
		ex 	de,hl 		;write a previous byte (1-15 away from dest)
		sbc 	hl,bc
		ld 	a,(hl)
		add	hl,bc
		ex 	de,hl
		jr	apwritebyte
.apbranch3	ld 	c,(hl)		;use 7 bit offset, length = 2 or 3
		inc 	hl
		rr 	c
		ret 	z		;if a zero is encountered here, it is EOF
		ld	a,2
		adc	a,b
		push 	hl
		ld	iyh,b
		ld	iyl,c
		ld 	h,d
		ld 	l,e
		sbc 	hl,bc
		ld 	c,a
		jr	ap_finishup2
.apbranch2	call 	ap_getgamma	;use a gamma code * 256 for offset, another gamma code for length
		dec 	c
		ld	a,c
		sub	ixh
		jr 	z,ap_r0_gamma		;if gamma code is 2, use old r0 offset,
		dec 	a
		;do I even need this code?
		;bc=bc*256+(hl), lazy 16bit way
		ld 	b,a
		ld 	c,(hl)
		inc 	hl
		ld	iyh,b
		ld	iyl,c
		push 	bc
		call 	ap_getgamma
		ex 	(sp),hl		;bc = len, hl=offs
		push 	de
		ex 	de,hl
		ld	a,4
		cp	d
		jr 	nc,apskip2
		inc 	bc
		or	a
.apskip2	ld 	hl,127
		sbc 	hl,de
		jr 	c,apskip3
		inc 	bc
		inc 	bc
.apskip3		pop 	hl		;bc = len, de = offs, hl=junk
		push 	hl
		or 	a
.ap_finishup	sbc 	hl,de
		pop 	de		;hl=dest-offs, bc=len, de = dest
.ap_finishup2	ldir
		pop 	hl
		ld	ixh,b
		jr 	aploop
.ap_r0_gamma	call 	ap_getgamma		;and a new gamma code for length
		push 	hl
		push 	de
		ex	de,hl
		ld	d,iyh
		ld	e,iyl
		jr 	ap_finishup
.ap_getbit	ld	a,ixl
		add	a,a
		ld	ixl,a
		ret	nz
		ld	a,(hl)
		inc	hl
		rla
		ld	ixl,a
		ret
.ap_getgamma	ld 	bc,1
.ap_getgammaloop	call 	ap_getbit
		rl 	c
		rl 	b
		call 	ap_getbit
		jr 	c,ap_getgammaloop
		ret
	C_LINE	136,"system/aplib.h::my_malloc::0::1"
	._ram_address
		defw 0
	._ram_destination
		defw 0
	C_LINE	167,"system/aplib.h::my_malloc::0::1"

; Function unpack flags 0x00000200 __smallc 
; void unpack(unsigned int address, unsigned int destination)
; parameter 'unsigned int destination' at sp+2 size(2)
; parameter 'unsigned int address' at sp+4 size(2)
	C_LINE	167,"system/aplib.h::unpack::0::1"
._unpack
	ld	hl,4	;const
	add	hl,sp
	call	l_gint	;
	ld	a,h
	or	l
	jp	z,i_15	;
	ld	de,_ram_address
	ld	hl,4	;const
	add	hl,sp
	ldi
	ldi
	ld	de,_ram_destination
	pop	bc
	pop	hl
	push	hl
	push	bc
	call	l_pint
			ld hl, (_ram_address)
			ld de, (_ram_destination)
			call depack
.i_15
	ret


	C_LINE	37,"mk2.c::unpack::0::3"
	C_LINE	0,"assets/pantallas.h::unpack::0::3"
	C_LINE	8,"assets/pantallas.h::unpack::0::3"
	C_LINE	9,"assets/pantallas.h::unpack::0::3"
	C_LINE	10,"assets/pantallas.h::unpack::0::3"
	C_LINE	12,"assets/pantallas.h::unpack::0::3"
	._s_title
		BINARY "../bin/title.bin"
	._s_marco
	C_LINE	22,"assets/pantallas.h::unpack::0::3"
	._s_ending
		BINARY "../bin/ending.bin"
	C_LINE	38,"mk2.c::unpack::0::3"
	C_LINE	0,"assets/mapa.h::unpack::0::3"
	C_LINE	8,"assets/mapa.h::unpack::0::3"
	C_LINE	10,"assets/mapa.h::unpack::0::3"
	._map
			BINARY "../bin/map.bin"
	C_LINE	20,"assets/mapa.h::unpack::0::3"
	C_LINE	58,"mk2.c::unpack::0::3"
	C_LINE	0,"assets/tileset.h::unpack::0::3"
	C_LINE	8,"assets/tileset.h::unpack::0::3"
	C_LINE	9,"assets/tileset.h::unpack::0::3"
	._tileset
		BINARY "../bin/ts.bin"
	C_LINE	59,"mk2.c::unpack::0::3"
	C_LINE	0,"assets/sprites.h::unpack::0::3"
	C_LINE	5,"assets/sprites.h::unpack::0::3"
	C_LINE	6,"assets/sprites.h::unpack::0::3"
	C_LINE	7,"assets/sprites.h::unpack::0::3"
	C_LINE	8,"assets/sprites.h::unpack::0::3"
	C_LINE	9,"assets/sprites.h::unpack::0::3"
	C_LINE	10,"assets/sprites.h::unpack::0::3"
	C_LINE	11,"assets/sprites.h::unpack::0::3"
	C_LINE	12,"assets/sprites.h::unpack::0::3"
	C_LINE	13,"assets/sprites.h::unpack::0::3"
	C_LINE	14,"assets/sprites.h::unpack::0::3"
	C_LINE	15,"assets/sprites.h::unpack::0::3"
	C_LINE	16,"assets/sprites.h::unpack::0::3"
	C_LINE	17,"assets/sprites.h::unpack::0::3"
	C_LINE	18,"assets/sprites.h::unpack::0::3"
	C_LINE	19,"assets/sprites.h::unpack::0::3"
	C_LINE	20,"assets/sprites.h::unpack::0::3"
	C_LINE	21,"assets/sprites.h::unpack::0::3"
	C_LINE	22,"assets/sprites.h::unpack::0::3"
	C_LINE	23,"assets/sprites.h::unpack::0::3"
	C_LINE	24,"assets/sprites.h::unpack::0::3"
	C_LINE	25,"assets/sprites.h::unpack::0::3"
	C_LINE	26,"assets/sprites.h::unpack::0::3"
	C_LINE	27,"assets/sprites.h::unpack::0::3"
	C_LINE	28,"assets/sprites.h::unpack::0::3"
	C_LINE	29,"assets/sprites.h::unpack::0::3"
	C_LINE	30,"assets/sprites.h::unpack::0::3"
	C_LINE	31,"assets/sprites.h::unpack::0::3"
	C_LINE	32,"assets/sprites.h::unpack::0::3"
	C_LINE	33,"assets/sprites.h::unpack::0::3"
	C_LINE	34,"assets/sprites.h::unpack::0::3"
	C_LINE	35,"assets/sprites.h::unpack::0::3"
	C_LINE	36,"assets/sprites.h::unpack::0::3"
	C_LINE	37,"assets/sprites.h::unpack::0::3"
	C_LINE	38,"assets/sprites.h::unpack::0::3"
	C_LINE	39,"assets/sprites.h::unpack::0::3"
	C_LINE	40,"assets/sprites.h::unpack::0::3"
	C_LINE	41,"assets/sprites.h::unpack::0::3"
	C_LINE	42,"assets/sprites.h::unpack::0::3"
	C_LINE	43,"assets/sprites.h::unpack::0::3"
	C_LINE	44,"assets/sprites.h::unpack::0::3"
	C_LINE	45,"assets/sprites.h::unpack::0::3"
	C_LINE	46,"assets/sprites.h::unpack::0::3"
	C_LINE	47,"assets/sprites.h::unpack::0::3"
	C_LINE	48,"assets/sprites.h::unpack::0::3"
	C_LINE	49,"assets/sprites.h::unpack::0::3"
	C_LINE	50,"assets/sprites.h::unpack::0::3"
	C_LINE	51,"assets/sprites.h::unpack::0::3"
	C_LINE	52,"assets/sprites.h::unpack::0::3"
	C_LINE	53,"assets/sprites.h::unpack::0::3"
	C_LINE	55,"assets/sprites.h::unpack::0::3"
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_1_a
        defb 0, 255
        defb 5, 240
        defb 7, 224
        defb 31, 192
        defb 0, 192
        defb 41, 128
        defb 17, 192
        defb 33, 128
        defb 80, 0
        defb 44, 128
        defb 12, 192
        defb 23, 192
        defb 32, 128
        defb 80, 0
        defb 111, 0
        defb 56, 128
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_1_b
        defb 0, 255
        defb 80, 7
        defb 240, 3
        defb 252, 1
        defb 0, 3
        defb 104, 3
        defb 104, 3
        defb 240, 7
        defb 0, 15
        defb 0, 31
        defb 0, 15
        defb 128, 5
        defb 2, 0
        defb 22, 0
        defb 236, 1
        defb 8, 3
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_1_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_2_a
        defb 5, 240
        defb 7, 224
        defb 31, 192
        defb 0, 192
        defb 41, 128
        defb 17, 192
        defb 33, 128
        defb 80, 0
        defb 38, 128
        defb 6, 192
        defb 17, 192
        defb 32, 128
        defb 16, 192
        defb 15, 224
        defb 3, 240
        defb 2, 248
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_2_b
        defb 80, 7
        defb 240, 3
        defb 252, 1
        defb 0, 3
        defb 104, 3
        defb 104, 3
        defb 240, 7
        defb 0, 15
        defb 0, 31
        defb 0, 15
        defb 224, 3
        defb 8, 3
        defb 16, 7
        defb 224, 15
        defb 128, 31
        defb 192, 31
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_2_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_3_a
        defb 0, 255
        defb 5, 240
        defb 7, 224
        defb 31, 192
        defb 0, 192
        defb 41, 128
        defb 17, 192
        defb 33, 128
        defb 80, 0
        defb 33, 128
        defb 1, 192
        defb 16, 192
        defb 0, 128
        defb 80, 0
        defb 111, 0
        defb 56, 128
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_3_b
        defb 0, 255
        defb 80, 7
        defb 240, 3
        defb 252, 1
        defb 0, 3
        defb 104, 3
        defb 104, 3
        defb 240, 7
        defb 0, 15
        defb 128, 31
        defb 128, 15
        defb 112, 5
        defb 10, 0
        defb 22, 0
        defb 236, 1
        defb 8, 3
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_3_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_4_a
        defb 5, 240
        defb 7, 224
        defb 31, 192
        defb 0, 192
        defb 41, 128
        defb 17, 192
        defb 33, 128
        defb 86, 0
        defb 38, 128
        defb 3, 192
        defb 16, 192
        defb 32, 128
        defb 17, 192
        defb 30, 128
        defb 112, 1
        defb 24, 131
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_4_b
        defb 80, 7
        defb 240, 3
        defb 252, 1
        defb 0, 3
        defb 104, 3
        defb 104, 3
        defb 240, 7
        defb 0, 13
        defb 66, 0
        defb 134, 0
        defb 6, 0
        defb 8, 1
        defb 240, 7
        defb 0, 15
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_4_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_5_a
        defb 0, 255
        defb 10, 224
        defb 15, 192
        defb 63, 128
        defb 0, 192
        defb 22, 192
        defb 22, 192
        defb 15, 224
        defb 0, 240
        defb 0, 248
        defb 0, 240
        defb 1, 160
        defb 64, 0
        defb 104, 0
        defb 55, 128
        defb 16, 192
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_5_b
        defb 0, 255
        defb 160, 15
        defb 224, 7
        defb 248, 3
        defb 0, 3
        defb 148, 1
        defb 136, 3
        defb 132, 1
        defb 10, 0
        defb 52, 1
        defb 48, 3
        defb 232, 3
        defb 4, 1
        defb 10, 0
        defb 246, 0
        defb 28, 1
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_5_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_6_a
        defb 10, 224
        defb 15, 192
        defb 63, 128
        defb 0, 192
        defb 22, 192
        defb 22, 192
        defb 15, 224
        defb 0, 240
        defb 0, 248
        defb 0, 240
        defb 7, 192
        defb 16, 192
        defb 8, 224
        defb 7, 240
        defb 1, 248
        defb 3, 248
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_6_b
        defb 160, 15
        defb 224, 7
        defb 248, 3
        defb 0, 3
        defb 148, 1
        defb 136, 3
        defb 132, 1
        defb 10, 0
        defb 100, 1
        defb 96, 3
        defb 136, 3
        defb 4, 1
        defb 8, 3
        defb 240, 7
        defb 192, 15
        defb 64, 31
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_6_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_7_a
        defb 0, 255
        defb 10, 224
        defb 15, 192
        defb 63, 128
        defb 0, 192
        defb 22, 192
        defb 22, 192
        defb 15, 224
        defb 0, 240
        defb 1, 248
        defb 1, 240
        defb 14, 160
        defb 80, 0
        defb 104, 0
        defb 55, 128
        defb 16, 192
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_7_b
        defb 0, 255
        defb 160, 15
        defb 224, 7
        defb 248, 3
        defb 0, 3
        defb 148, 1
        defb 136, 3
        defb 132, 1
        defb 10, 0
        defb 132, 1
        defb 128, 3
        defb 8, 3
        defb 0, 1
        defb 10, 0
        defb 246, 0
        defb 28, 1
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_7_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_8_a
        defb 10, 224
        defb 15, 192
        defb 63, 128
        defb 0, 192
        defb 22, 192
        defb 22, 192
        defb 15, 224
        defb 0, 176
        defb 66, 0
        defb 97, 0
        defb 96, 0
        defb 16, 128
        defb 15, 224
        defb 0, 240
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_8_b
        defb 160, 15
        defb 224, 7
        defb 248, 3
        defb 0, 3
        defb 148, 1
        defb 136, 3
        defb 132, 1
        defb 106, 0
        defb 100, 1
        defb 192, 3
        defb 8, 3
        defb 4, 1
        defb 136, 3
        defb 120, 1
        defb 14, 128
        defb 24, 193
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_8_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_9_a
        defb 49, 200
        defb 119, 128
        defb 79, 128
        defb 8, 160
        defb 5, 128
        defb 109, 0
        defb 109, 0
        defb 71, 0
        defb 56, 128
        defb 7, 192
        defb 3, 224
        defb 8, 224
        defb 15, 224
        defb 24, 192
        defb 24, 195
        defb 56, 131
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_9_b
        defb 134, 17
        defb 238, 1
        defb 242, 1
        defb 16, 5
        defb 160, 7
        defb 176, 7
        defb 176, 3
        defb 236, 1
        defb 10, 0
        defb 114, 0
        defb 102, 0
        defb 0, 1
        defb 126, 0
        defb 62, 0
        defb 2, 192
        defb 0, 252
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_9_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_10_a
        defb 97, 136
        defb 119, 128
        defb 79, 128
        defb 8, 160
        defb 5, 224
        defb 13, 224
        defb 13, 192
        defb 55, 128
        defb 80, 0
        defb 78, 0
        defb 102, 0
        defb 0, 128
        defb 126, 0
        defb 124, 0
        defb 64, 3
        defb 0, 63
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_10_b
        defb 140, 19
        defb 238, 1
        defb 242, 1
        defb 16, 5
        defb 160, 1
        defb 182, 0
        defb 182, 0
        defb 226, 0
        defb 28, 1
        defb 224, 3
        defb 192, 7
        defb 16, 7
        defb 240, 7
        defb 24, 3
        defb 24, 195
        defb 28, 193
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_10_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_11_a
        defb 10, 225
        defb 17, 192
        defb 32, 128
        defb 0, 192
        defb 22, 192
        defb 22, 192
        defb 22, 192
        defb 15, 128
        defb 112, 0
        defb 109, 0
        defb 27, 128
        defb 13, 224
        defb 2, 240
        defb 7, 240
        defb 12, 224
        defb 24, 195
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_11_b
        defb 168, 87
        defb 4, 3
        defb 10, 1
        defb 4, 3
        defb 194, 1
        defb 224, 3
        defb 226, 1
        defb 224, 1
        defb 28, 1
        defb 254, 0
        defb 227, 0
        defb 179, 0
        defb 120, 0
        defb 24, 3
        defb 24, 195
        defb 12, 225
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_11_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_12_a
        defb 21, 234
        defb 32, 192
        defb 80, 128
        defb 32, 192
        defb 67, 128
        defb 7, 192
        defb 71, 128
        defb 7, 128
        defb 56, 128
        defb 127, 0
        defb 199, 0
        defb 205, 0
        defb 30, 0
        defb 24, 192
        defb 24, 195
        defb 48, 135
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_12_b
        defb 80, 135
        defb 136, 3
        defb 4, 1
        defb 0, 3
        defb 104, 3
        defb 104, 3
        defb 104, 3
        defb 240, 1
        defb 14, 0
        defb 182, 0
        defb 216, 1
        defb 176, 7
        defb 64, 15
        defb 224, 15
        defb 48, 7
        defb 24, 195
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_12_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_13_a
        defb 7, 248
        defb 8, 240
        defb 16, 224
        defb 32, 192
        defb 40, 192
        defb 45, 192
        defb 45, 192
        defb 39, 192
        defb 40, 192
        defb 23, 192
        defb 39, 128
        defb 99, 0
        defb 96, 0
        defb 7, 144
        defb 14, 224
        defb 7, 240
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_13_b
        defb 224, 31
        defb 16, 15
        defb 8, 7
        defb 4, 3
        defb 20, 3
        defb 180, 3
        defb 180, 3
        defb 224, 3
        defb 12, 1
        defb 114, 0
        defb 114, 0
        defb 99, 0
        defb 19, 0
        defb 56, 0
        defb 24, 195
        defb 12, 97
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_13_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_14_a
        defb 7, 248
        defb 8, 240
        defb 16, 224
        defb 32, 192
        defb 40, 192
        defb 45, 192
        defb 45, 192
        defb 7, 192
        defb 48, 128
        defb 78, 0
        defb 78, 0
        defb 198, 0
        defb 200, 0
        defb 28, 0
        defb 24, 195
        defb 48, 134
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_14_b
        defb 224, 31
        defb 16, 15
        defb 8, 7
        defb 4, 3
        defb 20, 3
        defb 180, 3
        defb 180, 3
        defb 228, 3
        defb 20, 3
        defb 232, 3
        defb 228, 1
        defb 198, 0
        defb 6, 0
        defb 224, 9
        defb 112, 7
        defb 224, 15
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_14_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_15_a
        defb 0, 131
        defb 56, 1
        defb 124, 0
        defb 250, 0
        defb 248, 0
        defb 248, 1
        defb 216, 0
        defb 235, 0
        defb 215, 0
        defb 247, 0
        defb 83, 0
        defb 37, 0
        defb 19, 0
        defb 2, 128
        defb 0, 192
        defb 0, 240
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_15_b
        defb 0, 193
        defb 28, 128
        defb 62, 0
        defb 95, 0
        defb 31, 0
        defb 31, 128
        defb 27, 0
        defb 215, 0
        defb 171, 0
        defb 239, 0
        defb 202, 0
        defb 164, 0
        defb 200, 0
        defb 64, 1
        defb 0, 3
        defb 0, 15
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_15_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_16_a
        defb 0, 255
        defb 0, 143
        defb 32, 8
        defb 67, 0
        defb 71, 0
        defb 103, 0
        defb 243, 0
        defb 245, 0
        defb 243, 0
        defb 234, 0
        defb 218, 0
        defb 108, 0
        defb 120, 1
        defb 52, 0
        defb 26, 0
        defb 4, 192
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_16_b
        defb 0, 255
        defb 0, 241
        defb 4, 16
        defb 194, 0
        defb 162, 0
        defb 230, 0
        defb 207, 0
        defb 175, 0
        defb 207, 0
        defb 87, 0
        defb 91, 0
        defb 54, 0
        defb 30, 128
        defb 44, 0
        defb 88, 0
        defb 32, 3
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_16_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
; Extra sprites ahead...
    ._sprite_e
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 255, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
	C_LINE	60,"mk2.c::unpack::0::3"
	C_LINE	0,"assets/extrasprites.h::unpack::0::3"
	C_LINE	8,"assets/extrasprites.h::unpack::0::3"
	C_LINE	11,"assets/extrasprites.h::unpack::0::3"
	C_LINE	22,"assets/extrasprites.h::unpack::0::3"
	C_LINE	23,"assets/extrasprites.h::unpack::0::3"
	C_LINE	24,"assets/extrasprites.h::unpack::0::3"
	C_LINE	42,"assets/extrasprites.h::unpack::0::3"
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
	C_LINE	55,"assets/extrasprites.h::unpack::0::3"
	    ._sprite_17_a
	        defb 0, 128, 56, 0, 117, 0, 123, 0, 127, 0, 57, 0, 0, 0, 96, 0, 238, 0, 95, 0, 31, 0, 62, 0, 53, 128, 42, 128, 20, 128, 0, 192, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255 
	    ._sprite_17_b
	        defb 0, 3, 240, 1, 248, 0, 236, 0, 212, 0, 248, 0, 224, 1, 24, 0, 124, 0, 120, 0, 244, 0, 168, 0, 0, 1, 0, 3, 0, 63, 0, 127, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255 
	    ._sprite_17_c
	        defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	C_LINE	66,"assets/extrasprites.h::unpack::0::3"
	._sprite_18_a
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	._sprite_18_b
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	._sprite_18_c
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	C_LINE	126,"assets/extrasprites.h::unpack::0::3"
	._sprite_sword_l
		defb @00000000, @11111111
		defb @00000000, @11110001
		defb @00000100, @10000000
		defb @01111101, @00000000
		defb @10000101, @00000000
		defb @01111101, @00000000
		defb @00000100, @10000000
		defb @00000000, @11110001
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	._sprite_sword_r
		defb @00000000, @11111111
		defb @00000000, @10001111
		defb @00100000, @00000001
		defb @10111110, @00000000
		defb @10100001, @00000000
		defb @10111110, @00000000
		defb @00100000, @00000001
		defb @00000000, @10001111
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	._sprite_sword_u
		defb @00001000, @11100011
		defb @00011100, @11000001
		defb @00011100, @11000001
		defb @00010100, @11000001
		defb @00010100, @10000000
		defb @00111110, @10000000
		defb @00000000, @10000000
		defb @00011100, @11000001
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	C_LINE	61,"mk2.c::unpack::0::3"
	C_LINE	0,"assets/enems.h::unpack::0::3"
	C_LINE	11,"assets/enems.h::unpack::0::3"
	C_LINE	19,"assets/enems.h::unpack::0::3"
	C_LINE	21,"assets/enems.h::unpack::0::3"
	._baddies
		BINARY "../bin/enems.bin"
	C_LINE	28,"assets/enems.h::unpack::0::3"
	C_LINE	32,"assets/enems.h::unpack::0::3"
	C_LINE	34,"assets/enems.h::unpack::0::3"
	._hotspots
		BINARY "../bin/hotspots.bin"
	C_LINE	62,"mk2.c::unpack::0::3"
	C_LINE	0,"addons/helpers.h::unpack::0::3"
	C_LINE	66,"mk2.c::unpack::0::3"
	C_LINE	0,"sound/beeper.h::unpack::0::3"
	C_LINE	11,"sound/beeper.h::unpack::0::3"
.sound_play
	ld hl, soundEffectsData	;address of sound effects data
	;di
	push iy
	ld b,0
	ld c,a
	add hl,bc
	add hl,bc
	ld a,(hl)
	inc hl
	ld h,(hl)
	ld l,a
	push hl
	pop ix			;put it into ix
.readData
	ld a,(ix+0)		;read block type
	or a
	jr nz,readData_sound
	pop iy
	;ei
	ret
.readData_sound
	ld c,(ix+1)		;read duration 1
	ld b,(ix+2)
	ld e,(ix+3)		;read duration 2
	ld d,(ix+4)
	push de
	pop iy
	dec a
	jr nz,sfxRoutineNoise
;this routine generate tone with many parameters
.sfxRoutineTone
	ld e,(ix+5)		;freq
	ld d,(ix+6)
	ld a,(ix+9)		;duty
	ld (sfxRoutineTone_duty + 1),a
	ld hl,0
.sfxRoutineTone_l0
	push bc
	push iy
	pop bc
.sfxRoutineTone_l1
	add hl,de
	ld a,h
.sfxRoutineTone_duty
	cp 0
	sbc a,a
	and 16
.sfxRoutineTone_border
	or 0
	out ($fe),a
	dec bc
	ld a,b
	or c
	jr nz,sfxRoutineTone_l1
	ld a,(sfxRoutineTone_duty + 1)
	add a,(ix+10)	;duty change
	ld (sfxRoutineTone_duty + 1),a
	ld c,(ix+7)		;slide
	ld b,(ix+8)
	ex de,hl
	add hl,bc
	ex de,hl
	pop bc
	dec bc
	ld a,b
	or c
	jr nz,sfxRoutineTone_l0
	ld c,11
.nextData
	add ix,bc		;skip to the next block
	jr readData
;this routine generate noise with two parameters
.sfxRoutineNoise
	ld e,(ix+5)		;pitch
	ld d,1
	ld h,d
	ld l,d
.sfxRoutineNoise_l0
	push bc
	push iy
	pop bc
.sfxRoutineNoise_l1
	ld a,(hl)
	and 16
.sfxRoutineNoise_border
	or 0
	out ($fe),a
	dec d
	jr nz,sfxRoutineNoise_l2
	ld d,e
	inc hl
	ld a,h
	and $1f
	ld h,a
.sfxRoutineNoise_l2
	dec bc
	ld a,b
	or c
	jr nz,sfxRoutineNoise_l1
	ld a,e
	add a,(ix+6)	;slide
	ld e,a
	pop bc
	dec bc
	ld a,b
	or c
	jr nz,sfxRoutineNoise_l0
	ld c,7
	jr nextData
.soundEffectsData
	defw soundEffectsData_sfx0
	defw soundEffectsData_sfx1
	defw soundEffectsData_sfx2
	defw soundEffectsData_sfx3
	defw soundEffectsData_sfx4
	defw soundEffectsData_sfx5
	defw soundEffectsData_sfx6
	defw soundEffectsData_sfx7
	defw soundEffectsData_sfx8
	defw soundEffectsData_sfx9
	defw soundEffectsData_sfx10
	defw soundEffectsData_sfx11
.soundEffectsData_sfx0
	defb 0x01
	defw 0x000a,0x03e8,0x00c8,0x0016,0x1680
	defb 0x00
.soundEffectsData_sfx1
	defb 0x01
	defw 0x0064,0x0014,0x01f4,0x0002,0x0010
	defb 0x00
.soundEffectsData_sfx2
	defb 0x02
	defw 0x0001,0x03e8,0x000a
	defb 0x01
	defw 0x0014,0x0064,0x0190,0xfff0,0x0080
	defb 0x02
	defw 0x0001,0x07d0,0x0001
	defb 0x00
.soundEffectsData_sfx3
	defb 0x01
	defw 0x0014,0x00c8,0x0d48,0x000a,0x0040
	defb 0x00
.soundEffectsData_sfx4
	defb 0x01
	defw 0x0050,0x0014,0x03e8,0xffff,0x0080
	defb 0x00
.soundEffectsData_sfx5
	defb 0x01
	defw 0x0004,0x03e8,0x03e8,0x0190,0x0080
	defb 0x00
.soundEffectsData_sfx6
	defb 0x01
	defw 0x0002,0x0fa0,0x0190,0x00c8,0x0040
	defb 0x01
	defw 0x0002,0x0fa0,0x00c8,0x00c8,0x0020
	defb 0x00
.soundEffectsData_sfx7
	defb 0x01
	defw 0x000a,0x03e8,0x00c8,0x0002,0x0010
	defb 0x01
	defw 0x0001,0x0fa0,0x0000,0x0000,0x0000
	defb 0x01
	defw 0x000a,0x03e8,0x00c8,0xfffe,0x0010
	defb 0x01
	defw 0x0001,0x07d0,0x0000,0x0000,0x0000
	defb 0x01
	defw 0x000a,0x03e8,0x00b4,0xfffe,0x0010
	defb 0x01
	defw 0x0001,0x0fa0,0x0000,0x0000,0x0000
	defb 0x00
.soundEffectsData_sfx8
	defb 0x02
	defw 0x0001,0x03e8,0x0014
	defb 0x01
	defw 0x0001,0x03e8,0x0000,0x0000,0x0000
	defb 0x02
	defw 0x0001,0x03e8,0x0001
	defb 0x00
.soundEffectsData_sfx9
	defb 0x02
	defw 0x0014,0x0032,0x0101
	defb 0x00
.soundEffectsData_sfx10
	defb 0x02
	defw 0x0064,0x01f4,0x0264
	defb 0x00
.soundEffectsData_sfx11
	defb 0x01
	defw 0x0014,0x01f4,0x00c8,0x0005,0x0110
	defb 0x01
	defw 0x0001,0x03e8,0x0000,0x0000,0x0000
	defb 0x01
	defw 0x001e,0x01f4,0x00c8,0x0008,0x0110
	defb 0x01
	defw 0x0001,0x07d0,0x0000,0x0000,0x0000
	defb 0x00
	C_LINE	255,"sound/beeper.h::unpack::0::3"

; Function beep_fx flags 0x00000200 __smallc 
; void beep_fx(unsigned char n)
; parameter 'unsigned char n' at sp+2 size(1)
	C_LINE	255,"sound/beeper.h::beep_fx::0::3"
._beep_fx
	ld	hl,2	;const
	add	hl,sp
	ld	l,(hl)
	ld	h,0
	ld	(_asm_int),hl
		push ix
		push iy
		ld a, (_asm_int)
		call sound_play
		pop ix
		pop iy
	ret


	C_LINE	85,"mk2.c::beep_fx::0::4"
	C_LINE	0,"engine/isrc.h::beep_fx::0::4"
	C_LINE	5,"engine/isrc.h::beep_fx::0::4"
	defw 0
	C_LINE	11,"engine/isrc.h::beep_fx::0::4"

; Function ISR flags 0x00000200 __smallc 
; void ISR()
	C_LINE	11,"engine/isrc.h::ISR::0::4"
._ISR
	ld	hl,(_isrc)
	ld	h,0
	inc	hl
	ld	a,l
	ld	(_isrc),a
	ret


	C_LINE	87,"mk2.c::ISR::0::5"
	C_LINE	0,"engine/printer.h::ISR::0::5"
	C_LINE	8,"engine/printer.h::ISR::0::5"
	SECTION	data_compiler
._spacer
	defw	i_1+0
	SECTION	code_compiler
	C_LINE	25,"engine/printer.h::ISR::0::5"

; Function draw_coloured_tile flags 0x00000200 __smallc 
; void draw_coloured_tile()
	C_LINE	25,"engine/printer.h::draw_coloured_tile::0::5"
._draw_coloured_tile
				ld  a, (__x)
				ld  c, a
				ld  a, (__y)
				call SPCompDListAddr
				ex de, hl
				ld  a, (__t)
				sla a
				sla a 				 
				add 64 				 
				ld  hl, _tileset + 2048
				ld  b, 0
				ld  c, a
				add hl, bc 			 
				ld  c, a 			 
				ld  a, (hl) 		 
				ld  (de), a 		 
				inc de
				inc hl 				 
				ld  a, c  			 
				ld  (de), a			 
				inc de
				inc a 				 
				ld  c, a 
				inc de
				inc de 				 
				ld  a, (hl) 		 
				ld  (de), a 		 
				inc de
				inc hl 				 
				ld  a, c  			 
				ld  (de), a			 
				inc a 				 
				ex  de, hl
				ld  bc, 123
				add hl, bc
				ex  de, hl			 
				ld  c, a 
				ld  a, (hl) 		 
				ld  (de), a 		 
				inc de
				inc hl 				 
				ld  a, c  			 
				ld  (de), a			 
				inc de
				inc a 				 
				ld  c, a 
				inc de
				inc de 				 
				ld  a, (hl) 		 
				ld  (de), a 		 
				inc de
				ld  a, c  			 
				ld  (de), a			 
	ret


	C_LINE	476,"engine/printer.h::draw_coloured_tile::0::6"

; Function invalidate_tile flags 0x00000200 __smallc 
; void invalidate_tile()
	C_LINE	476,"engine/printer.h::invalidate_tile::0::6"
._invalidate_tile
			; Invalidate Rectangle
			;
			; enter:  B = row coord top left corner
			;         C = col coord top left corner
			;         D = row coord bottom right corner
			;         E = col coord bottom right corner
			;        IY = clipping rectangle, set it to "ClipStruct" for full screen
			ld  a, (__x)
			inc a
			ld  e, a
			ld  a, (__y)
			inc a
			ld  d, a
			ld  a, (__x)
			ld  c, a
			ld  a, (__y)
			ld  b, a
			ld  iy, fsClipStruct
			call SPInvalidate			
	ret


	C_LINE	503,"engine/printer.h::invalidate_tile::0::7"

; Function invalidate_viewport flags 0x00000200 __smallc 
; void invalidate_viewport()
	C_LINE	503,"engine/printer.h::invalidate_viewport::0::7"
._invalidate_viewport
			; Invalidate Rectangle
			;
			; enter:  B = row coord top left corner
			;         C = col coord top left corner
			;         D = row coord bottom right corner
			;         E = col coord bottom right corner
			;        IY = clipping rectangle, set it to "ClipStruct" for full screen
			ld  b,  2 
			ld  c,  0 
			ld  d,  2 +19
			ld  e,  0 +29
			ld  iy, vpClipStruct
			call SPInvalidate
	ret


	C_LINE	524,"engine/printer.h::invalidate_viewport::0::8"

; Function draw_invalidate_coloured_tile_gamearea flags 0x00000200 __smallc 
; void draw_invalidate_coloured_tile_gamearea()
	C_LINE	524,"engine/printer.h::draw_invalidate_coloured_tile_gamearea::0::8"
._draw_invalidate_coloured_tile_gamearea
	call	_draw_coloured_tile_gamearea
	call	_invalidate_tile
	ret


	C_LINE	529,"engine/printer.h::draw_invalidate_coloured_tile_gamearea::0::9"

; Function draw_coloured_tile_gamearea flags 0x00000200 __smallc 
; void draw_coloured_tile_gamearea()
	C_LINE	529,"engine/printer.h::draw_coloured_tile_gamearea::0::9"
._draw_coloured_tile_gamearea
	ld	hl,(__x)
	ld	h,0
	add	hl,hl
	ld	a,l
	ld	(__x),a
	ld	hl,(__y)
	ld	h,0
	add	hl,hl
	inc	hl
	inc	hl
	ld	h,0
	ld	a,l
	ld	(__y),a
	call	_draw_coloured_tile
	ret


	C_LINE	545,"engine/printer.h::draw_coloured_tile_gamearea::0::10"

; Function print_number2 flags 0x00000200 __smallc 
; void print_number2()
	C_LINE	545,"engine/printer.h::print_number2::0::10"
._print_number2
	ld	hl,(__t)
	ld	h,0
	ld	de,10
	ex	de,hl
	call	l_div_u
	ld	bc,16
	add	hl,bc
	ld	a,l
	ld	(_rda),a
	ld	hl,(__t)
	ld	h,0
	ld	de,10
	ex	de,hl
	call	l_div_u
	ex	de,hl
	ld	bc,16
	add	hl,bc
	ld	h,0
	ld	a,l
	ld	(_rdb),a
			; enter:  A = row position (0..23)
			;         C = col position (0..31/63)
			;         D = pallette #
			;         E = graphic #
			ld  a, (_rda)
			ld  e, a
			ld  d, 7
			ld  a, (__x)
			ld  c, a
			ld  a, (__y)
			call SPPrintAtInv
			ld  a, (_rdb)
			ld  e, a
			ld  d, 7
			ld  a, (__x)
			inc a
			ld  c, a
			ld  a, (__y)
			call SPPrintAtInv
	ret


	C_LINE	668,"engine/printer.h::print_number2::0::11"

; Function print_str flags 0x00000200 __smallc 
; void print_str()
	C_LINE	668,"engine/printer.h::print_str::0::11"
._print_str
		ld  hl, (_gp_gen)
		.print_str_loop
			ld  a, (hl)
			or  a
			ret z 
			inc hl
			sub 32
			ld  e, a
			ld  a, (__t)
			ld  d, a
			ld  a, (__x)
			ld  c, a
			inc a
			ld  (__x), a
			ld  a, (__y)
			push hl
			call SPPrintAtInv
			pop  hl
			jr  print_str_loop
	ret


	C_LINE	701,"engine/printer.h::print_str::0::12"

; Function blackout_area flags 0x00000200 __smallc 
; void blackout_area()
	C_LINE	701,"engine/printer.h::blackout_area::0::12"
._blackout_area
			ld  de, 22528 + 32 *  2  +  0 
			ld  b, 20
		.bal1
			push bc
			ld  h, d 
			ld  l, e
			ld	(hl), 0
			inc de
			ld  bc, 29
			ldir
			inc de
			inc de
			pop bc
			djnz bal1
	ret


	C_LINE	722,"engine/printer.h::blackout_area::0::13"
	SECTION	data_compiler
._utaux
	defb	0
	SECTION	code_compiler
	C_LINE	723,"engine/printer.h::blackout_area::0::13"

; Function update_tile flags 0x00000200 __smallc 
; void update_tile()
	C_LINE	723,"engine/printer.h::update_tile::0::13"
._update_tile
		ld  a, (__x)
		ld  c, a
		ld  a, (__y)
		ld  b, a
		sla a 
		sla a 
		sla a 
		sla a 
		sub b
		add c
		ld  b, 0
		ld  c, a
		ld  hl, _map_attr
		add hl, bc
		ld  a, (__n)
		ld  (hl), a
		ld  hl, _map_buff
		add hl, bc
		ld  a, (__t)
		ld  (hl), a
		call _draw_coloured_tile_gamearea
		ld  a, (_is_rendering)
		or  a
		ret nz
		call _invalidate_tile
	ret


	C_LINE	762,"engine/printer.h::update_tile::0::14"

; Function print_message flags 0x00000200 __smallc 
; void print_message()
	C_LINE	762,"engine/printer.h::print_message::0::14"
._print_message
	ld	a,10
	ld	(__x),a
	ld	a,12
	ld	(__y),a
	ld	hl,87	;const
	ld	a,l
	ld	(__t),a
	call	_print_str
	ld	a,10
	ld	(__x),a
	ld	a,11
	ld	(__y),a
	ld	a,87
	ld	(__t),a
	ld	hl,(_spacer)
	ld	(_gp_gen),hl
	call	_print_str
	ld	a,10
	ld	(__x),a
	ld	a,13
	ld	(__y),a
	ld	a,87
	ld	(__t),a
	ld	hl,(_spacer)
	ld	(_gp_gen),hl
	call	_print_str
	call	sp_UpdateNow
	call	sp_WaitForNoKey
	ret


	C_LINE	91,"mk2.c::print_message::0::15"
	C_LINE	0,"engine/general.h::print_message::0::15"
	C_LINE	11,"engine/general.h::print_message::0::15"

; Function read_controller flags 0x00000200 __smallc 
; void read_controller()
	C_LINE	11,"engine/general.h::read_controller::0::15"
._read_controller
			ld  a, (_pad0)
			ld  (_pad_this_frame), a
			ld	hl, (_joyfunc)
			push hl
			ld	hl,_keys
			ex	(sp), hl
			call l_jphl
			pop	bc
			ld	a, l
			ld	(_pad0), a
			ld  hl, 0x017f
			push hl
			call sp_KeyPressed
			pop bc
			xor a
			or  l
			ld  a, (_pad0)
			jp  z, space_not_pressed
		.space_pressed
			and 0xbf
			jr  space_read_update_pad0
		.space_not_pressed
			or 0x40
		.space_read_update_pad0
			ld  (_pad0), a
			ld  c, a
			ld  a, (_pad_this_frame)
			xor c
			neg
			or  c
			or  0x30
			ld  (_pad_this_frame), a
	ret


	C_LINE	81,"engine/general.h::read_controller::0::16"

; Function button_pressed flags 0x00000200 __smallc 
; unsigned char button_pressed()
	C_LINE	81,"engine/general.h::button_pressed::0::16"
._button_pressed
	call	_read_controller
	ld	a,(_pad_this_frame)
	cp	255
	ld	hl,0	;const
	jr	z,ASMPC+3
	inc	hl
	ret


	C_LINE	85,"engine/general.h::button_pressed::0::17"

; Function step flags 0x00000200 __smallc 
; void step()
	C_LINE	85,"engine/general.h::step::0::17"
._step
		ld a, 16
		out (254), a
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		xor 16
		out (254), a
	ret


	C_LINE	105,"engine/general.h::step::0::18"

; Function cortina flags 0x00000200 __smallc 
; void cortina()
	C_LINE	105,"engine/general.h::cortina::0::18"
._cortina
		ld b, 7
	.fade_out_extern
		push bc
		ld   e, 3               ; 3 tercios
		ld   hl, 22528          ; aqu empiezan los atributos
	.fade_out_bucle
		ld   a, (hl )           ; nos traemos el atributo actual
		ld   d, a               ; tomar atributo
		and  7                  ; aislar la tinta
		jr   z, ink_done        ; si vale 0, no se decrementa
		dec  a                  ; decrementamos tinta
	.ink_done
		ld   b, a               ; en b tenemos ahora la tinta ya procesada.
		ld   a, d               ; tomar atributo
		and  56                 ; aislar el papel, sin modificar su posicin en el byte
		jr   z, paper_done      ; si vale 0, no se decrementa
		sub  8                  ; decrementamos papel restando 8
	.paper_done
		ld   c, a               ; en c tenemos ahora el papel ya procesado.
		ld   a, d
		and  192                ; nos quedamos con bits 6 y 7 ( 0x40  y  0x80 )
		or   c                  ; aadimos paper
		or   b                  ; e ink, con lo que recompuesto el atributo
		ld   (hl),a             ; lo escribimos,
		inc  l                  ; e incrementamos el puntero.
		jr   nz, fade_out_bucle ; continuamos hasta acabar el tercio (cuando L valga 0)
		inc  h                  ; siguiente tercio
		dec  e
		jr   nz, fade_out_bucle ; repetir las 3 veces
		pop bc
		djnz fade_out_extern
	ret


	C_LINE	151,"engine/general.h::cortina::0::19"

; Function addsign flags 0x00000200 __smallc 
; int addsign(int n, int value)
; parameter 'int value' at sp+2 size(2)
; parameter 'int n' at sp+4 size(2)
	C_LINE	151,"engine/general.h::addsign::0::19"
._addsign
	ld	hl,4	;const
	add	hl,sp
	call	l_gint	;
	ld	a,h
	or	l
	jr	nz,ASMPC+3
	scf
	jp	nc,i_18	;
	ld	hl,0	;const
	jp	i_19	;
.i_18
	ld	hl,4	;const
	add	hl,sp
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	ld	hl,0
	call	l_gt
	jp	nc,i_20	;
	pop	bc
	pop	hl
	push	hl
	push	bc
	jp	i_21	;
.i_20
	pop	bc
	pop	hl
	push	hl
	push	bc
	call	l_neg
.i_21
.i_19
	ret


	C_LINE	156,"engine/general.h::addsign::0::20"

; Function abs flags 0x00000200 __smallc 
; unsigned int abs(int n)
; parameter 'int n' at sp+2 size(2)
	C_LINE	156,"engine/general.h::abs::0::20"
._abs
	pop	bc
	pop	hl
	push	hl
	push	bc
	ld	a,h
	rla
	jp	nc,i_22	;
	pop	bc
	pop	hl
	push	hl
	push	bc
	call	l_neg
	ret


.i_22
	pop	bc
	pop	hl
	push	hl
	push	bc
	ret


.i_23
	ret


	C_LINE	163,"engine/general.h::abs::0::21"

; Function active_sleep flags 0x00000200 __smallc 
; void active_sleep(int espera)
; parameter 'int espera' at sp+2 size(2)
	C_LINE	163,"engine/general.h::active_sleep::0::21"
._active_sleep
.i_26
	ld	a,250
	ld	(_gpjt),a
.i_29
	ld	a,1
	ld	(_gpit),a
.i_27
	ld	hl,(_gpjt)
	ld	h,0
	dec	hl
	ld	a,l
	ld	(_gpjt),a
	ld	a,h
	or	l
	jp	nz,i_29	;EOS
.i_28
	call	_button_pressed
	ld	a,h
	or	l
	jp	nz,i_25	;EOS
.i_30
.i_24
	pop	de
	pop	hl
	dec	hl
	push	hl
	push	de
	ld	a,h
	or	l
	jp	nz,i_26	;EOS
.i_25
	ld	hl,0	;const
	push	hl
	call	sp_Border
	pop	bc
	ret


	C_LINE	179,"engine/general.h::active_sleep::0::24"

; Function select_joyfunc flags 0x00000200 __smallc 
; void select_joyfunc()
	C_LINE	179,"engine/general.h::select_joyfunc::0::24"
._select_joyfunc
			; Music generated by beepola
			call musicstart
.i_31
	call	sp_GetKey
	ld	a,l
	ld	hl,_gpit
	ld	(hl),a
	ld	a,48
	cp	(hl)
	jp	nc,i_34	;
	ld	a,(_gpit)
	cp	53
	jp	nc,i_34	;
	defc	i_34 = i_33
.i_35_i_34
	ld	hl,_joyfuncs
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	ld	bc,-49
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	ld	(_joyfunc),hl
	ld	a,(_gpit)
	cp	51
	jp	nc,i_36	;
	ld	hl,(_gpit)
	ld	h,0
	ld	bc,-49
	add	hl,bc
	ld	a,h
	or	l
	jp	z,i_37	;
	ld	hl,6	;const
	jp	i_38	;
.i_37
	ld	hl,0	;const
.i_38
	ld	a,l
	ld	(_gpjt),a
	ld	hl,_keys+8
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	ld	hl,_keys+6
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	ld	hl,_keys+4
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	ld	hl,_keys+2
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	ld	hl,_keys
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	ld	(_key_fire),hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,(_gpjt)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	ld	(_key_jump),hl
	jp	i_32	;EOS
	defc	i_36 = i_32
	defc	i_33 = i_31
.i_32
	ret


	C_LINE	93,"mk2.c::select_joyfunc::0::28"
	C_LINE	0,"my/extern.h::select_joyfunc::0::28"
	C_LINE	7,"my/extern.h::select_joyfunc::0::28"
	C_LINE	8,"my/extern.h::select_joyfunc::0::28"
	C_LINE	9,"my/extern.h::select_joyfunc::0::28"
	SECTION	data_compiler
._is_cutscene
	defb	0
	SECTION	code_compiler
	C_LINE	11,"my/extern.h::select_joyfunc::0::28"
	C_LINE	12,"my/extern.h::select_joyfunc::0::28"
	._textos_load
		BINARY "../bin/texts.bin"
	C_LINE	19,"my/extern.h::select_joyfunc::0::28"

; Function do_extern_action flags 0x00000200 __smallc 
; void do_extern_action(unsigned char n)
; parameter 'unsigned char n' at sp+2 size(1)
	C_LINE	19,"my/extern.h::do_extern_action::0::28"
._do_extern_action
	ld	hl,2	;const
	add	hl,sp
	ld	a,(hl)
	ld	hl,_gpt
	ld	(hl),a
	and	a
	jp	nz,i_40	;
	xor	a
	ld	(_exti),a
	jp	i_43	;EOS
.i_41
	ld	hl,_exti
	ld	a,(hl)
	inc	(hl)
.i_43
	ld	a,(_exti)
	sub	10
	jp	nc,i_42	;
	ld	hl,(_exti)
	ld	a,l
	ld	(_extx),a
	jp	i_46	;EOS
.i_44
	ld	hl,_extx
	ld	a,(hl)
	inc	(hl)
.i_46
	ld	hl,(_extx)
	ld	h,0
	push	hl
	ld	hl,(_exti)
	ld	h,0
	ld	de,30
	ex	de,hl
	and	a
	sbc	hl,de
	pop	de
	ex	de,hl
	and	a
	sbc	hl,de
	jp	nc,i_45	;
						ld  de, 0x4700
						ld  a, (_extx)
						add  0 
						ld  c, a
						ld  a, (_exti)
						add  2 
						call SPPrintAtInv
						ld  de, 0x4700
						ld  a, (_extx)
						add  0 
						ld  c, a
						ld  a, (_exti)
						ld  b, a
						ld  a,  2  + 19
						sub b
						call SPPrintAtInv
	ld	hl,(_extx)
	ld	h,0
	push	hl
	ld	hl,(_exti)
	ld	h,0
	ld	de,19
	ex	de,hl
	and	a
	sbc	hl,de
	pop	de
	ex	de,hl
	and	a
	sbc	hl,de
	jp	nc,i_47	;
							ld  de, 0x4700
							ld  a, (_exti)
							add  0 
							ld  c, a
							ld  a, (_extx)
							add  2 
							call SPPrintAtInv
							ld  de, 0x4700
							ld  a, (_exti)
							ld  b, a
							ld  a,  0  + 29
							sub b
							ld  c, a
							ld  a, (_extx)
							add  2 							
							call SPPrintAtInv
	jp	i_44	;EOS
	defc	i_47 = i_44
.i_45
	ld	hl,0	;const
	push	hl
	call	sp_UpdateNowEx
	pop	bc
	jp	i_41	;EOS
.i_42
	ret


.i_40
	ld	hl,2	;const
	add	hl,sp
	ld	a,(hl)
	sub	250
	jp	nc,i_49	;
	ld	a,1
	ld	(_stepbystep),a
	ld	hl,(_gpt)
	ld	h,0
	dec	hl
	add	hl,hl
	ld	(_asm_int),hl
		._extern_depack_text
				; First we get where to look for the packed string
				ld  hl, (_asm_int)
				ld  de, _textos_load
				add hl, de
				ld  a, (hl)
				inc hl
				ld  h, (hl)
				ld  l, a
				add hl, de
				ld de, _textbuff
				; 5-bit scaped depacker by na_th_an
				; Contains code by Antonio Villena
				ld  a, $80
		.fbsd_mainb
				call fbsd_unpackc
				ld  c, a
				ld  a, b
				and a
				jr  z, fbsd_fin
				call fbsd_stor
				ld  a, c
				jr  fbsd_mainb	
		.fbsd_stor
				cp  31
				jr  z, fbsd_escaped
				add a, 64
				jr  fbsd_stor2
		.fbsd_escaped
				ld  a, c
				call fbsd_unpackc
				ld  c, a
				ld  a, b
				add a, 32
		.fbsd_stor2
				ld  (de), a
				inc de
				ret
		.fbsd_unpackc
				ld  b, 0x08
		.fbsd_bucle
				call fbsd_getbit
				rl  b
				jr  nc, fbsd_bucle
				ret
		.fbsd_getbit
				add a, a
				ret nz
				ld  a, (hl)
				inc hl
				rla
				ret        
		.fbsd_fin
				ld (de), a	
				;
				;		
	ld	a,(_is_cutscene)
	and	a
	jp	nz,i_50	;
	ld	hl,(_textbuff)
	ld	h,0
	ld	bc,-64
	add	hl,bc
	ld	a,l
	ld	hl,_exti
	ld	(hl),a
	ld	l,(hl)
	ld	h,0
	inc	hl
	inc	hl
	inc	hl
	ex	de,hl
	ld	a,(_exti)
	add	e
	ld	(_extx),a
	ld	a,3
	ld	(__x),a
	ld	a,3
	ld	(__y),a
	ld	a,1
	ld	(__t),a
	ld	hl,i_1+13
	ld	(_gp_gen),hl
	call	_print_str
	ld	a,3
	ld	(__x),a
	ld	a,1
	ld	(__t),a
	ld	hl,i_1+40
	ld	(_gp_gen),hl
	ld	a,4
	ld	(__y),a
	jp	i_53	;EOS
.i_51
	ld	hl,(__y)
	ld	h,0
	inc	hl
	ld	a,l
	ld	(__y),a
.i_53
	ld	hl,(__y)
	ld	h,0
	ex	de,hl
	ld	hl,(_extx)
	ld	h,0
	ex	de,hl
	and	a
	sbc	hl,de
	jp	nc,i_52	;
	ld	hl,3	;const
	ld	a,l
	ld	(__x),a
	call	_print_str
	jp	i_51	;EOS
.i_52
	ld	a,3
	ld	(__x),a
	ld	a,(_extx)
	ld	(__y),a
	ld	a,1
	ld	(__t),a
	ld	hl,i_1+67
	ld	(_gp_gen),hl
	call	_print_str
	ld	a,4
	ld	(_exty),a
	jp	i_54	;EOS
.i_50
	ld	a,13
	ld	(_exty),a
.i_54
	ld	a,4
	ld	(_extx),a
	ld	hl,_textbuff+1
	ld	(_gp_gen),hl
	ld	a,1
	ld	(_keyp),a
.i_55
	ld	hl,(_gp_gen)
	inc	hl
	ld	(_gp_gen),hl
	dec	hl
	ld	l,(hl)
	ld	h,0
	ld	a,l
	ld	(_exti),a
	ld	a,h
	or	l
	jp	z,i_56	;
	ld	hl,(_exti)
	ld	h,0
	ld	de,37
	and	a
	sbc	hl,de
	jp	nz,i_57	;
	ld	a,4
	ld	(_extx),a
	ld	hl,(_exty)
	ld	h,0
	inc	hl
	inc	hl
	ld	a,l
	ld	(_exty),a
	jp	i_58	;EOS
.i_57
					ld  a, (_exti)
					sub 32
					ld  e, a
					ld  a, (_extx)
					ld  c, a
					ld  a, (_exty)
					ld  d, 71				
					call SPPrintAtInv
	ld	hl,(_extx)
	ld	h,0
	inc	hl
	ld	a,l
	ld	hl,_extx
	ld	(hl),a
	cp	28
	jp	nz,i_59	;
	ld	a,4
	ld	(_extx),a
	ld	hl,(_exty)
	ld	h,0
	inc	hl
	inc	hl
	ld	h,0
	ld	a,l
	ld	(_exty),a
.i_59
.i_58
	ld	a,(_stepbystep)
	and	a
	jp	z,i_60	;
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
	ld	hl,0	;const
	push	hl
	call	sp_UpdateNowEx
	pop	bc
.i_60
	call	_button_pressed
	ld	a,h
	or	l
	jp	z,i_61	;
	ld	a,(_keyp)
	and	a
	jp	nz,i_62	;
	xor	a
	ld	(_stepbystep),a
	jp	i_63	;EOS
	defc	i_62 = i_63
.i_61
	xor	a
	ld	(_keyp),a
	jp	i_55	;EOS
	defc	i_63 = i_55
.i_56
	ld	hl,0	;const
	push	hl
	call	sp_UpdateNowEx
	pop	bc
	call	sp_WaitForNoKey
.i_64
	call	_button_pressed
	ld	a,h
	or	l
	jp	nz,i_64	;EOS
.i_65
	ld	hl,5000	;const
	push	hl
	call	_active_sleep
	pop	bc
	ld	a,(_is_cutscene)
	and	a
	jp	z,i_66	;
	ld	a,11
	ld	(_exti),a
	jp	i_69	;EOS
.i_67
	ld	hl,_exti
	ld	a,(hl)
	inc	(hl)
.i_69
	ld	a,(_exti)
	sub	24
	jp	nc,i_68	;
	ld	a,3
	ld	(__x),a
	ld	a,(_exti)
	ld	(__y),a
	ld	a,71
	ld	(__t),a
	ld	hl,i_1+94
	ld	(_gp_gen),hl
	call	_print_str
	call	sp_UpdateNow
	jp	i_67	;EOS
	defc	i_68 = i_70
	defc	i_66 = i_70
.i_49
	ld	hl,2	;const
	add	hl,sp
	ld	a,(hl)
	cp	251
	jp	nz,i_71	;
	ld	hl,1	;const
	ld	a,l
	ld	(_is_cutscene),a
	call	sp_UpdateNow
	jp	i_72	;EOS
.i_71
	ld	hl,2	;const
	add	hl,sp
	ld	a,(hl)
	cp	250
	jp	nz,i_73	;
	ld	hl,0	;const
	ld	a,l
	ld	(_is_cutscene),a
.i_73
.i_72
.i_70
.i_48
	ret


	C_LINE	100,"mk2.c::do_extern_action::0::49"
	C_LINE	0,"my/msc.h::do_extern_action::0::49"
	C_LINE	12,"my/msc.h::do_extern_action::0::49"

; Function read_byte flags 0x00000200 __smallc 
; unsigned char read_byte()
	C_LINE	12,"my/msc.h::read_byte::0::49"
._read_byte
            ld  hl, (_script)
            ld  a, (hl)
            ld  (_safe_byte), a
            inc hl
            ld  (_script), hl
	ld	hl,(_safe_byte)
	ld	h,0
	ret


	C_LINE	36,"my/msc.h::read_byte::0::50"

; Function read_vbyte flags 0x00000200 __smallc 
; unsigned char read_vbyte()
	C_LINE	36,"my/msc.h::read_vbyte::0::50"
._read_vbyte
        call _read_byte
        ld  a, l
        and 128
        ret z
        ld  a, l
        and 127
        ld  c, a
        ld  b, 0
        ld  hl, _flags
        add hl, bc
        ld  l, (hl)
        ld  h, 0
        ret
	ret


	C_LINE	56,"my/msc.h::read_vbyte::0::51"

; Function readxy flags 0x00000200 __smallc 
; void readxy()
	C_LINE	56,"my/msc.h::readxy::0::51"
._readxy
	call	_read_vbyte
	ld	h,0
	ld	a,l
	ld	(_sc_x),a
	call	_read_vbyte
	ld	h,0
	ld	a,l
	ld	(_sc_y),a
	ret


	C_LINE	61,"my/msc.h::readxy::0::52"

; Function stop_player flags 0x00000200 __smallc 
; void stop_player()
	C_LINE	61,"my/msc.h::stop_player::0::52"
._stop_player
	ld	hl,0	;const
	ld	a,l
	ld	(_p_vy),a
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_p_vx),a
	ret


	C_LINE	65,"my/msc.h::stop_player::0::53"

; Function reloc_player flags 0x00000200 __smallc 
; void reloc_player()
	C_LINE	65,"my/msc.h::reloc_player::0::53"
._reloc_player
	call	_read_vbyte
	ld	h,l
	ld	l,0
	ld	(_p_x),hl
	call	_read_vbyte
	ld	h,l
	ld	l,0
	ld	(_p_y),hl
	call	_stop_player
	ret


	C_LINE	75,"my/msc.h::reloc_player::0::54"

; Function read_two_bytes_D_E flags 0x00000200 __smallc 
; void read_two_bytes_D_E()
	C_LINE	75,"my/msc.h::read_two_bytes_D_E::0::54"
._read_two_bytes_D_E
                ld  hl, (_script)
                ld  d, (hl)          
                inc hl
                ld  e, (hl)          
                inc hl
                ld  (_script), hl
	ret


	C_LINE	100,"my/msc.h::read_two_bytes_D_E::0::55"
	C_LINE	101,"my/msc.h::read_two_bytes_D_E::0::55"

; Function run_script flags 0x00000200 __smallc 
; void run_script(unsigned char whichs)
; parameter 'unsigned char whichs' at sp+2 size(1)
	C_LINE	101,"my/msc.h::run_script::0::55"
._run_script
	ld	de,(_main_script_offset)
	ld	hl,2	;const
	add	hl,sp
	ld	l,(hl)
	ld	h,0
	add	hl,de
	ex	de,hl
	ld	hl,2	;const
	add	hl,sp
	ld	l,(hl)
	ld	h,0
	add	hl,de
	ld	(_asm_int),hl
        ld hl, (_asm_int)
        ld a, (hl)
        inc hl
        ld h, (hl)
        ld l, a
        ld  (_script), hl
	ld	hl,(_script)
	ld	de,0	;const
	call	l_eq
	jp	nc,i_74	;
	ret


.i_74
	ld	de,(_script)
	ld	hl,(_main_script_offset)
	add	hl,de
	ld	(_script),hl
.i_75
	call	_read_byte
	ld	h,0
	ld	a,l
	ld	(_sc_c),a
	ld	a,l
	cp	255
	jp	z,i_76	;
	ld	de,(_script)
	ld	hl,(_sc_c)
	ld	h,0
	add	hl,de
	ld	(_next_script),hl
	ld	hl,0	;const
	ld	a,l
	ld	(_sc_continuar),a
	ld	h,0
	ld	a,l
	ld	(_sc_terminado),a
.i_77
	ld	a,(_sc_terminado)
	and	a
	jp	nz,i_78	;
	call	_read_byte
.i_81
	ld	a,l
	cp	+(16% 256)
	jp	z,i_82	;
	cp	+(240% 256)
	jp	z,i_83	;
	cp	+(255% 256)
	jp	z,i_84	;
	jp	i_80	;EOS
.i_82
                            call _read_two_bytes_D_E
                            ld  b, 0
                            ld  c, d
                            ld  hl, _flags
                            add hl, bc
                            ld  a, (hl)
                            cp  e
                            jr  z, _flag_equal_val_ok
                            ld  a, 1
                            ld  (_sc_terminado), a
                        ._flag_equal_val_ok
	jp	i_80	;EOS
	defc	i_83 = i_80
.i_84
	ld	a,1
	ld	(_sc_terminado),a
	ld	a,1
	ld	(_sc_continuar),a
	jp	i_77	;EOS
	defc	i_80 = i_77
.i_78
	ld	a,(_sc_continuar)
	and	a
	jp	z,i_85	;
	xor	a
	ld	(_sc_terminado),a
.i_86
	ld	a,(_sc_terminado)
	and	a
	jp	nz,i_87	;
	call	_read_byte
.i_90
	ld	a,l
	cp	+(1% 256)
	jp	z,i_91	;
	cp	+(16% 256)
	jp	z,i_92	;
	cp	+(104% 256)
	jp	z,i_93	;
	cp	+(109% 256)
	jp	z,i_94	;
	cp	+(110% 256)
	jp	z,i_95	;
	cp	+(112% 256)
	jp	z,i_100	;
	cp	+(115% 256)
	jp	z,i_101	;
	cp	+(131% 256)
	jp	z,i_102	;
	cp	+(132% 256)
	jp	z,i_104	;
	cp	+(224% 256)
	jp	z,i_108	;
	cp	+(228% 256)
	jp	z,i_109	;
	cp	+(241% 256)
	jp	z,i_110	;
	cp	+(244% 256)
	jp	z,i_111	;
	cp	+(255% 256)
	jp	z,i_114	;
	jp	i_89	;EOS
.i_91
                                call _readxy
                                ld  de, (_sc_x)
                                ld  d, 0
                                ld  hl, _flags
                                add hl, de
                                ld  a, (_sc_y)
                                ld  (hl), a
	jp	i_89	;EOS
.i_92
                                call _readxy
                                ld  de, (_sc_x)
                                ld  d, 0
                                ld  hl, _flags
                                add hl, de
                                ld  c, (hl)
                                ld  a, (_sc_y)
                                add c
                                ld  (hl), a
	jp	i_89	;EOS
.i_93
	call	_reloc_player
	jp	i_89	;EOS
.i_94
	call	_read_vbyte
	ld	a,l
	ld	(_n_pant),a
	ld	hl,99	;const
	ld	a,l
	ld	(_o_pant),a
	call	_reloc_player
	ret


.i_95
	ld	hl,0	;const
	ld	a,l
	ld	(_sc_y),a
	ld	a,l
	ld	(_sc_x),a
	xor	a
	ld	(_sc_c),a
	jp	i_98	;EOS
.i_96
	ld	hl,_sc_c
	ld	a,(hl)
	inc	(hl)
.i_98
	ld	a,(_sc_c)
	sub	150
	jp	nc,i_97	;
	ld	a,(_sc_x)
	ld	(__x),a
	ld	a,(_sc_y)
	ld	(__y),a
	ld	de,_map_attr
	ld	hl,(_sc_c)
	ld	h,0
	add	hl,de
	ld	a,(hl)
	ld	(__n),a
	ld	de,_map_buff
	ld	hl,(_sc_c)
	ld	h,0
	add	hl,de
	ld	l,(hl)
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_update_tile
	ld	hl,_sc_x
	ld	a,(hl)
	inc	(hl)
	ld	a,(_sc_x)
	cp	15
	jp	nz,i_99	;
	xor	a
	ld	(_sc_x),a
	ld	hl,_sc_y
	ld	a,(hl)
	inc	(hl)
	jp	i_96	;EOS
	defc	i_99 = i_96
	defc	i_97 = i_89
.i_100
	ld	hl,_ctimer+1
	push	hl
	call	_read_vbyte
	pop	de
	ld	a,l
	ld	(de),a
	ld	hl,_ctimer+2
	push	hl
	call	_read_vbyte
	pop	de
	ld	a,l
	ld	(de),a
	ld	hl,_ctimer+3
	push	hl
	ld	hl,_ctimer+4
	ld	(hl),0
	ld	a,(hl)
	pop	de
	ld	(de),a
	jp	i_89	;EOS
.i_101
	xor	a
	ld	(_do_respawn),a
	ld	a,99
	ld	(_o_pant),a
	ld	a,1
	ld	(_sc_terminado),a
	ld	hl,1	;const
	ld	a,l
	ld	(_no_draw),a
	ret


.i_102
	ld	hl,(_enoffs)
	ld	h,0
	push	hl
	call	_read_vbyte
	pop	de
	add	hl,de
	ld	a,l
	ld	(_sc_n),a
	ld	hl,_baddies
	push	hl
	ld	hl,(_sc_n)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	a,h
	or	l
	jp	z,i_103	;
	ld	hl,_baddies
	push	hl
	ld	hl,(_sc_n)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	push	hl
	ld	a,(hl)
	and	128
	ld	l,a
	pop	de
	ld	(de),a
	ld	hl,_baddies
	push	hl
	ld	hl,(_sc_n)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	push	hl
	call	l_gchar
	push	hl
	call	_read_vbyte
	pop	de
	call	l_or
	ld	a,l
	pop	de
	ld	(de),a
	jp	i_89	;EOS
	defc	i_103 = i_89
.i_104
	xor	a
	ld	(_sc_n),a
	jp	i_107	;EOS
.i_105
	ld	hl,_sc_n
	ld	a,(hl)
	inc	(hl)
.i_107
	ld	a,(_sc_n)
	sub	3
	jp	nc,i_106	;
	ld	hl,_enoffs
	ld	a,(_sc_n)
	add	(hl)
	ld	(_enoffsmasi),a
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	push	hl
	ld	de,_enemy_backup
	ld	hl,(_enoffsmasi)
	ld	h,0
	add	hl,de
	ld	l,(hl)
	ld	a,l
	rla
	sbc	a
	ld	h,a
	pop	de
	ld	a,l
	ld	(de),a
	ld	de,_en_an_base_frame
	ld	hl,(_sc_n)
	ld	h,0
	add	hl,de
	push	hl
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	call	l_gchar
	ld	a,l
	and	3
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	ld	a,l
	ld	(de),a
	jp	i_105	;EOS
	defc	i_106 = i_89
.i_108
	call	_read_vbyte
	push	hl
	call	_beep_fx
	pop	bc
	jp	i_89	;EOS
.i_109
	call	_read_byte
	push	hl
	call	_do_extern_action
	pop	bc
	jp	i_89	;EOS
.i_110
	ld	hl,1	;const
	ld	a,l
	ld	(_script_result),a
	ret


.i_111
.i_112
	call	_read_byte
	ld	h,0
	ld	a,l
	ld	(_sc_x),a
	ld	de,255
	call	l_ne
	jp	nc,i_113	;
	call	_read_byte
	ld	a,l
	ld	(_sc_n),a
	ld	hl,(_sc_x)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(__x),a
	ld	hl,(_sc_x)
	ld	h,0
	ld	a,15
	and	l
	ld	l,a
	ld	a,l
	ld	(__y),a
	ld	de,_behs
	ld	hl,(_sc_n)
	ld	h,0
	add	hl,de
	ld	a,(hl)
	ld	(__n),a
	ld	hl,(_sc_n)
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_update_tile
	jp	i_112	;EOS
	defc	i_113 = i_89
.i_114
	ld	a,1
	ld	(_sc_terminado),a
	jp	i_86	;EOS
	defc	i_89 = i_86
.i_87
.i_85
	ld	hl,(_next_script)
	ld	(_script),hl
	jp	i_75	;EOS
.i_76
	ret


	C_LINE	103,"mk2.c::run_script::0::67"
	C_LINE	0,"engine/scripting.h::run_script::0::67"
	C_LINE	2,"engine/scripting.h::run_script::0::67"

; Function run_entering_script flags 0x00000200 __smallc 
; void run_entering_script()
	C_LINE	2,"engine/scripting.h::run_entering_script::0::67"
._run_entering_script
	ld	hl,19	;const
	push	hl
	call	_run_script
	pop	bc
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_n_pant)
	ld	h,0
	add	hl,de
	push	hl
	call	_run_script
	pop	bc
	ret


	C_LINE	50,"engine/scripting.h::run_entering_script::0::69"

; Function run_fire_script flags 0x00000200 __smallc 
; void run_fire_script()
	C_LINE	50,"engine/scripting.h::run_fire_script::0::69"
._run_fire_script
	ld	hl,20	;const
	push	hl
	call	_run_script
	pop	bc
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_n_pant)
	ld	h,0
	add	hl,de
	inc	hl
	push	hl
	call	_run_script
	pop	bc
	ret


	C_LINE	55,"engine/scripting.h::run_fire_script::0::70"

; Function do_ingame_scripting flags 0x00000200 __smallc 
; void do_ingame_scripting()
	C_LINE	55,"engine/scripting.h::do_ingame_scripting::0::70"
._do_ingame_scripting
	ld	hl,(_pad0)
	ld	h,0
	ld	a,128
	and	l
	ld	l,a
	jr	nz,ASMPC+3
	scf
	jp	nc,i_115	;
	ld	a,(_action_pressed)
	and	a
	jp	nz,i_116	;
	ld	hl,1	;const
	ld	a,l
	ld	(_action_pressed),a
	call	_run_fire_script
	jp	i_117	;EOS
	defc	i_116 = i_117
.i_115
	xor	a
	ld	(_action_pressed),a
	ld	a,(_f_zone_ac)
	and	a
	jp	z,i_118	;
	ld	hl,(_gpx)
	ld	h,0
	ex	de,hl
	ld	hl,(_fzx1)
	ld	h,0
	call	l_uge
	jp	nc,i_120	;
	ld	hl,(_gpx)
	ld	h,0
	ex	de,hl
	ld	hl,(_fzx2)
	ld	h,0
	and	a
	sbc	hl,de
	ccf
	jp	nc,i_120	;
	ld	hl,(_gpy)
	ld	h,0
	ex	de,hl
	ld	hl,(_fzy1)
	ld	h,0
	call	l_uge
	jp	nc,i_120	;
	ld	hl,(_gpy)
	ld	h,0
	ex	de,hl
	ld	hl,(_fzy2)
	ld	h,0
	and	a
	sbc	hl,de
	ccf
	jp	nc,i_120	;
	defc	i_120 = i_119
.i_121_i_120
	call	_run_fire_script
.i_119
.i_118
.i_117
	ret


	C_LINE	107,"mk2.c::do_ingame_scripting::0::76"
	C_LINE	0,"engine/frames.h::do_ingame_scripting::0::76"
	C_LINE	37,"engine/frames.h::do_ingame_scripting::0::76"
	SECTION	data_compiler
._player_frames
	defw	_sprite_5_a + 0
	defw	_sprite_6_a + 0
	defw	_sprite_7_a + 0
	defw	_sprite_6_a + 0
	defw	_sprite_1_a + 0
	defw	_sprite_2_a + 0
	defw	_sprite_3_a + 0
	defw	_sprite_2_a + 0
	defw	_sprite_8_a + 0
	defw	_sprite_4_a + 0
	SECTION	code_compiler
	C_LINE	45,"engine/frames.h::do_ingame_scripting::0::76"
	SECTION	data_compiler
._enem_frames
	defw	_sprite_9_a + 0
	defw	_sprite_10_a + 0
	defw	_sprite_11_a + 0
	defw	_sprite_12_a + 0
	defw	_sprite_13_a + 0
	defw	_sprite_14_a + 0
	defw	_sprite_15_a + 0
	defw	_sprite_16_a + 0
	SECTION	code_compiler
	C_LINE	111,"mk2.c::do_ingame_scripting::0::76"
	C_LINE	0,"engine/collision.h::do_ingame_scripting::0::76"
	C_LINE	7,"engine/collision.h::do_ingame_scripting::0::76"

; Function collide_pixel flags 0x00000200 __smallc 
; unsigned char collide_pixel()
	C_LINE	7,"engine/collision.h::collide_pixel::0::76"
._collide_pixel
			ld  hl, 0
			ld  a, (_cx2)
			inc a
			ld  c, a
			ld  a, (_cx1)
			cp  c 
			jr  c, _collide_pixel_return
			ld  a, (_cx1)
			ld  c, a
			ld  a, (_cx2)
			add 14
			cp  c
			jr  c, _collide_pixel_return
			ld  a, (_cy2)
			inc a
			ld  c, a
			ld  a, (_cy1)
			cp  c 
			jr  c, _collide_pixel_return
			ld  a, (_cy1)
			ld  c, a
			ld  a, (_cy2)
			add 14
			cp  c
			jr  c, _collide_pixel_return
			ld  l, 1
		._collide_pixel_return
			ret
	ret


	C_LINE	52,"engine/collision.h::collide_pixel::0::77"

; Function cm_two_points flags 0x00000200 __smallc 
; unsigned char cm_two_points()
	C_LINE	52,"engine/collision.h::cm_two_points::0::77"
._cm_two_points
			ld  a, (_cx1)
			cp  15
			jr  nc, _cm_two_points_at1_reset
			ld  a, (_cy1)
			cp  10
			jr  c, _cm_two_points_at1_do
		._cm_two_points_at1_reset
			xor a
			jr  _cm_two_points_at1_done
		._cm_two_points_at1_do
			ld  a, (_cy1)
			ld  b, a
			sla a
			sla a
			sla a
			sla a
			sub b
			ld  b, a
			ld  a, (_cx1)
			add b
			ld  e, a
			ld  d, 0
			ld  hl, _map_attr
			add hl, de
			ld  a, (hl)
		._cm_two_points_at1_done
			ld (_at1), a
			ld  a, (_cx2)
			cp  15
			jr  nc, _cm_two_points_at2_reset
			ld  a, (_cy2)
			cp  10
			jr  c, _cm_two_points_at2_do
		._cm_two_points_at2_reset
			xor a
			jr  _cm_two_points_at2_done
		._cm_two_points_at2_do
			ld  a, (_cy2)
			ld  b, a
			sla a
			sla a
			sla a
			sla a
			sub b
			ld  b, a
			ld  a, (_cx2)
			add b
			ld  e, a
			ld  d, 0
			ld  hl, _map_attr
			add hl, de
			ld  a, (hl)
		._cm_two_points_at2_done
			ld (_at2), a
	ret


	C_LINE	127,"engine/collision.h::cm_two_points::0::78"

; Function attr flags 0x00000200 __smallc 
; unsigned char attr()
	C_LINE	127,"engine/collision.h::attr::0::78"
._attr
			ld  a, (_cx1)
			cp  15
			jr  nc, _attr_reset
			ld  a, (_cy1)
			cp  10
			jr  c, _attr_do
		._attr_reset
			ld  hl, 0
			ret
		._attr_do
			ld  a, (_cy1)
			ld  b, a
			sla a
			sla a
			sla a
			sla a
			sub b
			ld  b, a
			ld  a, (_cx1)
			add b
			ld  e, a
			ld  d, 0
			ld  hl, _map_attr
			add hl, de
			ld  a, (hl)
			ld  h, 0
			ld  l, a
			ret
	ret


	C_LINE	169,"engine/collision.h::attr::0::79"

; Function qtile flags 0x00000200 __smallc 
; unsigned char qtile()
	C_LINE	169,"engine/collision.h::qtile::0::79"
._qtile
			ld  a, (_cx1)
			cp  15
			jr  nc, _qtile_reset
			ld  a, (_cy1)
			cp  10
			jr  c, _qtile_do
		._qtile_reset
			ld  hl, 0
			ret
		._qtile_do
			ld  a, (_cy1)
			ld  b, a
			sla a
			sla a
			sla a
			sla a
			sub b
			ld  b, a
			ld  a, (_cx1)
			add b
			ld  e, a
			ld  d, 0
			ld  hl, _map_buff
			add hl, de
			ld  a, (hl)
			ld  h, 0
			ld  l, a
			ret
	ret


	C_LINE	121,"mk2.c::qtile::0::80"
	C_LINE	0,"engine/random.h::qtile::0::80"
	C_LINE	7,"engine/random.h::qtile::0::80"
	C_LINE	8,"engine/random.h::qtile::0::80"
	C_LINE	9,"engine/random.h::qtile::0::80"
	C_LINE	10,"engine/random.h::qtile::0::80"
	._seed1 defw 0
	._seed2 defw 0
	._randres defb 0
	C_LINE	18,"engine/random.h::qtile::0::80"

; Function rand flags 0x00000200 __smallc 
; unsigned char rand()
	C_LINE	18,"engine/random.h::rand::0::80"
._rand
		.rnd 
			ld  hl,0xA280
	        ld  de,0xC0DE
	        ld  a,h         ; t = x ^ (x << 1)
	        add a,a
	        xor h
	        ld  h,l         ; x = y
	        ld  l,d         ; y = z
	        ld  d,e         ; z = w
	        ld  e,a
	        rra             ; t = t ^ (t >> 1)
	        xor e
	        ld  e,a
	        ld  a,d         ; w = w ^ ( w << 3 ) ^ t
	        add a,a
	        add a,a
	        add a,a
	        xor d
	        xor e
	        ld  e,a
	        ld  (rnd+1),hl
	        ld  (rnd+4),de
	        ld	(_randres), a
	ld	hl,(_randres)
	ld	h,0
	ret


	C_LINE	49,"engine/random.h::rand::0::81"

; Function srand flags 0x00000200 __smallc 
; void srand()
	C_LINE	49,"engine/random.h::srand::0::81"
._srand
			ld	hl, (_seed1)
			ld	(rnd+1),hl
			ld	hl, (_seed2)			
			ld	(rnd+4),hl
	ret


	C_LINE	124,"mk2.c::srand::0::82"
	C_LINE	0,"engine/messages.h::srand::0::82"
	C_LINE	9,"engine/messages.h::srand::0::82"
	C_LINE	12,"engine/messages.h::srand::0::82"

; Function game_ending flags 0x00000200 __smallc 
; void game_ending()
	C_LINE	12,"engine/messages.h::game_ending::0::82"
._game_ending
	call	sp_UpdateNow
	ld	hl,_s_ending
	push	hl
	ld	hl,16384	;const
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	ld	a,4
	ld	(_bs),a
.i_126
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
	ld	hl,3	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_124
	ld	hl,(_bs)
	ld	h,0
	dec	hl
	ld	a,l
	ld	(_bs),a
	ld	a,h
	or	l
	jp	nz,i_126	;EOS
.i_125
	ld	hl,6	;const
	push	hl
	call	_beep_fx
	pop	bc
	ret


	C_LINE	31,"engine/messages.h::game_ending::0::84"

; Function game_over flags 0x00000200 __smallc 
; void game_over()
	C_LINE	31,"engine/messages.h::game_over::0::84"
._game_over
	ld	a,30
	ld	(__x),a
	ld	a,8
	ld	(__y),a
	ld	hl,(_p_life)
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_print_number2
	ld	hl,i_1+121
	ld	(_gp_gen),hl
	call	_print_message
	ld	a,4
	ld	(_bs),a
.i_129
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
	ld	hl,3	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_127
	ld	hl,(_bs)
	ld	h,0
	dec	hl
	ld	a,l
	ld	(_bs),a
	ld	a,h
	or	l
	jp	nz,i_129	;EOS
.i_128
	ld	hl,10	;const
	push	hl
	call	_beep_fx
	pop	bc
	ret


	C_LINE	127,"mk2.c::game_over::0::86"
	C_LINE	0,"engine/inits.h::game_over::0::86"
	C_LINE	29,"engine/inits.h::game_over::0::86"

; Function init_baddies flags 0x00000200 __smallc 
; void init_baddies()
	C_LINE	29,"engine/inits.h::init_baddies::0::86"
._init_baddies
	xor	a
	ld	(_gpit),a
.i_130
	ld	a,(_gpit)
	sub	27
	jp	nc,i_131	;
	ld	hl,_baddies
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	push	hl
	ld	hl,_baddies
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	ld	a,(hl)
	and	127
	ld	l,a
	pop	de
	ld	(de),a
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
	jp	i_130	;EOS
.i_131
	ret


	C_LINE	44,"engine/inits.h::init_baddies::0::88"

; Function init_hotspots flags 0x00000200 __smallc 
; void init_hotspots()
	C_LINE	44,"engine/inits.h::init_hotspots::0::88"
._init_hotspots
	xor	a
	ld	(_gpit),a
.i_132
	ld	a,(_gpit)
	sub	9
	jp	nc,i_133	;
	ld	hl,_hotspots
	push	hl
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,bc
	add	hl,bc
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	(hl),1
	jp	i_132	;EOS
.i_133
	ret


	C_LINE	54,"engine/inits.h::init_hotspots::0::90"

; Function backup_baddies flags 0x00000200 __smallc 
; void backup_baddies()
	C_LINE	54,"engine/inits.h::backup_baddies::0::90"
._backup_baddies
	xor	a
	ld	(_gpit),a
	jp	i_136	;EOS
.i_134
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
.i_136
	ld	a,(_gpit)
	sub	27
	jp	nc,i_135	;
	ld	de,_enemy_backup
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	push	hl
	ld	hl,_baddies
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	call	l_gchar
	pop	de
	ld	a,l
	ld	(de),a
	jp	i_134	;EOS
.i_135
	ret


	C_LINE	157,"mk2.c::backup_baddies::0::92"
	C_LINE	0,"engine/hitter_asm.h::backup_baddies::0::92"
	C_LINE	15,"engine/hitter_asm.h::backup_baddies::0::92"
	SECTION	data_compiler
._hoffs_x
	defb	8
	defb	10
	defb	12
	defb	14
	defb	15
	defb	15
	defb	14
	defb	13
	defb	10
	SECTION	code_compiler
	C_LINE	16,"engine/hitter_asm.h::backup_baddies::0::92"
	SECTION	data_compiler
._hoffs_y
	defb	2
	defb	2
	defb	2
	defb	3
	defb	4
	defb	4
	defb	5
	defb	6
	defb	7
	SECTION	code_compiler
	C_LINE	27,"engine/hitter_asm.h::backup_baddies::0::92"

; Function hitter_render flags 0x00000200 __smallc 
; void hitter_render()
	C_LINE	27,"engine/hitter_asm.h::hitter_render::0::92"
._hitter_render
				ld  de, (_hitter_frame)
				ld  d, 0
				ld  hl, _hoffs_y
				add hl, de
				ld  b, (hl) 			; B = hoffs_y [hitter_frame]
				ld  hl, _hoffs_x
				add hl, de
				ld  c, (hl) 			; C = hoffs_x [hitter_frame]
				ld  a, (_p_up)
				or  a
				jr  z, _hitter_side
			._hitter_up
				ld  a, (_gpx)
				add b
				ld  (_hitter_x), a 		; hitter_x = gpx + hoffs_y [hitter_frame]
				ld  a, (_gpy)
				add 6
				sub c
				ld  (_hitter_y), a 		; hitter_y = gpy + 6 - hoffs_x [hitter_frame]
				ld  hl, _sprite_sword_u
				ld  (_hitter_n_f), hl
				jp  _hitter_render_facing_done
			._hitter_side
				ld  a, (_gpy)
				add b
				ld  (_hitter_y), a 		; hitter_y = gpy + hoffs_y [hitter_frame]
				ld  a, (_p_facing)
				or  a
				jr  z, _hitter_render_facing_left
			._hitter_render_facing_right
				ld  a, (_gpx)
				add c
				ld  (_hitter_x), a 		; hitter_x = gpx + hoffs_x [hitter_frame]
				ld  hl, _sprite_sword_r
				ld  (_hitter_n_f), hl
				jr _hitter_render_facing_done
			._hitter_render_facing_left
				ld  a, (_gpx)
				add 8
				sub c
				ld  (_hitter_x), a 		; hitter_x = gpx + 8 - hoffs_x [hitter_frame]
				ld  hl, _sprite_sword_l
				ld  (_hitter_n_f), hl
			._hitter_render_facing_done
		; enter: IX = sprite structure address 
		;        IY = clipping rectangle, set it to "ClipStruct" for full screen 
		;        BC = animate bitdef displacement (0 for no animation) 
		;         H = new row coord in chars 
		;         L = new col coord in chars 
		;         D = new horizontal rotation (0..7) ie horizontal pixel position 
		;         E = new vertical rotation (0..7) ie vertical pixel position 
		ld  ix, (_sp_hitter)
		ld  iy, vpClipStruct
		ld  hl, (_hitter_n_f)
		ld  de, (_hitter_c_f)
		or  a
		sbc hl, de
		ld  b, h
		ld  c, l
		ld  a, (_hitter_y)
		srl a 
		srl a 
		srl a 
		add  2 
		ld  h, a
		ld  a, (_hitter_x)
		srl a 
		srl a 
		srl a 
		add  0 
		ld  l, a
		ld  a, (_hitter_x)
		and 7
		ld  d, a
		ld  a, (_hitter_y)
		and 7
		ld  e, a
		call SPMoveSprAbs
		ld  hl, (_hitter_n_f)
		ld  (_hitter_c_f), hl
	ld	hl,_hitter_frame
	ld	a,(hl)
	inc	(hl)
	ld	a,(_hitter_frame)
	cp	9
	jp	nz,i_139	;
	ld	hl,0	;const
	ld	a,l
	ld	(_hitter_on),a
			ld  ix, (_sp_hitter)
			ld  iy, vpClipStruct
			ld  bc, 0
			ld  hl, 0xfefe
			ld  de, 0
			call SPMoveSprAbs
	ld	hl,0	;const
	ld	a,l
	ld	(_p_hitting),a
.i_139
	ret


	C_LINE	161,"mk2.c::hitter_render::0::94"
	C_LINE	0,"engine/blocks.h::hitter_render::0::94"
	C_LINE	175,"mk2.c::hitter_render::0::94"
	C_LINE	0,"engine/player.h::hitter_render::0::94"
	C_LINE	25,"engine/player.h::hitter_render::0::94"

; Function player_init flags 0x00000200 __smallc 
; void player_init()
	C_LINE	25,"engine/player.h::player_init::0::94"
._player_init
	ld	a,112
	ld	(_gpx),a
	ld	a,128
	ld	(_gpy),a
	ld	hl,(_gpx)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	ld	(_p_x),hl
	ld	hl,(_gpy)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	ld	(_p_y),hl
	xor	a
	ld	(_p_vy),a
	ld	(_p_vx),a
	ld	a,1
	ld	(_p_jmp_ct),a
	xor	a
	ld	(_p_jmp_on),a
	ld	(_p_frame),a
	xor	a
	ld	(_p_subframe),a
	ld	a,1
	ld	(_p_facing),a
	ld	hl,255	;const
	ld	a,l
	ld	(_p_facing_h),a
	ld	a,l
	ld	(_p_facing_v),a
	xor	a
	ld	(_p_state),a
	ld	(_p_state_ct),a
	ld	a,3
	ld	(_p_life),a
	xor	a
	ld	(_p_objs),a
	ld	(_p_keys),a
	ld	hl,_flags+2
	ld	(hl),0
	xor	a
	ld	(_p_disparando),a
	ld	(_p_hitting),a
	xor	a
	ld	(_hitter_on),a
	ld	hl,0	;const
	ld	(_ctimer+3),hl
	ld	hl,_ctimer+2
	ld	(hl),32
	ld	hl,_ctimer+1
	ld	(hl),99
	ld	hl,_ctimer
	ld	(hl),1
	ld	l,(hl)
	ld	h,0
	ret


	C_LINE	146,"engine/player.h::player_init::0::95"

; Function player_calc_bounding_box flags 0x00000200 __smallc 
; void player_calc_bounding_box()
	C_LINE	146,"engine/player.h::player_calc_bounding_box::0::95"
._player_calc_bounding_box
			ld  a, (_gpx)
			add 4
			srl a
			srl a
			srl a
			srl a
			ld  (_ptx1), a
			ld  a, (_gpx)
			add 11
			srl a
			srl a
			srl a
			srl a
			ld  (_ptx2), a
			ld  a, (_gpy)
			add 8
			srl a
			srl a
			srl a
			srl a
			ld  (_pty1), a
			ld  a, (_gpy)
			add 15
			srl a
			srl a
			srl a
			srl a
			ld  (_pty2), a
	ret


	C_LINE	276,"engine/player.h::player_calc_bounding_box::0::96"

; Function player_kill flags 0x00000200 __smallc 
; void player_kill()
	C_LINE	276,"engine/player.h::player_kill::0::96"
._player_kill
	ld	hl,_p_life
	ld	a,(hl)
	dec	(hl)
	ld	hl,(_p_killme)
	ld	h,0
	push	hl
	call	_beep_fx
	pop	bc
	ld	a,2
	ld	(_p_state),a
	ld	a,50
	ld	(_p_state_ct),a
	ld	a,99
	ld	(_o_pant),a
	ld	hl,0	;const
	push	hl
	call	_hide_sprites
	pop	bc
	ret


	C_LINE	375,"engine/player.h::player_kill::0::97"

; Function player_move flags 0x00000200 __smallc 
; unsigned char player_move()
	C_LINE	375,"engine/player.h::player_move::0::97"
._player_move
	ld	hl,0	;const
	ld	a,l
	ld	(_wall_h),a
	ld	h,0
	ld	a,l
	ld	(_wall_v),a
	C_LINE	0,"./engine/playermods/va.h::player_move::1::98"
	C_LINE	0,"./engine/playermods/va_gravity_asm.h::player_move::1::98"
			ld  a, (_do_gravity)
			or  a
			jr  z, _player_gravity_done
			; Signed comparisons are hard
			; p_vy <=  127  -  12 
			; We are going to take a shortcut.
			; If p_vy < 0, just add  12 .
			; If p_vy > 0, we can use unsigned comparition anyway.
			ld  a, (_p_vy)
			bit 7, a
			jr  nz, _player_gravity_add 	; < 0
			cp   127  -  12 
			jr  nc, _player_gravity_maximum
		._player_gravity_add
			add  12 
			jr  _player_gravity_vy_set
		._player_gravity_maximum
			ld  a,  127 
		._player_gravity_vy_set
			ld  (_p_vy), a
		._player_gravity_done
			ld  a, (_p_gotten)
			or  a
			jr  z, _player_gravity_p_gotten_done
			xor a
			ld  (_p_vy), a
		._player_gravity_p_gotten_done
	C_LINE	8,"./engine/playermods/va.h::player_move::1::98"
	ld	hl,(_p_y)
	push	hl
	ld	hl,_p_vy
	call	l_gchar
	pop	de
	add	hl,de
	ld	(_p_y),hl
	ld	a,h
	rla
	jp	nc,i_140	;
	ld	hl,0	;const
	ld	(_p_y),hl
.i_140
	ld	hl,(_p_y)
	ld	de,2304
	ex	de,hl
	call	l_gt
	jp	nc,i_141	;
	ld	hl,2304	;const
	ld	(_p_y),hl
.i_141
	ld	hl,(_p_y)
	ld	de,4
	call	l_asr_hl_by_e
	ld	h,0
	ld	a,l
	ld	(_gpy),a
	C_LINE	0,"./engine/playermods/va_collision_asm.h::player_move::1::98"
		call _player_calc_bounding_box
		xor a 
		ld  (_hit_v), a
		ld  a, (_ptx1)
		ld  (_cx1), a
		ld  a, (_ptx2)
		ld  (_cx2), a
		ld  a, (_p_vy)
		or  a
		jp  z, _va_collision_done
		bit 7, a
		jr  z, _va_collision_vy_positive
	._va_collision_vy_negative
		ld  a, (_pty1)
		ld  (_cy1), a
		ld  (_cy2), a
		call _cm_two_points
		ld  a, (_at1)
		and 8
		jr  nz, _va_col_vy_neg_do
		ld  a, (_at2)
		and 8
		jr  z, _va_collision_checkevil
	._va_col_vy_neg_do
			xor a
		ld  (_p_vy), a
		ld  a, (_pty1)
		inc a
		sla a
		sla a
		sla a
		sla a		
			sub 8
		ld  (_gpy), a
		ld  d, 0
		ld  e, a
		ld  l,  4 
		call l_asl
		ld  (_p_y), hl
		ld  a,  1 
		ld  (_wall_v), a
		jr  _va_collision_checkevil
	._va_collision_vy_positive
		ld  a, (_pty2)
		ld  (_cy1), a
		ld  (_cy2), a
		call _cm_two_points
			ld  a, (_at1)
			and 8
			jr  nz, _va_col_vy_pos_do
			ld  a, (_at2)
			and 8
			jr  nz, _va_col_vy_pos_do
			ld  a, (_gpy)
			dec a
			and 15
			cp  8 
			jr  nc, _va_collision_checkevil
			ld  a, (_at1)
			and 4
			jr  nz, _va_col_vy_pos_do
			ld  a, (_at2)
			and 4
			jr  z, _va_collision_checkevil
	._va_col_vy_pos_do
			xor a
		ld  (_p_vy), a	
		ld  a, (_pty2)
		dec a 
		sla a
		sla a
		sla a
		sla a
		ld  (_gpy), a
		ld  d, 0
		ld  e, a
		ld  l,  4 
		call l_asl
		ld  (_p_y), hl
		ld  a,  2 
		ld  (_wall_v), a
		jr  _va_collision_done
	._va_collision_checkevil
	ld	a,(_at1)
	cp	1
	jp	z,i_142	;
	ld	a,(_at2)
	cp	1
	jp	z,i_142	;
	ld	hl,0	;const
	jr	i_143
.i_142
	ld	hl,1	;const
.i_143
	ld	h,0
	ld	a,l
	ld	(_hit_v),a
	._va_collision_done
	ld	hl,(_gpx)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_gpxx),a
	ld	hl,(_gpy)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_gpyy),a
	C_LINE	47,"./engine/playermods/va.h::player_move::1::98"
	C_LINE	0,"./engine/playermods/possee.h::player_move::1::98"
	ld	hl,(_gpy)
	ld	h,0
	ld	bc,16
	add	hl,bc
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_cy2),a
	ld	a,l
	ld	(_cy1),a
	ld	a,(_ptx1)
	ld	(_cx1),a
	ld	hl,(_ptx2)
	ld	h,0
	ld	a,l
	ld	(_cx2),a
	call	_cm_two_points
	ld	a,(_at1)
	and	12
	jp	nz,i_144	;
	ld	a,(_at2)
	and	12
	jp	z,i_146	;
.i_144
	ld	hl,(_gpy)
	ld	h,0
	ld	a,15
	and	l
	ld	l,a
	ld	a,l
	sub	8
	jp	nc,i_146	;
	ld	hl,1	;const
	jr	i_147
.i_146
	ld	hl,0	;const
.i_147
	ld	h,0
	ld	a,l
	ld	(_possee),a
	C_LINE	52,"./engine/playermods/va.h::player_move::1::98"
	C_LINE	0,"./engine/playermods/jump_sideview.h::player_move::1::98"
	ld	hl,(_key_jump)
	push	hl
	call	sp_KeyPressed
	pop	bc
	ld	a,h
	or	l
	jp	z,i_149	;
	ld	a,(_p_jmp_on)
	and	a
	jp	nz,i_149	;
	ld	a,(_possee)
	and	a
	jp	nz,i_150	;
	ld	a,(_p_gotten)
	and	a
	jp	z,i_149	;
.i_150
	defc	i_149 = i_148
.i_152_i_149
	ld	a,1
	ld	(_p_jmp_on),a
	xor	a
	ld	(_p_jmp_ct),a
	ld	hl,1	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_148
	ld	hl,(_key_jump)
	push	hl
	call	sp_KeyPressed
	pop	bc
	ld	a,h
	or	l
	jp	z,i_154	;
	ld	a,(_p_jmp_on)
	and	a
	jp	z,i_154	;
	defc	i_154 = i_153
.i_155_i_154
	ld	hl,_p_vy
	call	l_gchar
	push	hl
	ld	hl,(_p_jmp_ct)
	ld	h,0
	ld	a,l
	rrca
	and	127
	ld	l,a
	ld	de,36
	ex	de,hl
	and	a
	sbc	hl,de
	pop	de
	ex	de,hl
	and	a
	sbc	hl,de
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	hl,_p_vy
	ld	(hl),a
	call	l_gchar
	ld	a,l
	xor	128
	sub	-75
	jp	nc,i_156	;
	ld	a,181
	call	l_sxt
	ld	a,l
	ld	(_p_vy),a
.i_156
	ld	hl,_p_jmp_ct
	ld	a,(hl)
	inc	(hl)
	ld	a,(_p_jmp_ct)
	cp	8
	jp	nz,i_157	;
	ld	hl,0	;const
	ld	a,l
	ld	(_p_jmp_on),a
.i_157
.i_153
	ld	hl,(_key_jump)
	push	hl
	call	sp_KeyPressed
	pop	bc
	call	l_lneg
	jp	nc,i_158	;
	ld	hl,0	;const
	ld	a,l
	ld	(_p_jmp_on),a
.i_158
	C_LINE	59,"./engine/playermods/va.h::player_move::1::101"
	C_LINE	403,"engine/player.h::player_move::1::101"
	C_LINE	0,"./engine/playermods/ha.h::player_move::1::101"
	C_LINE	0,"./engine/playermods/ha_controller.h::player_move::1::101"
	ld	hl,(_pad0)
	ld	h,0
	ld	a,4
	and	l
	ld	l,a
	jp	z,i_159	;
	ld	hl,(_pad0)
	ld	h,0
	ld	a,8
	and	l
	ld	l,a
	jp	z,i_159	;
	ld	hl,0	;const
	jr	i_160
.i_159
	ld	hl,1	;const
.i_160
	ld	a,l
	ld	hl,_rda
	ld	(hl),a
	and	a
	jp	nz,i_161	;
	ld	hl,_p_vx
	call	l_gchar
	ld	de,0
	ex	de,hl
	call	l_gt
	jp	nc,i_162	;
	ld	hl,_p_vx
	call	l_gchar
	ld	bc,-24
	add	hl,bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	hl,_p_vx
	ld	(hl),a
	rla
	jp	nc,i_163	;
	xor	a
	ld	(_p_vx),a
	jp	i_164	;EOS
	defc	i_163 = i_164
.i_162
	ld	hl,_p_vx
	ld	a,(hl)
	rla
	jp	nc,i_165	;
	ld	hl,_p_vx
	call	l_gchar
	ld	bc,24
	add	hl,bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	hl,_p_vx
	ld	(hl),a
	call	l_gchar
	ld	de,0
	ex	de,hl
	call	l_gt
	jp	nc,i_166	;
	ld	hl,0	;const
	ld	a,l
	ld	(_p_vx),a
.i_166
.i_165
.i_164
.i_161
	ld	hl,(_pad0)
	ld	h,0
	ld	a,4
	and	l
	ld	l,a
	jr	nz,ASMPC+3
	scf
	jp	nc,i_167	;
	ld	hl,_p_vx
	call	l_gchar
	ld	de,65472
	ex	de,hl
	call	l_gt
	jp	nc,i_168	;
	xor	a
	ld	(_p_facing),a
	ld	hl,_p_vx
	call	l_gchar
	ld	bc,-16
	add	hl,bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_p_vx),a
.i_168
.i_167
	ld	hl,(_pad0)
	ld	h,0
	ld	a,8
	and	l
	ld	l,a
	jr	nz,ASMPC+3
	scf
	jp	nc,i_169	;
	ld	hl,_p_vx
	call	l_gchar
	ld	a,l
	xor	128
	sub	192
	jp	nc,i_170	;
	ld	hl,_p_vx
	call	l_gchar
	ld	bc,16
	add	hl,bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_p_vx),a
	ld	hl,1	;const
	ld	a,l
	ld	(_p_facing),a
.i_170
	C_LINE	7,"./engine/playermods/ha.h::player_move::1::108"
.i_169
	ld	hl,(_p_x)
	push	hl
	ld	hl,_p_vx
	call	l_gchar
	pop	de
	add	hl,de
	ld	(_p_x),hl
	ld	a,h
	rla
	jp	nc,i_171	;
	ld	hl,0	;const
	ld	(_p_x),hl
.i_171
	ld	hl,(_p_x)
	ld	de,3584
	ex	de,hl
	call	l_gt
	jp	nc,i_172	;
	ld	hl,3584	;const
	ld	(_p_x),hl
.i_172
	ld	hl,(_p_x)
	ld	de,4
	call	l_asr_hl_by_e
	ld	h,0
	ld	a,l
	ld	(_gpx),a
	C_LINE	0,"./engine/playermods/ha_collision_asm.h::player_move::1::108"
		call _player_calc_bounding_box
					xor a 
			ld  (_hit_h), a
		ld  a, (_pty1)
		ld  (_cy1), a
		ld  a, (_pty2)
		ld  (_cy2), a
		ld  a, (_p_vx)
		or  a
		jp  z, _ha_collision_done
		bit 7, a
		jr  z, _ha_collision_vx_positive
	._ha_collision_vx_negative
		ld  a, (_ptx1)
		ld  (_cx1), a
		ld  (_cx2), a
		call _cm_two_points
		ld  a, (_at1)
		and 8
		jr  nz, _ha_col_vx_neg_do
		ld  a, (_at2)
		and 8
		jr  z, _ha_collision_checkevil
	._ha_col_vx_neg_do
			xor a
		ld  (_p_vx), a
		ld  a, (_ptx1)
		inc a
		sla a
		sla a
		sla a
		sla a
			sub 4
		ld (_gpx), a
		ld  d, 0
		ld  e, a
		ld  l,  4 
		call l_asl
		ld  (_p_x), hl
		ld  a,  3 
		ld  (_wall_h), a
		jr  _ha_collision_checkevil
	._ha_collision_vx_positive
		ld  a, (_ptx2)
		ld  (_cx1), a
		ld  (_cx2), a
		call _cm_two_points
		ld  a, (_at1)
		and 8
		jr  nz, _ha_col_vx_pos_do
		ld  a, (_at2)
		and 8
		jr  z, _ha_collision_checkevil
	._ha_col_vx_pos_do
			xor a
		ld  (_p_vx), a
		ld  a, (_ptx2)
		dec a
		sla a
		sla a
		sla a
		sla a
			add 4
		ld (_gpx), a
		ld  d, 0
		ld  e, a
		ld  l,  4 
		call l_asl
		ld  (_p_x), hl
		ld  a,  4 
		ld  (_wall_h), a
	._ha_collision_checkevil
	._ha_collision_done
	C_LINE	27,"./engine/playermods/ha.h::player_move::1::108"
	C_LINE	409,"engine/player.h::player_move::1::108"
	C_LINE	0,"./engine/playermods/type10.h::player_move::1::108"
	C_LINE	458,"engine/player.h::player_move::1::108"
	C_LINE	0,"./engine/playermods/fire.h::player_move::1::108"
	C_LINE	464,"engine/player.h::player_move::1::108"
	C_LINE	0,"./engine/playermods/hitter.h::player_move::1::108"
	ld	hl,(_pad0)
	ld	h,0
	ld	a,128
	and	l
	ld	l,a
	jp	z,i_174	;
	ld	hl,(_key_fire)
	push	hl
	call	sp_KeyPressed
	pop	bc
	ld	a,h
	or	l
	jr	z,i_175
.i_174
	ld	hl,1	;const
.i_175
	ld	a,h
	or	l
	jp	z,i_176	;
	ld	a,(_p_disparando)
	and	a
	jp	nz,i_176	;
	ld	a,(_invalidate_fire)
	and	a
	jp	nz,i_176	;
	defc	i_176 = i_173
.i_177_i_176
	ld	a,1
	ld	(_p_disparando),a
	ld	hl,(_pad0)
	ld	h,0
	ld	a,1
	and	l
	ld	l,a
	ld	hl,0	;const
	jr	nz,ASMPC+3
	inc	l
	ld	a,l
	ld	(_p_up),a
	ld	hl,(_hitter_on)
	ld	h,0
	ld	de,0
	call	l_eq
	jp	nc,i_178	;
	xor	a
	ld	(_hitter_hit),a
	ld	a,1
	ld	(_hitter_on),a
	xor	a
	ld	(_hitter_frame),a
	ld	a,1
	ld	(_p_hitting),a
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_178
	C_LINE	470,"engine/player.h::player_move::1::110"
	C_LINE	0,"./engine/playermods/bombs.h::player_move::1::110"
	C_LINE	476,"engine/player.h::player_move::1::110"
	C_LINE	0,"./engine/playermods/fire_button.h::player_move::1::110"
.i_173
	ld	hl,(_pad0)
	ld	h,0
	ld	a,128
	and	l
	ld	l,a
	jp	z,i_180	;
	ld	hl,(_key_fire)
	push	hl
	call	sp_KeyPressed
	pop	bc
	ld	a,h
	or	l
	jp	nz,i_180	;
	jr	i_181
.i_180
	ld	hl,1	;const
.i_181
	call	l_lneg
	jp	nc,i_179	;
	xor	a
	ld	(_p_disparando),a
	ld	hl,0	;const
	ld	a,l
	ld	(_invalidate_fire),a
	C_LINE	479,"engine/player.h::player_move::1::111"
.i_179
	xor	a
	ld	(_hit),a
	ld	a,(_hit_v)
	and	a
	jp	z,i_182	;
	ld	a,1
	ld	(_hit),a
	ld	hl,_p_vy
	call	l_gchar
	call	l_neg
	push	hl
	ld	hl,64	;const
	push	hl
	call	_addsign
	pop	bc
	pop	bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_p_vy),a
	jp	i_183	;EOS
.i_182
	ld	a,(_hit_h)
	and	a
	jp	z,i_184	;
	ld	a,1
	ld	(_hit),a
	ld	hl,_p_vx
	call	l_gchar
	call	l_neg
	push	hl
	ld	hl,64	;const
	push	hl
	call	_addsign
	pop	bc
	pop	bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_p_vx),a
.i_184
.i_183
	ld	a,(_p_state)
	and	a
	jp	nz,i_185	;
	ld	a,(_hit)
	and	a
	jp	z,i_186	;
	ld	hl,3	;const
	ld	a,l
	ld	(_p_killme),a
.i_186
.i_185
	ld	a,(_possee)
	and	a
	jp	nz,i_188	;
	ld	a,(_p_gotten)
	and	a
	jp	nz,i_188	;
	defc	i_188 = i_187
.i_189_i_188
	ld	hl,_player_frames
	push	hl
	ld	hl,(_p_facing)
	ld	h,0
	ld	bc,8
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	ld	(_p_n_f),hl
	jp	i_190	;EOS
.i_187
	ld	hl,(_p_facing)
	ld	h,0
	add	hl,hl
	add	hl,hl
	ld	a,l
	ld	(_gpit),a
	ld	a,(_p_vx)
	and	a
	jp	nz,i_191	;
	ld	hl,_player_frames
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	inc	hl
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	ld	(_p_n_f),hl
	jp	i_192	;EOS
.i_191
	ld	hl,_p_subframe
	ld	a,(hl)
	inc	(hl)
	ld	a,(_p_subframe)
	cp	4
	jp	nz,i_193	;
	xor	a
	ld	(_p_subframe),a
	ld	hl,(_p_frame)
	ld	h,0
	inc	hl
	ld	a,l
	and	3
	ld	l,a
	ld	h,0
	ld	(_p_frame),a
	call	_step
.i_193
	ld	hl,_player_frames
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	ex	de,hl
	ld	hl,(_p_frame)
	ld	h,0
	add	hl,de
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	ld	(_p_n_f),hl
.i_192
.i_190
	ret


	C_LINE	181,"mk2.c::player_move::0::118"
	C_LINE	0,"engine/enems.h::player_move::0::118"
	C_LINE	0,"./engine/enemmods/helper_funcs.h::player_move::0::118"
	C_LINE	2,"./engine/enemmods/helper_funcs.h::player_move::0::118"

; Function distance flags 0x00000200 __smallc 
; unsigned char distance()
	C_LINE	2,"./engine/enemmods/helper_funcs.h::distance::0::118"
._distance
				ld  a, (_cx1)
				ld  c, a
				ld  a, (_cx2)
				sub c
				bit 7, a 	 
				jr  z, _distance_dx_set
				neg
			._distance_dx_set
				ld  (__x), a
				ld  a, (_cy1)
				ld  c, a
				ld  a, (_cy2)
				sub c
				bit 7, a 	 
				jr  z, _distance_dy_set
				neg
			._distance_dy_set
				ld  (__y), a
				ld  c, a 			; c = _y
				ld  a, (__x)        ; a = _x
				cp  c 				; _x < _y ?
				jr  c, _distance_mn_set
			._distance_dy_min
				ld  a, c
			._distance_mn_set
				ld  (__n), a
				ld  a, (__x)
				ld  c, a
				ld  a, (__y)
				add c
				ld  b, a 	 
				ld  a, (__n)
				srl a
				ld  c, a 			; c = (mn >> 1)
				srl a
				ld  d, a 			; d = (mn >> 2)
				srl a
				srl a
				ld  e, a 			; e = (mn >> 4)
				ld  a, b 	 
				sub c  		 
				sub d 		 
				add e 		 
				ld  l, a
				ld  h, 0
	ret


	C_LINE	16,"engine/enems.h::distance::0::119"
	C_LINE	0,"./engine/enemmods/kill_enemy.h::distance::0::119"
	C_LINE	3,"./engine/enemmods/kill_enemy.h::distance::0::119"

; Function enems_kill flags 0x00000200 __smallc 
; void enems_kill(unsigned char amount)
; parameter 'unsigned char amount' at sp+2 size(1)
	C_LINE	3,"./engine/enemmods/kill_enemy.h::enems_kill::0::119"
._enems_kill
	ld	a,(_gpt)
	cp	2
	jp	nz,i_194	;
	ld	de,_en_an_vx
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	push	hl
	ld	de,_en_an_vx
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	ld	a,(hl)
	neg
	pop	de
	ld	(de),a
.i_194
	ld	hl,__en_mx
	call	l_gchar
	call	l_neg
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(__en_mx),a
	ld	hl,__en_my
	call	l_gchar
	call	l_neg
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(__en_my),a
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
	ret


	C_LINE	21,"engine/enems.h::enems_kill::0::121"
	C_LINE	24,"engine/enems.h::enems_kill::0::121"

; Function enems_init flags 0x00000200 __smallc 
; void enems_init()
	C_LINE	24,"engine/enems.h::enems_init::0::121"
._enems_init
	ld	hl,_flags+1
	ld	(hl),0
	ld	a,(_do_respawn)
	and	a
	jp	z,i_195	;
	xor	a
	ld	(_gpit),a
	jp	i_198	;EOS
.i_196
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
.i_198
	ld	a,(_gpit)
	sub	3
	jp	nc,i_197	;
	ld	de,_en_an_count
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	ld	(hl),3
	ld	de,_en_an_state
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	ld	(hl),0
	ld	hl,_enoffs
	ld	a,(_gpit)
	add	(hl)
	ld	(_enoffsmasi),a
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	push	hl
	ld	a,(hl)
	and	127
	ld	l,a
	pop	de
	ld	(de),a
	ld	de,_en_an_state
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	ld	(hl),0
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,9
	add	hl,bc
	ld	(hl),1
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	ld	a,(hl)
	ld	hl,__en_t
	ld	(hl),a
	ld	l,(hl)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	and	31
	ld	hl,_gpt
	ld	(hl),a
	and	a
	jp	z,i_200	;
	ld	a,(_gpt)
	sub	16
	jp	nc,i_200	;
	defc	i_200 = i_199
.i_201_i_200
	ld	de,_en_an_base_frame
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	push	hl
	ld	hl,(__en_t)
	ld	h,0
	ld	a,3
	and	l
	ld	l,a
	add	hl,hl
	pop	de
	ld	a,l
	ld	(de),a
	ld	hl,(_gpt)
	ld	h,0
.i_204
	ld	a,l
	cp	+(2% 256)
	jp	nz,i_206	;EOS
.i_205
	ld	hl,_en_an_x
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	l,(hl)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	pop	de
	call	l_pint
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	a,(hl)
	pop	de
	ld	(de),a
	ld	hl,_en_an_y
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	inc	hl
	ld	l,(hl)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	pop	de
	call	l_pint
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	inc	hl
	push	hl
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	inc	hl
	ld	a,(hl)
	pop	de
	ld	(de),a
	ld	de,_en_an_vx
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	push	hl
	ld	de,_en_an_vy
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	ld	(hl),0
	ld	l,(hl)
	ld	h,0
	ld	a,l
	pop	de
	ld	(de),a
	ld	de,_en_an_state
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	ld	(hl),0
	jp	i_203	;EOS
	C_LINE	0,"./my/extra_enems_init.h::enems_init::5::126"
	C_LINE	121,"engine/enems.h::enems_init::5::126"
	jp	i_203	;EOS
	defc	i_206 = i_203
.i_203
	ld	hl,_flags+1
	inc	(hl)
	jp	i_196	;EOS
	defc	i_199 = i_196
.i_197
.i_195
	ret


	C_LINE	137,"engine/enems.h::enems_init::0::126"

; Function enems_move_spr_abs flags 0x00000200 __smallc 
; void enems_move_spr_abs()
	C_LINE	137,"engine/enems.h::enems_move_spr_abs::0::126"
._enems_move_spr_abs
		; enter: IX = sprite structure address 
		;        IY = clipping rectangle, set it to "ClipStruct" for full screen 
		;        BC = animate bitdef displacement (0 for no animation) 
		;         H = new row coord in chars 
		;         L = new col coord in chars 
		;         D = new horizontal rotation (0..7) ie horizontal pixel position 
		;         E = new vertical rotation (0..7) ie vertical pixel position 
		ld  a, (_enit)
		sla a
		ld  c, a
		ld  b, 0 				 
		ld  hl, _sp_moviles
		add hl, bc
		ld  e, (hl)
		inc hl 
		ld  d, (hl)
		push de						
		pop ix
		ld  iy, vpClipStruct
		ld  hl, _en_an_c_f
		add hl, bc 				 
		ld  e, (hl)
		inc hl 
		ld  d, (hl) 			 
		ld  hl, _en_an_n_f
		add hl, bc 				 
		ld  a, (hl)
		inc hl
		ld  h, (hl)
		ld  l, a 				 
		or  a 					 
		sbc hl, de 				 
		push bc 				 
		ld  b, h
		ld  c, l 				 
		ld  a, (__en_y)					
		srl a
		srl a
		srl a
		add  2 
		ld h, a
		ld  a, (__en_x)
		srl a
		srl a
		srl a
		add  0 
		ld  l, a
		ld  a, (__en_x)
		and 7
		ld  d, a
		ld  a, (__en_y)
		and 7
		ld  e, a
		call SPMoveSprAbs
		pop bc 					 
		ld  hl, _en_an_c_f
		add hl, bc
		ex  de, hl 				 
		ld  hl, _en_an_n_f
		add hl, bc 				 
		ldi
		ldi
	ret


	C_LINE	232,"engine/enems.h::enems_move_spr_abs::0::127"

; Function enems_move flags 0x00000200 __smallc 
; void enems_move()
	C_LINE	232,"engine/enems.h::enems_move::0::127"
._enems_move
	ld	hl,0	;const
	ld	a,l
	ld	(_ptgmx),a
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_ptgmy),a
	ld	a,l
	ld	(_p_gotten),a
	xor	a
	ld	(_tocado),a
	ld	(_enemy_was_killed),a
	xor	a
	ld	(_enit),a
	jp	i_209	;EOS
.i_207
	ld	hl,(_enit)
	ld	h,0
	inc	hl
	ld	a,l
	ld	(_enit),a
.i_209
	ld	a,(_enit)
	sub	3
	jp	nc,i_208	;
	ld	hl,0	;const
	ld	a,l
	ld	(_animate),a
	ld	a,l
	ld	(_killable),a
	ld	(_active),a
	ld	hl,(_enoffs)
	ld	h,0
	ex	de,hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	ld	h,0
	ld	a,l
	ld	(_enoffsmasi),a
				ld 	hl, (_enoffsmasi)
				ld  h, 0
				add hl, hl 				 
				ld  d, h
				ld  e, l 				 
				add hl, hl 				 
				add hl, hl 				 
				add hl, de 				 
				ld  de, _baddies
				add hl, de
				ld  (__baddies_pointer), hl 		 
				ld  a, (hl)
				ld  (__en_x), a
				inc hl 
				ld  a, (hl)
				ld  (__en_y), a
				inc hl 
				ld  a, (hl)
				ld  (__en_x1), a
				inc hl 
				ld  a, (hl)
				ld  (__en_y1), a
				inc hl 
				ld  a, (hl)
				ld  (__en_x2), a
				inc hl 
				ld  a, (hl)
				ld  (__en_y2), a
				inc hl 
				ld  a, (hl)
				ld  (__en_mx), a
				inc hl 
				ld  a, (hl)
				ld  (__en_my), a
				inc hl 
				ld  a, (hl)
				ld  (__en_t), a
				inc hl 
				ld  a, (hl)
				ld  (__en_life), a
	ld	a,(__en_t)
	and	a
	jp	nz,i_210	;
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ex	de,hl
	ld	hl,_sprite_18_a
	call	l_pint
	jp	i_211	;EOS
.i_210
	ld	de,_en_an_state
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	ld	a,(hl)
	cp	4
	jp	nz,i_212	;
	ld	de,_en_an_count
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	ld	a,(hl)
	and	a
	jp	z,i_213	;
	ld	de,_en_an_count
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	dec	(hl)
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ex	de,hl
	ld	hl,_sprite_17_a
	call	l_pint
	jp	i_214	;EOS
.i_213
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
	ld	de,_en_an_state
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	ld	(hl),0
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ex	de,hl
	ld	hl,_sprite_18_a
	call	l_pint
	jp	i_215	;EOS
	defc	i_214 = i_215
.i_212
	ld	hl,(__en_t)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	and	31
	ld	hl,_gpt
	ld	(hl),a
	ld	l,(hl)
	ld	h,0
	ld	a,l
	cp	8
	jp	nz,i_216	;
								ld  a, (__en_x)
								ld  c, a
								ld  a, (_gpx)
								add 12
								cp  c
								jp  c, _enems_move_pregotten_not 	 
								ld  a, (_gpx)
								ld  c, a
								ld  a, (__en_x)
								add 12
								cp  c 
								jp  c, _enems_move_pregotten_not 	 
								ld  a, 1
								jr  _enems_move_pregotten_set
							._enems_move_pregotten_not
								xor a
							._enems_move_pregotten_set
								ld  (_pregotten), a			
.i_216
	ld	hl,(_gpt)
	ld	h,0
.i_219
	ld	a,l
	cp	+(1% 256)
	jp	z,i_220	;
	cp	+(8% 256)
	jp	z,i_221	;
	cp	+(2% 256)
	jp	z,i_222	;
	jp	i_223	;EOS
.i_220
	ld	hl,1	;const
	ld	a,l
	ld	(_killable),a
.i_221
	C_LINE	0,"./engine/enemmods/move_linear.h::enems_move::5::136"
		ld 	a, 1
		ld  (_active), a
		ld  (_animate), a
		ld  a, (__en_mx)
		ld  c, a
		ld  a, (__en_x)
		add a, c
		ld  (__en_x), a
		ld  c, a
		ld  a, (__en_x1)
		cp  c
		jr  z, _enems_lm_change_axis_x
		ld  a, (__en_x2)
		cp  c
		jr  nz, _enems_lm_change_axis_x_done
	._enems_lm_change_axis_x
		ld  a, (__en_mx)
		neg
		ld  (__en_mx), a
	._enems_lm_change_axis_x_done
		ld  a, (__en_my)
		ld  c, a
		ld  a, (__en_y)
		add a, c
		ld  (__en_y), a
		ld  c, a
		ld  a, (__en_y1)
		cp  c
		jr  z, _enems_lm_change_axis_y
		ld  a, (__en_y2)
		cp  c
		jr  nz, _enems_lm_change_axis_y_done
	._enems_lm_change_axis_y
		ld  a, (__en_my)
		neg
		ld  (__en_my), a
	._enems_lm_change_axis_y_done
	C_LINE	462,"engine/enems.h::enems_move::5::136"
	jp	i_218	;EOS
.i_222
	C_LINE	0,"./engine/enemmods/move_fanty_asm.h::enems_move::5::136"
		ld  a, 1
		ld  (_active), a
		ld  (_killable), a
		ld  (_animate), a
		ld  bc, (_enit)
		ld  b, 0
		ld  hl, _en_an_vx
		add hl, bc
		ld  a, (hl)
		ld  (__en_an_vx), a
		ld  hl, _en_an_vy
		add hl, bc
		ld  a, (hl)
		ld  (__en_an_vy), a
		ld  hl, _en_an_x
		add hl, bc
		add hl, bc
		ld  e, (hl)
		inc hl
		ld  d, (hl)
		ld  (__en_an_x), de
		ld  hl, _en_an_y
		add hl, bc
		add hl, bc
		ld  e, (hl)
		inc hl
		ld  d, (hl)
		ld  (__en_an_y), de		
		ld  a, (_gpx)
		ld  (_cx1), a
		ld  a, (_gpy)
		ld  (_cy1), a
		ld  a, (__en_x)
		ld  (_cx2), a
		ld  a, (__en_y)
		ld  (_cy2), a
		call _distance
		ld  a, l
		ld  (_rda), a
		ld  bc, (_enit)
		ld  b, 0
		ld  hl, _en_an_state
		add hl, bc
		ld  a, (hl)
		ld  (_rdb), a 		 
		cp   1 
		jp  z, _move_fanty_pursuing
		cp   2 
		jp  z, _move_fanty_retreating
	._move_fanty_idle
		ld  a, (_rda)
		cp   96 
		jp  nc, _move_fanty_state_done
		ld  a,  1 
		ld  (_rdb), a
		jp  _move_fanty_state_done
	._move_fanty_pursuing
		ld  a, (_rda)
		cp   96 
		jr  c, _move_fanty_pursuing_do
		ld  a,  2 
		ld  (_rdb), a
		jp  _move_fanty_state_done
	._move_fanty_pursuing_do
		ld  a, (__en_x)
		ld  c, a
		ld  a, (_gpx)
		cp  c
		jr  nc, _move_fanty_ax_pos
	._move_fanty_ax_neg
		ld  a, - 4 
		jr  _move_fanty_ax_set
	._move_fanty_ax_pos
		ld  a,  4 
	._move_fanty_ax_set
		ld  c, a
		ld  a, (__en_an_vx)
		add c
		bit 7, a
		jr  nz, _move_fanty_vx_limit_neg
	._move_fanty_vx_limit_pos
		cp 	 64 
		jr  c, _move_fanty_vx_limit_set
		ld  a,  64 
		jr _move_fanty_vx_limit_set
	._move_fanty_vx_limit_neg
		neg a
		cp 	 64 
		jr  c, _move_fanty_vx_limit_neg_ok
		ld  a, - 64 
		jr  _move_fanty_vx_limit_set
	._move_fanty_vx_limit_neg_ok
		neg a
	._move_fanty_vx_limit_set
		ld  (__en_an_vx), a
		ld  hl, (__en_an_x)
		ld  c, a
		add a, a     
		sbc a 		 
		ld  b, a 	 
		add hl, bc
		bit 7, h
		jr  z, _move_fanty_x_limit_0
		ld  hl, 0
		jr  _move_fanty_x_set
	._move_fanty_x_limit_0
		ld  bc, 3584  
		or  a		
		sbc hl, bc
		add hl, bc
		jr  c, _move_fanty_x_set
	._move_fanty_x_limit_224
		ld  hl, 3584  
	._move_fanty_x_set
		ld  (__en_an_x), hl
		ld  a, (__en_y)
		ld  c, a
		ld  a, (_gpy)
		cp  c
		jr  nc, _move_fanty_ay_pos
	._move_fanty_ay_neg
		ld  a, - 4 
		jr  _move_fanty_ay_set
	._move_fanty_ay_pos
		ld  a,  4 
	._move_fanty_ay_set
		ld  c, a
		ld  a, (__en_an_vy)
		add c
		bit 7, a
		jr  nz, _move_fanty_vy_limit_neg
	._move_fanty_vy_limit_pos		
		cp 	 64 
		jr  c, _move_fanty_vy_limit_set
		ld  a,  64 
		jr _move_fanty_vy_limit_set
	._move_fanty_vy_limit_neg
		neg a
		cp 	 64 
		jr  c, _move_fanty_vy_limit_neg_ok
		ld  a, - 64 
		jr  _move_fanty_vy_limit_set
	._move_fanty_vy_limit_neg_ok
		neg a
	._move_fanty_vy_limit_set
		ld  (__en_an_vy), a
		ld  hl, (__en_an_y)
		ld  c, a
		add a, a     
		sbc a 		 
		ld  b, a 	 
		add hl, bc
		bit 7, h
		jr  z, _move_fanty_y_limit_0
		ld  hl, 0
		jr  _move_fanty_y_set
	._move_fanty_y_limit_0
		ld  bc, 2304  
		or  a		
		sbc hl, bc
		add hl, bc		
		jr  c, _move_fanty_y_set
	._move_fanty_y_limit_144
		ld  hl, 2304  
	._move_fanty_y_set
		ld  (__en_an_y), hl
		jp  _move_fanty_state_done
	._move_fanty_retreating	
		xor a
		ld  (__en_an_vx), a
		ld  (__en_an_vy), a
		ld  hl, (__en_an_x)
		ld  de, 16
		ld  a, (__en_x1)
		ld  c, a
		ld  a, (__en_x)
		cp  c
		jr  z, _move_fanty_r_x_done
		jr  nc, _move_fanty_r_x_neg
	._move_fanty_r_x_pos		
		add hl, de
		jr  _move_fanty_r_x_set
	._move_fanty_r_x_neg
		or  a
		sbc hl, de
	._move_fanty_r_x_set
		ld  (__en_an_x), hl
	._move_fanty_r_x_done
		ld  hl, (__en_an_y)
		ld  de, 16
		ld  a, (__en_y1)
		ld  c, a
		ld  a, (__en_y)
		cp  c
		jr  z, _move_fanty_r_y_done
		jr  nc, _move_fanty_r_y_neg
	._move_fanty_r_y_pos		
		add hl, de
		jr  _move_fanty_r_y_set
	._move_fanty_r_y_neg
		or  a
		sbc hl, de
	._move_fanty_r_y_set
		ld  (__en_an_y), hl
	._move_fanty_r_y_done
		ld  a, (__en_x1)
		ld  c, a
		ld  a, (__en_x)
		cp  c
		jr  nz, _move_fanty_r_chstate_done
		ld  a, (__en_y1)
		ld  c, a
		ld  a, (__en_y)
		cp  c
		jr  nz, _move_fanty_r_chstate_done
		ld  a,  0 
		ld  (_rdb), a
		jr  _move_fanty_state_done
	._move_fanty_r_chstate_done
		ld  a, (_rda)
		cp   96 
		jr  nc, _move_fanty_state_done
		ld  a,  1 
		ld  (_rdb), a
	._move_fanty_state_done
		ld  bc, (_enit)
		ld  b, 0
		ld  hl, _en_an_state
		add hl, bc
		ld  a, (_rdb)
		ld  (hl), a
	ld	hl,(__en_an_x)
	ld	de,4
	call	l_asr_hl_by_e
	ld	a,l
	ld	(__en_x),a
	ld	hl,(__en_an_y)
	ld	de,4
	call	l_asr_hl_by_e
	ld	h,0
	ld	a,l
	ld	(__en_y),a
		ld  bc, (_enit)
		ld  b, 0
		ld  hl, _en_an_vx
		add hl, bc
		ld  a, (__en_an_vx)
		ld  (hl), a
		ld  hl, _en_an_vy
		add hl, bc
		ld  a, (__en_an_vy)
		ld  (hl), a
		ld  hl, _en_an_x
		add hl, bc
		add hl, bc
		ld  de, (__en_an_x)
		ld  (hl), e 
		inc hl
		ld  (hl), d
		ld  hl, _en_an_y
		add hl, bc
		add hl, bc
		ld  de, (__en_an_y)
		ld  (hl), e 
		inc hl
		ld  (hl), d		
	C_LINE	467,"engine/enems.h::enems_move::5::136"
	jp	i_218	;EOS
	C_LINE	0,"./my/extra_enems_move.h::enems_move::5::136"
	C_LINE	501,"engine/enems.h::enems_move::5::136"
.i_223
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ex	de,hl
	ld	hl,_sprite_18_a
	call	l_pint
.i_218
	ld	a,(_active)
	and	a
	jp	z,i_224	;
	ld	a,(_animate)
	and	a
	jp	z,i_225	;
	ld	a,(__en_mx)
	and	a
	jp	z,i_226	;
	ld	hl,(__en_x)
	ld	h,0
	ld	bc,4
	add	hl,bc
	ld	a,l
	rrca
	rrca
	rrca
	and	1
	ld	l,a
	ld	h,0
	jp	i_227	;
.i_226
	ld	hl,(__en_y)
	ld	h,0
	ld	bc,4
	add	hl,bc
	ld	a,l
	rrca
	rrca
	rrca
	and	1
	ld	l,a
	ld	h,0
.i_227
	ld	a,l
	ld	(_gpjt),a
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,_enem_frames
	push	hl
	ld	de,_en_an_base_frame
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	ld	e,(hl)
	ld	d,0
	ld	hl,(_gpjt)
	ld	h,0
	add	hl,de
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	C_LINE	0,"./engine/enemmods/hitter.h::enems_move::5::139"
.i_225
	ld	a,(_hitter_on)
	and	a
	jp	z,i_229	;
	ld	a,(_killable)
	and	a
	jp	z,i_229	;
	ld	a,(_hitter_hit)
	and	a
	jp	nz,i_229	;
	defc	i_229 = i_228
.i_230_i_229
	ld	a,(_p_up)
	and	a
	jp	z,i_231	;
	ld	hl,(_hitter_x)
	ld	h,0
	ld	bc,4
	add	hl,bc
	ld	a,l
	ld	(_cx1),a
	ld	hl,(_hitter_y)
	ld	a,l
	ld	(_cy1),a
	jp	i_232	;EOS
.i_231
	ld	hl,(_hitter_x)
	ld	h,0
	push	hl
	ld	a,(_p_facing)
	and	a
	jp	z,i_233	;
	ld	hl,6	;const
	jp	i_234	;
.i_233
	ld	hl,1	;const
.i_234
	pop	de
	add	hl,de
	ld	a,l
	ld	(_cx1),a
	ld	hl,(_hitter_y)
	ld	h,0
	inc	hl
	inc	hl
	inc	hl
	ld	h,0
	ld	a,l
	ld	(_cy1),a
.i_232
	ld	a,(__en_x)
	ld	(_cx2),a
	ld	a,(__en_y)
	ld	(_cy2),a
	ld	hl,(_hitter_frame)
	ld	h,0
	ld	a,2
	sub	l
	jp	nc,i_236	;
	ld	hl,(_hitter_frame)
	ld	h,0
	ld	a,l
	sub	7
	jp	nc,i_236	;
	call	_collide_pixel
	ld	a,h
	or	l
	jp	z,i_236	;
	defc	i_236 = i_235
.i_237_i_236
	ld	a,1
	ld	(_hitter_hit),a
	ld	hl,0	;const
	push	hl
	call	_enems_kill
	pop	bc
	jp	i_238	;EOS
.i_235
	C_LINE	528,"engine/enems.h::enems_move::5::143"
.i_228
					ld  a, (_tocado)
					or  a
					jp  nz, _enems_collision_skip
					ld  a, (_p_state)
					or  a
					jp  nz, _enems_collision_skip
					ld  a, (__en_x)
					ld  c, a
					ld  a, (_gpx)
											add 8
					cp  c
					jp  c, _enems_collision_skip
					ld  a, (_gpx)
					ld  c, a
					ld  a, (__en_x)
						add 8
					cp  c
					jp  c, _enems_collision_skip
					ld  a, (__en_y)
					ld  c, a
					ld  a, (_gpy)
						add 8
					cp  c
					jp  c, _enems_collision_skip
					ld  a, (_gpy)
					ld  c, a
					ld  a, (__en_y)
						add 8
					cp  c
					jp  c, _enems_collision_skip			
	ld	a,(_p_life)
	and	a
	jp	z,i_239	;
	ld	a,1
	ld	(_tocado),a
.i_239
	ld	hl,2	;const
	ld	a,l
	ld	(_p_killme),a
					._enems_collision_skip
.i_224
.i_215
.i_211
.i_238
.i_240
			.enems_loop_continue_a
	call	_enems_move_spr_abs
				ld  hl, (__baddies_pointer) 		 
				ld  a, (__en_x)
				ld  (hl), a
				inc hl
				ld  a, (__en_y)
				ld  (hl), a
				inc hl
				ld  a, (__en_x1)
				ld  (hl), a
				inc hl
				ld  a, (__en_y1)
				ld  (hl), a
				inc hl
				ld  a, (__en_x2)
				ld  (hl), a
				inc hl
				ld  a, (__en_y2)
				ld  (hl), a
				inc hl
				ld  a, (__en_mx)
				ld  (hl), a
				inc hl
				ld  a, (__en_my)
				ld  (hl), a
				inc hl
				ld  a, (__en_t)
				ld  (hl), a
				inc hl
				ld  a, (__en_life)
				ld  (hl), a
	jp	i_207	;EOS
.i_208
	ld	a,(_enemy_was_killed)
	and	a
	jp	z,i_241	;
	ld	hl,23	;const
	push	hl
	call	_run_script
	pop	bc
.i_241
	ret


	C_LINE	195,"mk2.c::enems_move::0::146"
	C_LINE	0,"engine/update_sprites.h::enems_move::0::146"
	C_LINE	1,"engine/update_sprites.h::enems_move::0::146"

; Function update_sprites flags 0x00000200 __smallc 
; void update_sprites()
	C_LINE	1,"engine/update_sprites.h::update_sprites::0::146"
._update_sprites
	ld	hl,(_p_state)
	ld	h,0
	ld	a,2
	and	l
	ld	l,a
	jp	z,i_243	;
	ld	a,(_half_life)
	and	a
	jp	nz,i_242	;
.i_243
					ld  ix, (_sp_player)
					ld  iy, vpClipStruct
					ld  hl, (_p_n_f)
					ld  de, (_p_c_f)
					or  a
					sbc hl, de
					ld  b, h
					ld  c, l
					ld  a, (_gpy)
					srl a
					srl a
					srl a
					add  2 
					ld  h, a 
					ld  a, (_gpx)
					srl a
					srl a
					srl a
					add  0 
					ld  l, a 
					ld  a, (_gpx)
					and 7
					ld  d, a
					ld  a, (_gpy)
					and 7
					ld  e, a
					call SPMoveSprAbs
	jp	i_245	;EOS
.i_242
					ld  ix, (_sp_player)
					ld  iy, vpClipStruct
					ld  hl, (_p_n_f)
					ld  de, (_p_c_f)
					or  a
					sbc hl, de
					ld  b, h
					ld  c, l
					ld  hl, 0xfefe
					ld  de, 0
					call SPMoveSprAbs
.i_245
	ld	hl,(_p_n_f)
	ld	(_p_c_f),hl
	ret


	C_LINE	198,"mk2.c::update_sprites::0::149"
	C_LINE	0,"engine/drawscr.h::update_sprites::0::149"
	C_LINE	7,"engine/drawscr.h::update_sprites::0::149"

; Function advance_worm flags 0x00000200 __smallc 
; void advance_worm()
	C_LINE	7,"engine/drawscr.h::advance_worm::0::149"
._advance_worm
			ld  bc, (_gpit)
			ld  b, 0
			ld  de, (_gpt)
			ld  d, 0
			ld  hl, _behs
			add hl, de
			ld  a, (hl)
			ld  hl, _map_attr
			add hl, bc
			ld  (hl), a
			ld  a, (_gpd)
			ld  hl, _map_buff
			add hl, bc
			ld  (hl), a
			ld  (__t), a
			call _draw_coloured_tile
			ld  a, (__x)
			add 2
			cp  30 +  0 
			jr  c, _advance_worm_no_inc_y
			ld  a, (__y)
			add 2
			ld  (__y), a
			ld  a,  0 
		._advance_worm_no_inc_y
			ld  (__x), a
			ld  hl, _gpit
			inc (hl)
	ret


	C_LINE	113,"engine/drawscr.h::advance_worm::0::150"

; Function draw_scr_background flags 0x00000200 __smallc 
; void draw_scr_background()
	C_LINE	113,"engine/drawscr.h::draw_scr_background::0::150"
._draw_scr_background
	ld	de,_seed1
	ld	hl,(_n_pant)
	ld	h,0
	call	l_pint
	ld	hl,_seed2
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	inc	hl
	pop	de
	call	l_pint
	call	_srand
	ld	hl,_map
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ex	de,hl
	ld	hl,(_n_pant)
	ld	h,0
	add	hl,de
	ld	(_map_pointer),hl
			._draw_scr_packed_unpacked
				ld  a,  0 
				ld  (__x), a
				ld  a,  2 
				ld  (__y), a
				xor a
				ld  (_gpit), a				
			._draw_scr_background_loop				
				and 1
				jr  z, draw_scr_background_new_byte
				ld  a, (_gpc)
				and 15
				jr  draw_scr_background_set_t
			.draw_scr_background_new_byte
				ld  hl, (_map_pointer)
				ld  a, (hl)
				inc hl
				ld  (_map_pointer), hl
				ld  (_gpc), a
				srl a
				srl a
				srl a
				srl a
			.draw_scr_background_set_t
				ld  (_gpt), a
				ld  (_gpd), a				
				call _advance_worm
				ld  a, (_gpit)
				cp  150
				jr  nz, _draw_scr_background_loop
				ld  a, 240
				ld  (_hotspot_y), a
				ld  a, (_n_pant)
				ld  b, a
				sla a
				add b
				ld  c, a
				ld  b, 0
				ld  hl, _hotspots
				add hl, bc
				ld  a, (hl) 		 
				ld  b, a
				srl a
				srl a
				srl a
				srl a
				ld  (__x), a
				ld  a, b
				and 15
				ld  (__y), a
				inc hl 				 
				ld  b, (hl) 		 
				inc hl 				 
				ld  c, (hl) 		 
				ld  a, b
				and c
				jr  z, _hotspots_setup_done
			._hotspots_setup_do
				ld  a, (__x)
				ld  e, a
				sla a
				sla a
				sla a
				sla a
				ld  (_hotspot_x), a
				ld  a, (__y)
				ld  d, a
				sla a
				sla a
				sla a
				sla a
				ld  (_hotspot_y), a
				sub d
				add e
				ld  e, a
				ld  d, 0
				ld  hl, _map_buff
				add hl, de
				ld  a, (hl)
				ld  (_orig_tile), a
				ld  a, b
				cp  3
				jp  nz, _hotspots_setup_set
			._hotspots_setup_set_refill
				xor a
			._hotspots_setup_set
				add 16
				ld  (__t), a		
				call _draw_coloured_tile_gamearea
			._hotspots_setup_done
	ret


	C_LINE	550,"engine/drawscr.h::draw_scr_background::0::151"

; Function draw_scr flags 0x00000200 __smallc 
; void draw_scr()
	C_LINE	550,"engine/drawscr.h::draw_scr::0::151"
._draw_scr
	ld	a,1
	ld	(_is_rendering),a
	ld	a,(_no_draw)
	and	a
	jp	z,i_246	;
	xor	a
	ld	(_no_draw),a
	jp	i_247	;EOS
.i_246
	call	_blackout_area
	ld	a,12
	ld	(__x),a
	ld	a,12
	ld	(__y),a
	ld	a,71
	ld	(__t),a
	ld	hl,i_1+134
	ld	(_gp_gen),hl
	call	_print_str
	ld	a,18
	ld	(__x),a
	ld	a,12
	ld	(__y),a
	ld	hl,(_n_pant)
	inc	l
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_print_number2
	call	sp_UpdateNow
	ld	hl,500	;const
	push	hl
	call	_active_sleep
	pop	bc
	call	_draw_scr_background
.i_247
	xor	a
	ld	(_f_zone_ac),a
	ld	hl,(_n_pant)
	ld	h,0
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ld	h,0
	ld	a,l
	ld	(_enoffs),a
	call	_enems_init
	ld	hl,1	;const
	ld	a,l
	ld	(_do_respawn),a
	call	_run_entering_script
	call	_invalidate_viewport
	ld	hl,0	;const
	ld	a,l
	ld	(_is_rendering),a
	ret


	C_LINE	201,"mk2.c::draw_scr::0::154"
	C_LINE	0,"engine/hud.h::draw_scr::0::154"
	C_LINE	7,"engine/hud.h::draw_scr::0::154"
	C_LINE	14,"engine/hud.h::draw_scr::0::154"
	C_LINE	29,"engine/hud.h::draw_scr::0::154"

; Function update_hud flags 0x00000200 __smallc 
; void update_hud()
	C_LINE	29,"engine/hud.h::update_hud::0::154"
._update_hud
	ld	hl,(_p_life)
	ld	h,0
	ex	de,hl
	ld	hl,(_life_old)
	ld	h,0
	call	l_ne
	jp	nc,i_248	;
	ld	a,30
	ld	(__x),a
	ld	a,8
	ld	(__y),a
	ld	hl,(_p_life)
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_print_number2
	ld	hl,(_p_life)
	ld	h,0
	ld	a,l
	ld	(_life_old),a
.i_248
	ld	hl,(_ctimer+1)
	ld	h,0
	ex	de,hl
	ld	hl,(_timer_old)
	ld	h,0
	call	l_ne
	jp	nc,i_249	;
	ld	a,30
	ld	(__x),a
	ld	a,13
	ld	(__y),a
	ld	hl,(_ctimer+1)
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_print_number2
	ld	hl,(_ctimer+1)
	ld	h,0
	ld	a,l
	ld	(_timer_old),a
.i_249
	ret


	C_LINE	204,"mk2.c::update_hud::0::157"
	C_LINE	0,"engine/wraparound.h::update_hud::0::157"
	C_LINE	7,"engine/wraparound.h::update_hud::0::157"

; Function wrap_around flags 0x00000200 __smallc 
; void wrap_around()
	C_LINE	7,"engine/wraparound.h::wrap_around::0::157"
._wrap_around
	ld	hl,(_p_x)
	ld	a,h
	rla
	jr	c,ASMPC+6
	or	l
	jr	nz,ASMPC+3
	scf
	jp	nc,i_251	;
	ld	hl,_p_vx
	ld	a,(hl)
	rla
	jp	nc,i_251	;
	defc	i_251 = i_250
.i_252_i_251
	ld	hl,14336	;const
	ld	(_p_x),hl
.i_250
	ld	hl,(_p_x)
	ld	de,14336
	ex	de,hl
	call	l_ge
	jp	nc,i_254	;
	ld	hl,_p_vx
	call	l_gchar
	ld	de,0
	ex	de,hl
	call	l_gt
	jp	nc,i_254	;
	defc	i_254 = i_253
.i_255_i_254
	ld	hl,0	;const
	ld	(_p_x),hl
.i_253
	ret


	C_LINE	214,"mk2.c::wrap_around::0::160"
	C_LINE	0,"mainloop/mainloop.h::wrap_around::0::160"
	C_LINE	0,"./mainloop/hide_sprites.h::wrap_around::0::160"
	C_LINE	1,"./mainloop/hide_sprites.h::wrap_around::0::160"

; Function hide_sprites flags 0x00000200 __smallc 
; void hide_sprites(unsigned char which_ones)
; parameter 'unsigned char which_ones' at sp+2 size(1)
	C_LINE	1,"./mainloop/hide_sprites.h::hide_sprites::0::160"
._hide_sprites
	ld	hl,2	;const
	add	hl,sp
	ld	a,(hl)
	and	a
	jp	nz,i_256	;
			ld  ix, (_sp_player)
			ld  iy, vpClipStruct
			ld  bc, 0
			ld  hl, 0xdede
			ld  de, 0
			call SPMoveSprAbs
.i_256
			xor a
		.hide_sprites_enems_loop
			ld  (_gpit), a
			sla a
			ld  c, a
			ld  b, 0
			ld  hl, _sp_moviles
			add hl, bc
			ld  e, (hl)
			inc hl
			ld  d, (hl)
			push de
			pop ix
			ld  iy, vpClipStruct
			ld  bc, 0
			ld  hl, 0xfefe	 
			ld  de, 0
			call SPMoveSprAbs
			ld  a, (_gpit)
			inc a
			cp  3
			jr  nz, hide_sprites_enems_loop
				ld  ix, (_sp_hitter)
				ld  iy, vpClipStruct
				ld  bc, 0
				ld  hl, 0xfefe
				ld  de, 0
				call SPMoveSprAbs
	ret


	C_LINE	8,"mainloop/mainloop.h::hide_sprites::0::162"
	C_LINE	12,"mainloop/mainloop.h::hide_sprites::0::162"

; Function main flags 0x00000000 __stdc 
; void main()
	C_LINE	12,"mainloop/mainloop.h::main::0::163"
._main
		di
	C_LINE	0,"./mainloop/mysystem.h::main::1::164"
	ld	hl,61937	;const
	push	hl
	call	sp_InitIM2
	pop	bc
	ld	hl,61937	;const
	push	hl
	call	sp_CreateGenericISR
	pop	bc
	ld	hl,255	;const
	push	hl
	ld	hl,_ISR
	push	hl
	call	sp_RegisterHook
	pop	bc
	pop	bc
	ld	hl,0	;const
	push	hl
	push	hl
	call	sp_Initialize
	pop	bc
	pop	bc
	ld	hl,0	;const
	push	hl
	call	sp_Border
	pop	bc
	ld	hl,0	;const
	push	hl
	ld	hl,40	;const
	push	hl
	ld	hl,14	;const
	push	hl
	ld	hl,_AD_FREE
	push	hl
	call	sp_AddMemory
	pop	bc
	pop	bc
	pop	bc
	pop	bc
	ld	hl,sp_JoyKeyboard
	ld	(_joyfunc),hl
	ld	hl,_tileset
	ld	(_gen_pt),hl
	xor	a
	ld	(_gpit),a
.i_259
	ld	hl,(_gpit)
	ld	h,0
	push	hl
	ld	hl,(_gen_pt)
	push	hl
	call	sp_TileArray
	pop	bc
	pop	bc
	ld	hl,(_gen_pt)
	ld	bc,8
	add	hl,bc
	ld	(_gen_pt),hl
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
.i_257
	ld	hl,(_gpit)
	ld	h,0
	ld	a,h
	or	l
	jp	nz,i_259	;EOS
.i_258
	C_LINE	22,"mainloop/mainloop.h::main::1::165"
	C_LINE	0,"./mainloop/sprdefs.h::main::1::165"
	ld	hl,0	;const
	push	hl
	ld	hl,3	;const
	push	hl
	ld	hl,_sprite_2_a
	push	hl
	call	sp_CreateSpr
	pop	bc
	pop	bc
	pop	bc
	ld	(_sp_player),hl
	push	hl
	ld	hl,_sprite_2_b
	push	hl
	call	sp_AddColSpr
	pop	bc
	pop	bc
	ld	hl,(_sp_player)
	push	hl
	ld	hl,_sprite_2_c
	push	hl
	call	sp_AddColSpr
	pop	bc
	pop	bc
	ld	hl,_sprite_2_a
	ld	(_p_n_f),hl
	ld	(_p_c_f),hl
	xor	a
	ld	(_gpit),a
	jp	i_262	;EOS
.i_260
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
.i_262
	ld	a,(_gpit)
	sub	3
	jp	nc,i_261	;
	ld	hl,_sp_moviles
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,0	;const
	push	hl
	ld	hl,3	;const
	push	hl
	ld	hl,_sprite_9_a
	push	hl
	call	sp_CreateSpr
	pop	bc
	pop	bc
	pop	bc
	pop	de
	call	l_pint
	ld	hl,_sp_moviles
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_sprite_9_b
	push	hl
	call	sp_AddColSpr
	pop	bc
	pop	bc
	ld	hl,_sp_moviles
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_sprite_9_c
	push	hl
	call	sp_AddColSpr
	pop	bc
	pop	bc
	ld	hl,_en_an_c_f
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ex	de,hl
	ld	hl,_sprite_9_a
	call	l_pint
	pop	de
	call	l_pint
	jp	i_260	;EOS
.i_261
	ld	hl,0	;const
	push	hl
	ld	hl,2	;const
	push	hl
	ld	hl,_sprite_sword_l
	push	hl
	call	sp_CreateSpr
	pop	bc
	pop	bc
	pop	bc
	ld	(_sp_hitter),hl
	push	hl
	ld	hl,_sprite_sword_l+32
	push	hl
	call	sp_AddColSpr
	pop	bc
	pop	bc
	ld	hl,_sprite_sword_l
	ld	(_hitter_c_f),hl
	C_LINE	25,"mainloop/mainloop.h::main::1::166"
			ei
	call	_cortina
	call	_backup_baddies
.i_263
	C_LINE	0,"./my/title_screen.h::main::2::167"
	call	sp_UpdateNow
	ld	hl,_s_title
	push	hl
	ld	hl,16384	;const
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	call	_select_joyfunc
	C_LINE	57,"mainloop/mainloop.h::main::2::167"
	C_LINE	0,"./mainloop/game_init.h::main::2::167"
	ld	hl,0	;const
	ld	a,l
	ld	(_script_result),a
	C_LINE	63,"mainloop/mainloop.h::main::2::167"
	C_LINE	0,"./mainloop/level_init.h::main::2::167"
	ld	hl,1	;const
	ld	a,l
	ld	(_playing),a
	call	_init_hotspots
	ld	hl,_main_script
	ld	(_main_script_offset),hl
	ld	hl,0	;const
	ld	a,l
	ld	(_n_pant),a
	call	_player_init
	xor	a
	ld	(_maincounter),a
	ld	(_script_result),a
	ld	hl,18	;const
	push	hl
	call	_run_script
	pop	bc
	ld	a,1
	ld	(_do_respawn),a
	ld	hl,255	;const
	ld	a,l
	ld	(_killed_old),a
	ld	a,l
	ld	(_life_old),a
	ld	(_keys_old),a
	ld	a,l
	ld	(_objs_old),a
	xor	a
	ld	(_success),a
	ld	a,255
	ld	(_o_pant),a
	ld	hl,0	;const
	ld	a,l
	ld	(_no_draw),a
	C_LINE	80,"mainloop/mainloop.h::main::2::168"
.i_265
	ld	hl,(_playing)
	ld	h,0
	ld	a,h
	or	l
	jp	z,i_266	;
	call	_read_controller
	C_LINE	0,"./mainloop/timer.h::main::3::169"
	ld	a,(_ctimer)
	and	a
	jp	z,i_267	;
	ld	hl,_ctimer+3
	inc	(hl)
	ld	a,(_ctimer+2)
	cp	(hl)
	jp	nz,i_268	;
	ld	hl,_ctimer+3
	ld	(hl),0
	ld	a,(_ctimer+1)
	and	a
	jp	z,i_269	;
	ld	hl,_ctimer+1
	dec	(hl)
	jp	i_270	;EOS
.i_269
	ld	hl,_ctimer+4
	ld	(hl),1
	ld	l,(hl)
	ld	h,0
.i_270
.i_268
.i_267
	ld	a,(_ctimer+4)
	and	a
	jp	z,i_271	;
	ld	hl,_ctimer+4
	ld	(hl),0
	ld	hl,21	;const
	push	hl
	call	_run_script
	pop	bc
	C_LINE	91,"mainloop/mainloop.h::main::3::174"
.i_271
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_o_pant)
	ld	h,0
	call	l_ne
	jp	nc,i_272	;
	C_LINE	0,"./my/before_flick.h::main::4::175"
	C_LINE	95,"mainloop/mainloop.h::main::4::175"
	ld	hl,(_n_pant)
	ld	h,0
	ld	a,l
	ld	(_o_pant),a
	call	_draw_scr
.i_272
	call	_update_hud
	ld	hl,_maincounter
	ld	a,(hl)
	inc	(hl)
	ld	hl,(_half_life)
	ld	h,0
	call	l_lneg
	ld	h,0
	ld	a,l
	ld	(_half_life),a
	call	_player_move
	ld	hl,(_hitter_on)
	ld	h,0
	ld	a,h
	or	l
	call	nz,_hitter_render
.i_273
	call	_enems_move
	call	_update_sprites
.i_274
	ld	hl,(_isrc)
	ld	h,0
	ld	a,l
	sub	2
	jp	nc,i_275	;
						halt
	jp	i_274	;EOS
.i_275
	ld	hl,0	;const
	ld	a,l
	ld	(_isrc),a
	call	sp_UpdateNow
	ld	a,(_p_state)
	and	a
	jp	z,i_276	;
	ld	hl,_p_state_ct
	ld	a,(hl)
	dec	(hl)
	ld	a,(_p_state_ct)
	and	a
	jp	nz,i_277	;
	ld	hl,0	;const
	ld	a,l
	ld	(_p_state),a
.i_277
	C_LINE	0,"./mainloop/hotspots.h::main::3::177"
.i_276
		ld  a, (_hotspot_x)
		ld  c, a
		ld  a, (_gpx)
					add 8
		cp  c
		jp  c, _hotspots_skip
		ld  a, (_gpx)
		ld  c, a
		ld  a, (_hotspot_x)
			add 8
		cp  c
		jp  c, _hotspots_skip
		ld  a, (_hotspot_y)
		ld  c, a
		ld  a, (_gpy)
			add 8
		cp  c
		jp  c, _hotspots_skip
		ld  a, (_gpy)
		ld  c, a
		ld  a, (_hotspot_y)
			add 8
		cp  c
		jp  c, _hotspots_skip			
	xor	a
	ld	(_gpit),a
	ld	hl,_hotspots
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,bc
	add	hl,bc
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	a,(hl)
	and	a
	jp	z,i_278	;
	ld	hl,_hotspots
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,bc
	add	hl,bc
	pop	de
	add	hl,de
	inc	hl
	ld	l,(hl)
	ld	h,0
.i_281
	ld	a,l
	cp	+(3% 256)
	jp	z,i_282	;
	cp	+(5% 256)
	jp	z,i_284	;
	jp	i_280	;EOS
.i_282
	ld	hl,(_p_life)
	ld	h,0
	ld	bc,5
	add	hl,bc
	ld	a,l
	ld	hl,_p_life
	ld	(hl),a
	ld	a,3
	sub	(hl)
	jp	nc,i_283	;
	ld	a,3
	ld	(_p_life),a
.i_283
	ld	hl,7	;const
	push	hl
	call	_beep_fx
	pop	bc
	jp	i_280	;EOS
.i_284
	ld	hl,(_ctimer+1)
	ld	h,0
	ld	de,99
	ex	de,hl
	and	a
	sbc	hl,de
	ld	a,30
	sub	l
	jp	nc,i_285	;
	ld	hl,_ctimer+1
	ld	a,(hl)
	add	a,30
	ld	(hl),a
	jp	i_286	;EOS
.i_285
	ld	hl,_ctimer+1
	ld	(hl),99
.i_286
	ld	hl,6	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_280
.i_278
	ld	a,(_gpit)
	and	a
	jp	nz,i_287	;
	ld	hl,(_hotspot_x)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(__x),a
	ld	hl,(_hotspot_y)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(__y),a
	ld	hl,(_orig_tile)
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_draw_invalidate_coloured_tile_gamearea
	ld	hl,_hotspots
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,bc
	add	hl,bc
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	(hl),0
	jp	i_288	;EOS
.i_287
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_288
	ld	hl,240	;const
	ld	a,l
	ld	(_hotspot_y),a
	._hotspots_skip
	C_LINE	192,"mainloop/mainloop.h::main::3::184"
	call	_do_ingame_scripting
	C_LINE	0,"./mainloop/win_game.h::main::3::184"
	ld	a,(_script_result)
	cp	1
	jp	z,i_290	;
	ld	hl,(_script_result)
	ld	a,2
	sub	l
	jp	nc,i_289	;
.i_290
	ld	a,1
	ld	(_success),a
	ld	hl,0	;const
	ld	a,l
	ld	(_playing),a
	C_LINE	216,"mainloop/mainloop.h::main::3::185"
	C_LINE	0,"./mainloop/game_over.h::main::3::185"
.i_289
	ld	a,(_p_life)
	and	a
	jp	nz,i_293	;
	ld	a,(_p_killme)
	and	a
	jp	z,i_293	;
	ld	hl,1	;const
	jr	i_294
.i_293
	ld	hl,0	;const
.i_294
	ld	a,h
	or	l
	jp	nz,i_295	;
	ld	a,(_script_result)
	cp	2
	jp	nz,i_292	;
.i_295
	ld	hl,0	;const
	ld	a,l
	ld	(_playing),a
	C_LINE	219,"mainloop/mainloop.h::main::3::186"
.i_292
	ld	hl,(_p_killme)
	ld	h,0
	ld	a,h
	or	l
	jp	z,i_297	;
	call	_player_kill
	ld	hl,0	;const
	ld	a,l
	ld	(_p_killme),a
.i_297
	call	_wrap_around
	jp	i_265	;EOS
.i_266
	ld	hl,0	;const
	push	hl
	call	_hide_sprites
	pop	bc
	call	sp_UpdateNow
	ld	hl,(_success)
	ld	h,0
	ld	a,h
	or	l
	jp	z,i_298	;
	call	_game_ending
	jp	i_299	;EOS
.i_298
	call	_game_over
.i_299
	ld	hl,500	;const
	push	hl
	call	_active_sleep
	pop	bc
	call	_cortina
	jp	i_263	;EOS
.i_264
	ret


	C_LINE	217,"mk2.c::main::0::189"
	C_LINE	0,"sound/music.h::main::0::189"
	C_LINE	8,"sound/music.h::main::0::189"
; *****************************************************************************
; * Phaser1 Engine, with synthesised drums
; *
; * Original code by Shiru - http: 
; * Modified by Chris Cowley
; *
; * Produced by Beepola v1.05.01
; ******************************************************************************
.musicstart
             LD    HL,MUSICDATA         ;  <- Pointer to Music Data. Change
                                        ;     this to play a different song
             LD   A,(HL)                         ; Get the loop start pointer
             LD   (PATTERN_LOOP_BEGIN),A
             INC  HL
             LD   A,(HL)                         ; Get the song end pointer
             LD   (PATTERN_LOOP_END),A
             INC  HL
             LD   E,(HL)
             INC  HL
             LD   D,(HL)
             INC  HL
             LD   (INSTRUM_TBL),HL
             LD   (CURRENT_INST),HL
             ADD  HL,DE
             LD   (PATTERN_ADDR),HL
             XOR  A
             LD   (PATTERN_PTR),A                ; Set the pattern pointer to zero
             LD   H,A
             LD   L,A
             LD   (NOTE_PTR),HL                  ; Set the note offset (within this pattern) to 0
.PLAYER
             ;DI
             PUSH IY
             ;LD   A,BORDER_COL
             xor a
             LD   H,$00
             LD   L,A
             LD   (CNT_1A),HL
             LD   (CNT_1B),HL
             LD   (DIV_1A),HL
             LD   (DIV_1B),HL
             LD   (CNT_2),HL
             LD   (DIV_2),HL
             LD   (OUT_1),A
             LD   (OUT_2),A
             JR   MAIN_LOOP
; ********************************************************************************************************
; * NEXT_PATTERN
; *
; * Select the next pattern in sequence (and handle looping if weve reached PATTERN_LOOP_END
; * Execution falls through to PLAYNOTE to play the first note from our next pattern
; ********************************************************************************************************
.NEXT_PATTERN
                          LD   A,(PATTERN_PTR)
                          INC  A
                          INC  A
                          DEFB $FE                           ; CP n
.PATTERN_LOOP_END         DEFB 0
                          JR   NZ,NO_PATTERN_LOOP
                          ; Handle Pattern Looping at and of song
                          DEFB $3E                           ; LD A,n
.PATTERN_LOOP_BEGIN       DEFB 0
.NO_PATTERN_LOOP          LD   (PATTERN_PTR),A
                          LD   HL,$0000
                          LD   (NOTE_PTR),HL   ; Start of pattern (NOTE_PTR = 0)
.MAIN_LOOP
             LD   IYL,0                        ; Set channel = 0
.READ_LOOP
             LD   HL,(PATTERN_ADDR)
             LD   A,(PATTERN_PTR)
             LD   E,A
             LD   D,0
             ADD  HL,DE
             LD   E,(HL)
             INC  HL
             LD   D,(HL)                       ; Now DE = Start of Pattern data
             LD   HL,(NOTE_PTR)
             INC  HL                           ; Increment the note pointer and...
             LD   (NOTE_PTR),HL                ; ..STORE it
             DEC  HL
             ADD  HL,DE                        ; Now HL = address of note data
             LD   A,(HL)
             OR   A
             JR   Z,NEXT_PATTERN               ; select next pattern
             BIT  7,A
             JP   Z,RENDER                     ; Play the currently defined note(S) and drum
             LD   IYH,A
             AND  $3F
             CP   $3C
             JP   NC,OTHER                     ; Other parameters
             ADD  A,A
             LD   B,0
             LD   C,A
             LD   HL,FREQ_TABLE
             ADD  HL,BC
             LD   E,(HL)
             INC  HL
             LD   D,(HL)
             LD   A,IYL                        ; IYL = 0 for channel 1, or = 1 for channel 2
             OR   A
             JR   NZ,SET_NOTE2
             LD   (DIV_1A),DE
             EX   DE,HL
             DEFB $DD,$21                      ; LD IX,nn
.CURRENT_INST
             DEFW $0000
             LD   A,(IX+$00)
             OR   A
             JR   Z,L809B                      ; Original code jumps into byte 2 of the DJNZ (invalid opcode FD)
             LD   B,A
.L8098       ADD  HL,HL
             DJNZ L8098
.L809B       LD   E,(IX+$01)
             LD   D,(IX+$02)
             ADD  HL,DE
             LD   (DIV_1B),HL
             LD   IYL,1                        ; Set channel = 1
             LD   A,IYH
             AND  $40
             JR   Z,READ_LOOP                  ; No phase reset
             LD   HL,OUT_1                     ; Reset phaser
             RES  4,(HL)
             LD   HL,$0000
             LD   (CNT_1A),HL
             LD   H,(IX+$03)
             LD   (CNT_1B),HL
             JR   READ_LOOP
.SET_NOTE2
             LD   (DIV_2),DE
             LD   A,IYH
             LD   HL,OUT_2
             RES  4,(HL)
             LD   HL,$0000
             LD   (CNT_2),HL
             JP   READ_LOOP
.SET_STOP
             LD   HL,$0000
             LD   A,IYL
             OR   A
             JR   NZ,SET_STOP2
             ; Stop channel 1 note
             LD   (DIV_1A),HL
             LD   (DIV_1B),HL
             LD   HL,OUT_1
             RES  4,(HL)
             LD   IYL,1
             JP   READ_LOOP
.SET_STOP2
             ; Stop channel 2 note
             LD   (DIV_2),HL
             LD   HL,OUT_2
             RES  4,(HL)
             JP   READ_LOOP
.OTHER       CP   $3C
             JR   Z,SET_STOP                   ; Stop note
             CP   $3E
             JR   Z,SKIP_CH1                   ; No changes to channel 1
             INC  HL                           ; Instrument change
             LD   L,(HL)
             LD   H,$00
             ADD  HL,HL
             LD   DE,(NOTE_PTR)
             INC  DE
             LD   (NOTE_PTR),DE                ; Increment the note pointer
             DEFB $01                          ; LD BC,nn
.INSTRUM_TBL
             DEFW $0000
             ADD  HL,BC
             LD   (CURRENT_INST),HL
             JP   READ_LOOP
.SKIP_CH1
             LD   IYL,$01
             JP   READ_LOOP
.EXIT_PLAYER
             LD   HL,$2758
             EXX
             POP  IY
             ;EI
             RET
.RENDER
             AND  $7F                          ; L813A
             CP   $76
             JP   NC,DRUMS
             LD   D,A
             EXX
             DEFB $21                          ; LD HL,nn
.CNT_1A      DEFW $0000
             DEFB $DD,$21                      ; LD IX,nn
.CNT_1B      DEFW $0000
             DEFB $01                          ; LD BC,nn
.DIV_1A      DEFW $0000
             DEFB $11                          ; LD DE,nn
.DIV_1B      DEFW $0000
             DEFB $3E                          ; LD A,n
.OUT_1       DEFB $0
             EXX
             EX   AF,AF ; beware!
             DEFB $21                          ; LD HL,nn
.CNT_2       DEFW $0000
             DEFB $01                          ; LD BC,nn
.DIV_2       DEFW $0000
             DEFB $3E                          ; LD A,n
.OUT_2       DEFB $00
.PLAY_NOTE
             ; Read keyboard
             LD   E,A
             XOR  A
             IN   A,($FE)
             OR   $E0
             INC  A
.PLAYER_WAIT_KEY
             JR   NZ,EXIT_PLAYER
             LD   A,E
             LD   E,0
.L8168       EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L8171
             JR   L8173
.L8171       XOR  $10
.L8173       ADD  IX,DE
             JR   C,L8179
             JR   L817B
.L8179       XOR  $10
.L817B       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L8184
             JR   L8186
.L8184       XOR  $10
.L8186       NOP
             JP   L818A
.L818A       EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L8193
             JR   L8195
.L8193       XOR  $10
.L8195       ADD  IX,DE
             JR   C,L819B
             JR   L819D
.L819B       XOR  $10
.L819D       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L81A6
             JR   L81A8
.L81A6       XOR  $10
.L81A8       NOP
             JP   L81AC
.L81AC       EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L81B5
             JR   L81B7
.L81B5       XOR  $10
.L81B7       ADD  IX,DE
             JR   C,L81BD
             JR   L81BF
.L81BD       XOR  $10
.L81BF       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L81C8
             JR   L81CA
.L81C8       XOR  $10
.L81CA       NOP
             JP   L81CE
.L81CE       EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L81D7
             JR   L81D9
.L81D7       XOR  $10
.L81D9       ADD  IX,DE
             JR   C,L81DF
             JR   L81E1
.L81DF       XOR  $10
.L81E1       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L81EA
             JR   L81EC
.L81EA       XOR  $10
.L81EC       DEC  E
             JP   NZ,L8168
             EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L81F9
             JR   L81FB
.L81F9       XOR  $10
.L81FB       ADD  IX,DE
             JR   C,L8201
             JR   L8203
.L8201       XOR  $10
.L8203       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L820C
             JR   L820E
.L820C       XOR  $10
.L820E       DEC  D
             JP   NZ,PLAY_NOTE
             LD   (CNT_2),HL
             LD   (OUT_2),A
             EXX
             EX   AF,AF ; beware!
             LD   (CNT_1A),HL
             LD   (CNT_1B),IX
             LD   (OUT_1),A
             JP   MAIN_LOOP
; ************************************************************
; * DRUMS - Synthesised
; ************************************************************
.DRUMS
             ADD  A,A                          ; On entry A=$75+Drum number (i.E. $76 to $7E)
             LD   B,0
             LD   C,A
             LD   HL,DRUM_TABLE - 236
             ADD  HL,BC
             LD   E,(HL)
             INC  HL
             LD   D,(HL)
             EX   DE,HL
             JP   (HL)
.DRUM_TONE1  LD   L,16
             JR   DRUM_TONE
.DRUM_TONE2  LD   L,12
             JR   DRUM_TONE
.DRUM_TONE3  LD   L,8
             JR   DRUM_TONE
.DRUM_TONE4  LD   L,6
             JR   DRUM_TONE
.DRUM_TONE5  LD   L,4
             JR   DRUM_TONE
.DRUM_TONE6  LD   L,2
.DRUM_TONE
             LD   DE,3700
             LD   BC,$0101
             xor a
.DT_LOOP0    OUT  ($FE),A
             DEC  B
             JR   NZ,DT_LOOP1
             XOR  16
             LD   B,C
             EX   AF,AF ; beware!
             LD   A,C
             ADD  A,L
             LD   C,A
             EX   AF,AF ; beware!
.DT_LOOP1    DEC  E
             JR   NZ,DT_LOOP0
             DEC  D
             JR   NZ,DT_LOOP0
             JP   MAIN_LOOP
.DRUM_NOISE1 LD   DE,2480
             LD   IXL,1
             JR   DRUM_NOISE
.DRUM_NOISE2 LD   DE,1070
             LD   IXL,10
             JR   DRUM_NOISE
.DRUM_NOISE3 LD   DE,365
             LD   IXL,101
.DRUM_NOISE
             LD   H,D
             LD   L,E
             xor a
             LD   C,A
.DN_LOOP0    LD   A,(HL)
             AND  16
             OR   C
             OUT  ($FE),A
             LD   B,IXL
.DN_LOOP1    DJNZ DN_LOOP1
             INC  HL
             DEC  E
             JR   NZ,DN_LOOP0
             DEC  D
             JR   NZ,DN_LOOP0
             JP   MAIN_LOOP
.PATTERN_ADDR   DEFW  $0000
.PATTERN_PTR    DEFB  0
.NOTE_PTR       DEFW  $0000
; **************************************************************
; * Frequency Table
; **************************************************************
.FREQ_TABLE
             DEFW 178,189,200,212,225,238,252,267,283,300,318,337
             DEFW 357,378,401,425,450,477,505,535,567,601,637,675
             DEFW 715,757,802,850,901,954,1011,1071,1135,1202,1274,1350
             DEFW 1430,1515,1605,1701,1802,1909,2023,2143,2270,2405,2548,2700
             DEFW 2860,3030,3211,3402,3604,3818,4046,4286,4541,4811,5097,5400
; *****************************************************************
; * Synth Drum Lookup Table
; *****************************************************************
.DRUM_TABLE
             DEFW DRUM_TONE1,DRUM_TONE2,DRUM_TONE3,DRUM_TONE4,DRUM_TONE5,DRUM_TONE6
             DEFW DRUM_NOISE1,DRUM_NOISE2,DRUM_NOISE3
.MUSICDATA
             DEFB 0     ; Pattern loop begin * 2
             DEFB 16    ; Song length * 2
             DEFW 12    ; Offset to start of song (length of instrument table)
             DEFB 0     ; Multiple
             DEFW 20    ; Detune
             DEFB 1     ; Phase
             DEFB 1     ; Multiple
             DEFW 5     ; Detune
             DEFB 1     ; Phase
             DEFB 0     ; Multiple
             DEFW 10    ; Detune
             DEFB 0     ; Phase
.PATTERNDATA        DEFW      PAT0
                    DEFW      PAT1
                    DEFW      PAT0
                    DEFW      PAT1
                    DEFW      PAT2
                    DEFW      PAT3
                    DEFW      PAT4
                    DEFW      PAT5
; *** Pattern data - $00 marks the end of a pattern ***
.PAT0
         DEFB $BD,0
         DEFB 164
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 164
         DEFB 147
         DEFB 124
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 171
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 157
         DEFB 126
     DEFB 4
         DEFB 164
         DEFB 123
     DEFB 4
         DEFB 190
         DEFB 156
         DEFB 124
     DEFB 4
         DEFB 164
         DEFB 122
     DEFB 4
         DEFB 164
         DEFB 157
         DEFB 123
     DEFB 4
         DEFB 171
         DEFB 152
         DEFB 121
     DEFB 4
         DEFB 190
         DEFB 124
     DEFB 4
         DEFB 169
         DEFB 159
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 157
         DEFB 126
     DEFB 4
         DEFB 168
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 156
         DEFB 124
     DEFB 4
         DEFB 190
         DEFB 123
     DEFB 4
         DEFB $00
.PAT1
         DEFB 162
         DEFB 145
         DEFB 118
     DEFB 4
         DEFB 162
         DEFB 145
         DEFB 124
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 169
         DEFB 145
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 157
         DEFB 126
     DEFB 4
         DEFB 162
         DEFB 123
     DEFB 4
         DEFB 190
         DEFB 156
         DEFB 124
     DEFB 4
         DEFB 162
         DEFB 122
     DEFB 4
         DEFB 162
         DEFB 157
         DEFB 124
     DEFB 4
         DEFB 169
         DEFB 156
         DEFB 121
     DEFB 4
         DEFB 190
         DEFB 124
     DEFB 4
         DEFB 168
         DEFB 156
         DEFB 118
     DEFB 4
         DEFB 169
         DEFB 157
         DEFB 126
     DEFB 4
         DEFB 168
         DEFB 156
         DEFB 118
     DEFB 4
         DEFB 171
         DEFB 159
         DEFB 124
     DEFB 4
         DEFB 190
         DEFB 123
     DEFB 4
         DEFB $00
.PAT2
         DEFB $BD,2
         DEFB 159
         DEFB 152
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 152
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 152
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 123
     DEFB 4
         DEFB 190
         DEFB 152
         DEFB 122
     DEFB 4
         DEFB 190
         DEFB 121
     DEFB 4
         DEFB 171
         DEFB 154
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 169
         DEFB 154
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 168
         DEFB 154
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 164
         DEFB 154
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 126
     DEFB 4
         DEFB $00
.PAT3
         DEFB 190
         DEFB 156
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 166
         DEFB 156
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 156
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 123
     DEFB 4
         DEFB 190
         DEFB 156
         DEFB 122
     DEFB 4
         DEFB 190
         DEFB 121
     DEFB 4
         DEFB 190
         DEFB 157
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 124
     DEFB 4
         DEFB 190
         DEFB 157
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 124
     DEFB 4
         DEFB 190
         DEFB 157
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 157
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 126
     DEFB 4
         DEFB $00
.PAT4
         DEFB 157
         DEFB 150
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 150
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 150
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 123
     DEFB 4
         DEFB 190
         DEFB 150
         DEFB 122
     DEFB 4
         DEFB 190
         DEFB 121
     DEFB 4
         DEFB $BD,4
         DEFB 169
         DEFB 150
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 168
         DEFB 150
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 150
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 169
         DEFB 150
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 126
     DEFB 4
         DEFB $00
.PAT5
         DEFB 171
         DEFB 152
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 166
         DEFB 152
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 152
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 123
     DEFB 4
         DEFB 169
         DEFB 152
         DEFB 122
     DEFB 4
         DEFB 190
         DEFB 121
     DEFB 4
         DEFB 168
         DEFB 154
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 124
     DEFB 4
         DEFB 190
         DEFB 154
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 124
     DEFB 4
         DEFB 168
         DEFB 154
         DEFB 126
     DEFB 4
         DEFB 169
         DEFB 126
     DEFB 4
         DEFB 164
         DEFB 154
         DEFB 126
     DEFB 4
         DEFB 190
         DEFB 126
     DEFB 4
         DEFB $00
	C_LINE	221,"mk2.c::main::0::189"
	SECTION	rodata_compiler
.i_1
	defm	"            "
	defb	0

	defm	"#$$$$$$$$$$$$$$$$$$$$$$$$%"
	defb	0

	defm	"&                        '"
	defb	0

	defm	"())))))))))))))))))))))))*"
	defb	0

	defm	"                          "
	defb	0

	defm	" GAME OVER! "
	defb	0

	defm	"LEVEL"
	defb	0


; --- Start of Static Variables ---

	SECTION	bss_compiler
._AD_FREE	defs	600
._keys	defs	10
._gen_pt	defs	2
._sp_player	defs	2
._sp_moviles	defs	6
._sp_hitter	defs	2
._enoffs	defs	1
._p_x	defs	2
._p_y	defs	2
._p_vx	defs	1
._p_vy	defs	1
._ptgmx	defs	1
._ptgmy	defs	1
._p_g	defs	1
._p_jmp_ct	defs	1
._p_c_f	defs	2
._p_n_f	defs	2
._p_jmp_on	defs	1
._p_frame	defs	1
._p_subframe	defs	1
._p_facing	defs	1
._p_state	defs	1
._p_state_ct	defs	1
._p_gotten	defs	1
._p_life	defs	1
._p_objs	defs	1
._p_keys	defs	1
._p_disparando	defs	1
._p_hitting	defs	1
._p_up	defs	1
._p_facing_v	defs	1
._p_facing_h	defs	1
._p_killme	defs	1
._cx1	defs	1
._cx2	defs	1
._cy1	defs	1
._cy2	defs	1
._at1	defs	1
._at2	defs	1
._ptx1	defs	1
._pty1	defs	1
._ptx2	defs	1
._pty2	defs	1
._en_an_base_frame	defs	3
._en_an_count	defs	3
._en_an_c_f	defs	6
._en_an_n_f	defs	6
._en_an_state	defs	3
._enemy_backup	defs	27
._en_an_x	defs	6
._en_an_y	defs	6
._en_an_vx	defs	3
._en_an_vy	defs	3
.__en_an_x	defs	2
.__en_an_y	defs	2
.__en_an_vx	defs	1
.__en_an_vy	defs	1
._pregotten	defs	1
._enemy_was_killed	defs	1
._hitter_on	defs	1
._hitter_type	defs	1
._hitter_frame	defs	1
._hitter_x	defs	1
._hitter_y	defs	1
._hitter_c_f	defs	2
._hitter_n_f	defs	2
._hitter_hit	defs	1
._map_attr	defs	150
._hotspot_x	defs	1
._hotspot_y	defs	1
._orig_tile	defs	1
._do_respawn	defs	1
._no_draw	defs	1
._flags	defs	32
._n_pant	defs	1
._o_pant	defs	1
._silent_level	defs	1
._is_rendering	defs	1
._maincounter	defs	1
._fzx1	defs	1
._fzy1	defs	1
._fzx2	defs	1
._fzy2	defs	1
._f_zone_ac	defs	1
._ctimer	defs	5
._key_jump	defs	2
._key_fire	defs	2
._p_engine	defs	1
._enoffsmasi	defs	1
._gpx	defs	1
._gpy	defs	1
._gpd	defs	1
._gpc	defs	1
._gpt	defs	1
._gps	defs	1
._rdx	defs	1
._rdy	defs	1
._rda	defs	1
._rdb	defs	1
._rds	defs	1
._gpxx	defs	1
._gpyy	defs	1
._gpcx	defs	1
._gpcy	defs	1
._possee	defs	1
._hit_v	defs	1
._hit_h	defs	1
._hit	defs	1
._wall_h	defs	1
._wall_v	defs	1
._gpaux	defs	1
.__en_x	defs	1
.__en_y	defs	1
.__en_x1	defs	1
.__en_y1	defs	1
.__en_x2	defs	1
.__en_y2	defs	1
.__en_t	defs	1
.__en_life	defs	1
.__en_mx	defs	1
.__en_my	defs	1
.__baddies_pointer	defs	2
._tocado	defs	1
._active	defs	1
._killable	defs	1
._animate	defs	1
._gpit	defs	1
._gpjt	defs	1
._map_pointer	defs	2
._enit	defs	1
.__val	defs	2
.__min	defs	2
.__max	defs	2
.__x	defs	1
.__y	defs	1
.__t	defs	1
.__n	defs	1
._gp_gen	defs	2
._pad0	defs	1
._pad_this_frame	defs	1
._action_pressed	defs	1
._success	defs	1
._playing	defs	1
._sc_x	defs	1
._sc_y	defs	1
._sc_n	defs	1
._sc_m	defs	1
._sc_c	defs	1
._main_script_offset	defs	2
._warp_to_level	defs	1
._exti	defs	1
._extx	defs	1
._exty	defs	1
._stepbystep	defs	1
._keyp	defs	1
._next_script	defs	2
._bs	defs	1
._objs_old	defs	1
._keys_old	defs	1
._life_old	defs	1
._killed_old	defs	1
._timer_old	defs	1
	SECTION	code_compiler


; --- Start of Scope Defns ---

	GLOBAL	_u_malloc
	GLOBAL	_u_free
	GLOBAL	sp_InitIM2
	GLOBAL	sp_InstallISR
	GLOBAL	sp_EmptyISR
	GLOBAL	sp_CreateGenericISR
	GLOBAL	sp_RegisterHook
	GLOBAL	sp_RegisterHookFirst
	GLOBAL	sp_RegisterHookLast
	GLOBAL	sp_RemoveHook
	GLOBAL	sp_Initialize
	GLOBAL	sp_SwapEndian
	GLOBAL	sp_Swap
	GLOBAL	sp_PFill
	GLOBAL	sp_StackSpace
	GLOBAL	sp_Random32
	GLOBAL	sp_Border
	GLOBAL	sp_inp
	GLOBAL	sp_outp
	GLOBAL	sp_IntRect
	GLOBAL	sp_IntLargeRect
	GLOBAL	sp_IntPtLargeRect
	GLOBAL	sp_IntIntervals
	GLOBAL	sp_IntPtInterval
	GLOBAL	sp_CreateSpr
	GLOBAL	sp_AddColSpr
	GLOBAL	sp_DeleteSpr
	GLOBAL	sp_IterateSprChar
	GLOBAL	sp_RemoveDList
	GLOBAL	sp_MoveSprAbs
	GLOBAL	sp_MoveSprAbsC
	GLOBAL	sp_MoveSprAbsNC
	GLOBAL	sp_MoveSprRel
	GLOBAL	sp_MoveSprRelC
	GLOBAL	sp_MoveSprRelNC
	GLOBAL	sp_PrintAt
	GLOBAL	sp_PrintAtInv
	GLOBAL	sp_ScreenStr
	GLOBAL	sp_PrintAtDiff
	GLOBAL	sp_PrintString
	GLOBAL	sp_ComputePos
	GLOBAL	sp_TileArray
	GLOBAL	sp_Pallette
	GLOBAL	sp_GetTiles
	GLOBAL	sp_PutTiles
	GLOBAL	sp_IterateDList
	GLOBAL	sp_AddMemory
	GLOBAL	sp_BlockAlloc
	GLOBAL	sp_BlockFit
	GLOBAL	sp_FreeBlock
	GLOBAL	sp_InitAlloc
	GLOBAL	sp_BlockCount
	GLOBAL	sp_Invalidate
	GLOBAL	sp_Validate
	GLOBAL	sp_ClearRect
	GLOBAL	sp_UpdateNow
	GLOBAL	sp_UpdateNowEx
	GLOBAL	sp_CompDListAddr
	GLOBAL	sp_CompDirtyAddr
	GLOBAL	sp_JoySinclair1
	GLOBAL	sp_JoySinclair2
	GLOBAL	sp_JoyTimexEither
	GLOBAL	sp_JoyTimexLeft
	GLOBAL	sp_JoyTimexRight
	GLOBAL	sp_JoyFuller
	GLOBAL	sp_JoyKempston
	GLOBAL	sp_JoyKeyboard
	GLOBAL	sp_WaitForKey
	GLOBAL	sp_WaitForNoKey
	GLOBAL	sp_Pause
	GLOBAL	sp_Wait
	GLOBAL	sp_LookupKey
	GLOBAL	sp_GetKey
	GLOBAL	sp_Inkey
	GLOBAL	sp_KeyPressed
	GLOBAL	sp_MouseAMXInit
	GLOBAL	sp_MouseAMX
	GLOBAL	sp_SetMousePosAMX
	GLOBAL	sp_MouseKempston
	GLOBAL	sp_SetMousePosKempston
	GLOBAL	sp_MouseSim
	GLOBAL	sp_SetMousePosSim
	GLOBAL	sp_CharDown
	GLOBAL	sp_CharLeft
	GLOBAL	sp_CharRight
	GLOBAL	sp_CharUp
	GLOBAL	sp_GetAttrAddr
	GLOBAL	sp_GetCharAddr
	GLOBAL	sp_GetScrnAddr
	GLOBAL	sp_PixelDown
	GLOBAL	sp_PixelUp
	GLOBAL	sp_PixelLeft
	GLOBAL	sp_PixelRight
	GLOBAL	sp_ListCreate
	GLOBAL	sp_ListCount
	GLOBAL	sp_ListFirst
	GLOBAL	sp_ListLast
	GLOBAL	sp_ListNext
	GLOBAL	sp_ListPrev
	GLOBAL	sp_ListCurr
	GLOBAL	sp_ListAdd
	GLOBAL	sp_ListInsert
	GLOBAL	sp_ListAppend
	GLOBAL	sp_ListPrepend
	GLOBAL	sp_ListRemove
	GLOBAL	sp_ListConcat
	GLOBAL	sp_ListFree
	GLOBAL	sp_ListTrim
	GLOBAL	sp_ListSearch
	GLOBAL	sp_HashCreate
	GLOBAL	sp_HashRemove
	GLOBAL	sp_HashLookup
	GLOBAL	sp_HashAdd
	GLOBAL	sp_HashDelete
	GLOBAL	sp_Heapify
	GLOBAL	sp_HeapSiftDown
	GLOBAL	sp_HeapSiftUp
	GLOBAL	sp_HeapAdd
	GLOBAL	sp_HeapExtract
	GLOBAL	sp_HuffCreate
	GLOBAL	sp_HuffDelete
	GLOBAL	sp_HuffAccumulate
	GLOBAL	sp_HuffExtract
	GLOBAL	sp_HuffSetState
	GLOBAL	sp_HuffGetState
	GLOBAL	sp_HuffDecode
	GLOBAL	sp_HuffEncode
	GLOBAL	_AD_FREE
	GLOBAL	_keyscancodes
	GLOBAL	_behs
	defc	_asm_int	= 23297
	defc	_asm_int_2	= 23299
	defc	_safe_byte	= 23301
	GLOBAL	_keys
	GLOBAL	_joyfunc
	GLOBAL	_joyfuncs
	GLOBAL	_gen_pt
	GLOBAL	_my_malloc
	GLOBAL	_sp_player
	GLOBAL	_sp_moviles
	GLOBAL	_sp_hitter
	GLOBAL	_enoffs
	GLOBAL	_half_life
	GLOBAL	_p_x
	GLOBAL	_p_y
	GLOBAL	_p_vx
	GLOBAL	_p_vy
	GLOBAL	_ptgmx
	GLOBAL	_ptgmy
	GLOBAL	_p_g
	GLOBAL	_p_jmp_ct
	GLOBAL	_p_c_f
	GLOBAL	_p_n_f
	GLOBAL	_p_jmp_on
	GLOBAL	_p_frame
	GLOBAL	_p_subframe
	GLOBAL	_p_facing
	GLOBAL	_p_state
	GLOBAL	_p_state_ct
	GLOBAL	_p_gotten
	GLOBAL	_p_life
	GLOBAL	_p_objs
	GLOBAL	_p_keys
	GLOBAL	_p_disparando
	GLOBAL	_p_hitting
	GLOBAL	_p_up
	GLOBAL	_p_facing_v
	GLOBAL	_p_facing_h
	GLOBAL	_p_killme
	GLOBAL	_cx1
	GLOBAL	_cx2
	GLOBAL	_cy1
	GLOBAL	_cy2
	GLOBAL	_at1
	GLOBAL	_at2
	GLOBAL	_ptx1
	GLOBAL	_pty1
	GLOBAL	_ptx2
	GLOBAL	_pty2
	GLOBAL	_en_an_base_frame
	GLOBAL	_en_an_count
	GLOBAL	_en_an_c_f
	GLOBAL	_en_an_n_f
	GLOBAL	_en_an_state
	GLOBAL	_enemy_backup
	GLOBAL	_en_an_x
	GLOBAL	_en_an_y
	GLOBAL	_en_an_vx
	GLOBAL	_en_an_vy
	GLOBAL	__en_an_x
	GLOBAL	__en_an_y
	GLOBAL	__en_an_vx
	GLOBAL	__en_an_vy
	GLOBAL	_pregotten
	GLOBAL	_enemy_was_killed
	GLOBAL	_hitter_on
	GLOBAL	_hitter_type
	GLOBAL	_hitter_frame
	GLOBAL	_hitter_x
	GLOBAL	_hitter_y
	GLOBAL	_hitter_c_f
	GLOBAL	_hitter_n_f
	GLOBAL	_hitter_hit
	GLOBAL	_map_attr
	defc	_map_buff	= 61697
	GLOBAL	_hotspot_x
	GLOBAL	_hotspot_y
	GLOBAL	_orig_tile
	GLOBAL	_do_respawn
	GLOBAL	_no_draw
	GLOBAL	_flags
	GLOBAL	_n_pant
	GLOBAL	_o_pant
	GLOBAL	_level
	GLOBAL	_silent_level
	GLOBAL	_is_rendering
	GLOBAL	_maincounter
	GLOBAL	_fzx1
	GLOBAL	_fzy1
	GLOBAL	_fzx2
	GLOBAL	_fzy2
	GLOBAL	_f_zone_ac
	GLOBAL	_ctimer
	GLOBAL	_key_jump
	GLOBAL	_key_fire
	GLOBAL	_do_gravity
	GLOBAL	_p_engine
	GLOBAL	_enoffsmasi
	GLOBAL	_invalidate_fire
	GLOBAL	_gpx
	GLOBAL	_gpy
	GLOBAL	_gpd
	GLOBAL	_gpc
	GLOBAL	_gpt
	GLOBAL	_gps
	GLOBAL	_rdx
	GLOBAL	_rdy
	GLOBAL	_rda
	GLOBAL	_rdb
	GLOBAL	_rds
	GLOBAL	_gpxx
	GLOBAL	_gpyy
	GLOBAL	_gpcx
	GLOBAL	_gpcy
	GLOBAL	_possee
	GLOBAL	_hit_v
	GLOBAL	_hit_h
	GLOBAL	_hit
	GLOBAL	_wall_h
	GLOBAL	_wall_v
	GLOBAL	_gpaux
	GLOBAL	__en_x
	GLOBAL	__en_y
	GLOBAL	__en_x1
	GLOBAL	__en_y1
	GLOBAL	__en_x2
	GLOBAL	__en_y2
	GLOBAL	__en_t
	GLOBAL	__en_life
	GLOBAL	__en_mx
	GLOBAL	__en_my
	GLOBAL	__baddies_pointer
	GLOBAL	_tocado
	GLOBAL	_active
	GLOBAL	_killable
	GLOBAL	_animate
	GLOBAL	_gpit
	GLOBAL	_gpjt
	GLOBAL	_map_pointer
	GLOBAL	_enit
	GLOBAL	__val
	GLOBAL	__min
	GLOBAL	__max
	GLOBAL	__x
	GLOBAL	__y
	GLOBAL	__t
	GLOBAL	__n
	GLOBAL	_gp_gen
	defc	_isrc	= 23296
	GLOBAL	_pad0
	GLOBAL	_pad_this_frame
	GLOBAL	_action_pressed
	GLOBAL	_success
	GLOBAL	_playing
	GLOBAL	_draw_scr_background
	GLOBAL	_draw_scr
	GLOBAL	_active_sleep
	GLOBAL	_run_fire_script
	GLOBAL	_cortina
	GLOBAL	_rand
	GLOBAL	_hide_sprites
	GLOBAL	_draw_coloured_tile
	GLOBAL	_draw_coloured_tile_gamearea
	GLOBAL	_collide_pixel
	GLOBAL	_attr
	GLOBAL	_print_number2
	GLOBAL	_update_sprites
	GLOBAL	_enems_move
	GLOBAL	_sc_x
	GLOBAL	_sc_y
	GLOBAL	_sc_n
	GLOBAL	_sc_m
	GLOBAL	_sc_c
	GLOBAL	_script_result
	GLOBAL	_sc_terminado
	GLOBAL	_sc_continuar
	GLOBAL	_main_script_offset
	GLOBAL	_main_script
	GLOBAL	_warp_to_level
	GLOBAL	_script
	GLOBAL	_ram_address
	GLOBAL	_ram_destination
	GLOBAL	_unpack
	GLOBAL	_s_title
	GLOBAL	_s_marco
	GLOBAL	_s_ending
	GLOBAL	_map
	GLOBAL	_tileset
	GLOBAL	_sprite_1_a
	GLOBAL	_sprite_1_b
	GLOBAL	_sprite_1_c
	GLOBAL	_sprite_2_a
	GLOBAL	_sprite_2_b
	GLOBAL	_sprite_2_c
	GLOBAL	_sprite_3_a
	GLOBAL	_sprite_3_b
	GLOBAL	_sprite_3_c
	GLOBAL	_sprite_4_a
	GLOBAL	_sprite_4_b
	GLOBAL	_sprite_4_c
	GLOBAL	_sprite_5_a
	GLOBAL	_sprite_5_b
	GLOBAL	_sprite_5_c
	GLOBAL	_sprite_6_a
	GLOBAL	_sprite_6_b
	GLOBAL	_sprite_6_c
	GLOBAL	_sprite_7_a
	GLOBAL	_sprite_7_b
	GLOBAL	_sprite_7_c
	GLOBAL	_sprite_8_a
	GLOBAL	_sprite_8_b
	GLOBAL	_sprite_8_c
	GLOBAL	_sprite_9_a
	GLOBAL	_sprite_9_b
	GLOBAL	_sprite_9_c
	GLOBAL	_sprite_10_a
	GLOBAL	_sprite_10_b
	GLOBAL	_sprite_10_c
	GLOBAL	_sprite_11_a
	GLOBAL	_sprite_11_b
	GLOBAL	_sprite_11_c
	GLOBAL	_sprite_12_a
	GLOBAL	_sprite_12_b
	GLOBAL	_sprite_12_c
	GLOBAL	_sprite_13_a
	GLOBAL	_sprite_13_b
	GLOBAL	_sprite_13_c
	GLOBAL	_sprite_14_a
	GLOBAL	_sprite_14_b
	GLOBAL	_sprite_14_c
	GLOBAL	_sprite_15_a
	GLOBAL	_sprite_15_b
	GLOBAL	_sprite_15_c
	GLOBAL	_sprite_16_a
	GLOBAL	_sprite_16_b
	GLOBAL	_sprite_16_c
	GLOBAL	_sprite_e
	GLOBAL	_sprite_17_a
	GLOBAL	_sprite_18_a
	GLOBAL	_sprite_sword_l
	GLOBAL	_sprite_sword_r
	GLOBAL	_sprite_sword_u
	GLOBAL	_baddies
	GLOBAL	_hotspots
	GLOBAL	_beep_fx
	GLOBAL	_ISR
	GLOBAL	_spacer
	GLOBAL	_invalidate_tile
	GLOBAL	_invalidate_viewport
	GLOBAL	_draw_invalidate_coloured_tile_gamearea
	GLOBAL	_print_str
	GLOBAL	_blackout_area
	GLOBAL	_utaux
	GLOBAL	_update_tile
	GLOBAL	_print_message
	GLOBAL	_read_controller
	GLOBAL	_button_pressed
	GLOBAL	_step
	GLOBAL	_addsign
	GLOBAL	_abs
	GLOBAL	_select_joyfunc
	defc	_textbuff	= 23302
	GLOBAL	_exti
	GLOBAL	_extx
	GLOBAL	_exty
	GLOBAL	_stepbystep
	GLOBAL	_keyp
	GLOBAL	_is_cutscene
	GLOBAL	_textos_load
	GLOBAL	_do_extern_action
	GLOBAL	_read_byte
	GLOBAL	_read_vbyte
	GLOBAL	_readxy
	GLOBAL	_stop_player
	GLOBAL	_reloc_player
	GLOBAL	_read_two_bytes_D_E
	GLOBAL	_next_script
	GLOBAL	_run_script
	GLOBAL	_run_entering_script
	GLOBAL	_do_ingame_scripting
	GLOBAL	_player_frames
	GLOBAL	_enem_frames
	GLOBAL	_cm_two_points
	GLOBAL	_qtile
	GLOBAL	_seed1
	GLOBAL	_seed2
	GLOBAL	_randres
	GLOBAL	_srand
	GLOBAL	_bs
	GLOBAL	_game_ending
	GLOBAL	_game_over
	GLOBAL	_init_baddies
	GLOBAL	_init_hotspots
	GLOBAL	_backup_baddies
	GLOBAL	_hoffs_x
	GLOBAL	_hoffs_y
	GLOBAL	_hitter_render
	GLOBAL	_player_init
	GLOBAL	_player_calc_bounding_box
	GLOBAL	_player_kill
	GLOBAL	_player_move
	GLOBAL	_distance
	GLOBAL	_enems_kill
	GLOBAL	_enems_init
	GLOBAL	_enems_move_spr_abs
	GLOBAL	_advance_worm
	GLOBAL	_objs_old
	GLOBAL	_keys_old
	GLOBAL	_life_old
	GLOBAL	_killed_old
	GLOBAL	_timer_old
	GLOBAL	_update_hud
	GLOBAL	_wrap_around
	GLOBAL	_main


; --- End of Scope Defns ---


; --- End of Compilation ---
