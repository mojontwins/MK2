;* * * * *  Small-C/Plus z88dk * * * * *
;  Version: 18462-8d70c5a-20210624
;
;	Reconstructed for z80 Module Assembler
;
;	Module compile time: Fri Mar 04 11:56:02 2022


	C_LINE	0,"mk2.c"

	MODULE	mk2_c


	INCLUDE "z80_crt0.hdr"


	C_LINE	0,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	26,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	27,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	32,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	33,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	133,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	150,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	165,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	175,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	189,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	196,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	204,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	215,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	221,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	234,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	240,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	251,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	257,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	268,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	277,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	285,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	398,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	399,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	400,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	401,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	402,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	403,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	404,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	405,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	410,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	411,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	412,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	413,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	414,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	415,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	416,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	417,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	418,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	423,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	424,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	425,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	426,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	427,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	432,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	433,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	434,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	435,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	437,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	438,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	439,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	440,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	441,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	442,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	443,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	448,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	449,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	450,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	451,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	452,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	453,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	454,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	455,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	456,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	457,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	458,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	464,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	465,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	466,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	467,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	468,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	469,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	474,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	475,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	476,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	477,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	478,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	479,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	480,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	485,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	486,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	487,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	488,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	489,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	490,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	491,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	492,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	493,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	494,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	495,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	496,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	497,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	498,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	499,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	500,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	501,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	502,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	503,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	504,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	505,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	506,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	507,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	512,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	513,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	514,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	515,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	516,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	517,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	518,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	519,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	520,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	521,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	522,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	541,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	542,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	543,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	544,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	545,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	546,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	547,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	548,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	549,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	550,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	551,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	552,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	553,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	554,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	556,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	557,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	563,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	564,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	565,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	566,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	567,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	580,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	581,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	582,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	583,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	584,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	612,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	613,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	614,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	615,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	617,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	618,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	619,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	620,"c:\z88dk\Lib\Config\\..\..\/include/spritepack.h"
	C_LINE	10,"mk2.c"
	C_LINE	13,"mk2.c"
		LIB SPMoveSprAbs
		LIB SPPrintAtInv
		LIB SPTileArray
		LIB SPInvalidate
		LIB SPValidate
		LIB SPCompDListAddr
	C_LINE	0,"my/config.h"
	C_LINE	39,"my/config.h"
	C_LINE	128,"my/config.h"
	SECTION	data_compiler
._keyscancodes
	defw	763
	defw	765
	defw	509
	defw	1277
	defw	383
	defw	0
	defw	507
	defw	509
	defw	735
	defw	479
	defw	383
	defw	0
	SECTION	code_compiler
	C_LINE	22,"mk2.c"
	C_LINE	0,"my/sfx_config.h"
	C_LINE	23,"mk2.c"
	C_LINE	0,"definitions.h"
	C_LINE	55,"definitions.h"
	C_LINE	56,"definitions.h"
	C_LINE	57,"definitions.h"
	C_LINE	61,"definitions.h"
	C_LINE	62,"definitions.h"
	SECTION	data_compiler
._joyfunc
	defw	sp_JoyKeyboard + 0
	SECTION	code_compiler
	C_LINE	64,"definitions.h"
	SECTION	rodata_compiler
._joyfuncs
	defw	sp_JoyKeyboard + 0
	defw	sp_JoyKeyboard + 0
	defw	sp_JoyKempston + 0
	defw	sp_JoySinclair1 + 0
	SECTION	code_compiler
	C_LINE	68,"definitions.h"
	C_LINE	70,"definitions.h"

; Function my_malloc flags 0x00000200 __smallc 
; void * my_malloc(unsigned int bytes)
; parameter 'unsigned int bytes' at sp+2 size(2)
	C_LINE	70,"definitions.h::my_malloc::0::0"
._my_malloc
	ld	hl,0	;const
	push	hl
	call	sp_BlockAlloc
	pop	bc
	ret


	C_LINE	74,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._u_malloc
	defw	_my_malloc + 0
	SECTION	code_compiler
	C_LINE	75,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._u_free
	defw	sp_FreeBlock + 0
	SECTION	code_compiler
	C_LINE	77,"definitions.h::my_malloc::0::1"
	C_LINE	78,"definitions.h::my_malloc::0::1"
	C_LINE	97,"definitions.h::my_malloc::0::1"
	.vpClipStruct defb  2 ,  2  + 20,  1 ,  1  + 30
	.fsClipStruct defb 0, 24, 0, 32
	C_LINE	104,"definitions.h::my_malloc::0::1"
	C_LINE	108,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._half_life
	defb	0
	SECTION	code_compiler
	C_LINE	111,"definitions.h::my_malloc::0::1"
	C_LINE	113,"definitions.h::my_malloc::0::1"
	C_LINE	119,"definitions.h::my_malloc::0::1"
	C_LINE	126,"definitions.h::my_malloc::0::1"
	C_LINE	127,"definitions.h::my_malloc::0::1"
	C_LINE	128,"definitions.h::my_malloc::0::1"
	C_LINE	129,"definitions.h::my_malloc::0::1"
	C_LINE	130,"definitions.h::my_malloc::0::1"
	C_LINE	131,"definitions.h::my_malloc::0::1"
	C_LINE	132,"definitions.h::my_malloc::0::1"
	C_LINE	133,"definitions.h::my_malloc::0::1"
	C_LINE	135,"definitions.h::my_malloc::0::1"
	C_LINE	137,"definitions.h::my_malloc::0::1"
	C_LINE	144,"definitions.h::my_malloc::0::1"
	C_LINE	145,"definitions.h::my_malloc::0::1"
	C_LINE	167,"definitions.h::my_malloc::0::1"
	C_LINE	168,"definitions.h::my_malloc::0::1"
	C_LINE	178,"definitions.h::my_malloc::0::1"
	C_LINE	180,"definitions.h::my_malloc::0::1"
	C_LINE	181,"definitions.h::my_malloc::0::1"
	C_LINE	182,"definitions.h::my_malloc::0::1"
	C_LINE	222,"definitions.h::my_malloc::0::1"
	C_LINE	254,"definitions.h::my_malloc::0::1"
	C_LINE	258,"definitions.h::my_malloc::0::1"
	C_LINE	262,"definitions.h::my_malloc::0::1"
	C_LINE	263,"definitions.h::my_malloc::0::1"
	C_LINE	264,"definitions.h::my_malloc::0::1"
	C_LINE	265,"definitions.h::my_malloc::0::1"
	C_LINE	266,"definitions.h::my_malloc::0::1"
	C_LINE	274,"definitions.h::my_malloc::0::1"
	C_LINE	275,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._level
	defb	0
	SECTION	code_compiler
	C_LINE	276,"definitions.h::my_malloc::0::1"
	C_LINE	277,"definitions.h::my_malloc::0::1"
	C_LINE	279,"definitions.h::my_malloc::0::1"
	C_LINE	326,"definitions.h::my_malloc::0::1"
	C_LINE	329,"definitions.h::my_malloc::0::1"
	SECTION	data_compiler
._do_gravity
	defb	1
	SECTION	code_compiler
	C_LINE	336,"definitions.h::my_malloc::0::1"
	C_LINE	348,"definitions.h::my_malloc::0::1"
	C_LINE	349,"definitions.h::my_malloc::0::1"
	C_LINE	350,"definitions.h::my_malloc::0::1"
	C_LINE	351,"definitions.h::my_malloc::0::1"
	C_LINE	352,"definitions.h::my_malloc::0::1"
	C_LINE	353,"definitions.h::my_malloc::0::1"
	C_LINE	354,"definitions.h::my_malloc::0::1"
	C_LINE	355,"definitions.h::my_malloc::0::1"
	C_LINE	356,"definitions.h::my_malloc::0::1"
	C_LINE	357,"definitions.h::my_malloc::0::1"
	C_LINE	358,"definitions.h::my_malloc::0::1"
	C_LINE	359,"definitions.h::my_malloc::0::1"
	C_LINE	360,"definitions.h::my_malloc::0::1"
	C_LINE	363,"definitions.h::my_malloc::0::1"
	C_LINE	364,"definitions.h::my_malloc::0::1"
	C_LINE	365,"definitions.h::my_malloc::0::1"
	C_LINE	366,"definitions.h::my_malloc::0::1"
	C_LINE	369,"definitions.h::my_malloc::0::1"
	C_LINE	370,"definitions.h::my_malloc::0::1"
	C_LINE	371,"definitions.h::my_malloc::0::1"
	C_LINE	375,"definitions.h::my_malloc::0::1"
	C_LINE	376,"definitions.h::my_malloc::0::1"
	C_LINE	378,"definitions.h::my_malloc::0::1"
	C_LINE	390,"definitions.h::my_malloc::0::1"
	C_LINE	393,"definitions.h::my_malloc::0::1"
	C_LINE	399,"definitions.h::my_malloc::0::1"
	C_LINE	406,"definitions.h::my_malloc::0::1"
	C_LINE	409,"definitions.h::my_malloc::0::1"
	C_LINE	410,"definitions.h::my_malloc::0::1"
	C_LINE	27,"mk2.c::my_malloc::0::1"
	C_LINE	0,"autodefs.h::my_malloc::0::1"
	C_LINE	31,"autodefs.h::my_malloc::0::1"
	C_LINE	32,"autodefs.h::my_malloc::0::1"
	C_LINE	34,"autodefs.h::my_malloc::0::1"
	C_LINE	35,"autodefs.h::my_malloc::0::1"
	C_LINE	36,"autodefs.h::my_malloc::0::1"
	C_LINE	37,"autodefs.h::my_malloc::0::1"
	C_LINE	38,"autodefs.h::my_malloc::0::1"
	C_LINE	39,"autodefs.h::my_malloc::0::1"
	C_LINE	40,"autodefs.h::my_malloc::0::1"
	C_LINE	41,"autodefs.h::my_malloc::0::1"
	C_LINE	43,"autodefs.h::my_malloc::0::1"
	C_LINE	44,"autodefs.h::my_malloc::0::1"
	C_LINE	28,"mk2.c::my_malloc::0::1"
	C_LINE	0,"system/aplib.h::my_malloc::0::1"
	C_LINE	7,"system/aplib.h::my_malloc::0::1"
	C_LINE	8,"system/aplib.h::my_malloc::0::1"
	C_LINE	12,"system/aplib.h::my_malloc::0::1"
; aPPack decompressor
; original source by dwedit
; very slightly adapted by utopian
; optimized by Metalbrain
;hl = source
;de = dest
.depack		ld	ixl,128
.apbranch1	ldi
.aploop0	ld	ixh,1		;LWM = 0
.aploop		call 	ap_getbit
		jr 	nc,apbranch1
		call 	ap_getbit
		jr 	nc,apbranch2
		ld 	b,0
		call 	ap_getbit
		jr 	nc,apbranch3
		ld	c,16		;get an offset
.apget4bits	call 	ap_getbit
		rl 	c
		jr	nc,apget4bits
		jr 	nz,apbranch4
		ld 	a,b
.apwritebyte	ld 	(de),a		;write a 0
		inc 	de
		jr	aploop0
.apbranch4	and	a
		ex 	de,hl 		;write a previous byte (1-15 away from dest)
		sbc 	hl,bc
		ld 	a,(hl)
		add	hl,bc
		ex 	de,hl
		jr	apwritebyte
.apbranch3	ld 	c,(hl)		;use 7 bit offset, length = 2 or 3
		inc 	hl
		rr 	c
		ret 	z		;if a zero is encountered here, it is EOF
		ld	a,2
		adc	a,b
		push 	hl
		ld	iyh,b
		ld	iyl,c
		ld 	h,d
		ld 	l,e
		sbc 	hl,bc
		ld 	c,a
		jr	ap_finishup2
.apbranch2	call 	ap_getgamma	;use a gamma code * 256 for offset, another gamma code for length
		dec 	c
		ld	a,c
		sub	ixh
		jr 	z,ap_r0_gamma		;if gamma code is 2, use old r0 offset,
		dec 	a
		;do I even need this code?
		;bc=bc*256+(hl), lazy 16bit way
		ld 	b,a
		ld 	c,(hl)
		inc 	hl
		ld	iyh,b
		ld	iyl,c
		push 	bc
		call 	ap_getgamma
		ex 	(sp),hl		;bc = len, hl=offs
		push 	de
		ex 	de,hl
		ld	a,4
		cp	d
		jr 	nc,apskip2
		inc 	bc
		or	a
.apskip2	ld 	hl,127
		sbc 	hl,de
		jr 	c,apskip3
		inc 	bc
		inc 	bc
.apskip3		pop 	hl		;bc = len, de = offs, hl=junk
		push 	hl
		or 	a
.ap_finishup	sbc 	hl,de
		pop 	de		;hl=dest-offs, bc=len, de = dest
.ap_finishup2	ldir
		pop 	hl
		ld	ixh,b
		jr 	aploop
.ap_r0_gamma	call 	ap_getgamma		;and a new gamma code for length
		push 	hl
		push 	de
		ex	de,hl
		ld	d,iyh
		ld	e,iyl
		jr 	ap_finishup
.ap_getbit	ld	a,ixl
		add	a,a
		ld	ixl,a
		ret	nz
		ld	a,(hl)
		inc	hl
		rla
		ld	ixl,a
		ret
.ap_getgamma	ld 	bc,1
.ap_getgammaloop	call 	ap_getbit
		rl 	c
		rl 	b
		call 	ap_getbit
		jr 	c,ap_getgammaloop
		ret
	C_LINE	136,"system/aplib.h::my_malloc::0::1"
	._ram_address
		defw 0
	._ram_destination
		defw 0
	C_LINE	167,"system/aplib.h::my_malloc::0::1"

; Function unpack flags 0x00000200 __smallc 
; void unpack(unsigned int address, unsigned int destination)
; parameter 'unsigned int destination' at sp+2 size(2)
; parameter 'unsigned int address' at sp+4 size(2)
	C_LINE	167,"system/aplib.h::unpack::0::1"
._unpack
	ld	hl,4	;const
	add	hl,sp
	call	l_gint	;
	ld	a,h
	or	l
	jp	z,i_10	;
	ld	de,_ram_address
	ld	hl,4	;const
	add	hl,sp
	ldi
	ldi
	ld	de,_ram_destination
	pop	bc
	pop	hl
	push	hl
	push	bc
	call	l_pint
			ld hl, (_ram_address)
			ld de, (_ram_destination)
			call depack
.i_10
	ret


	C_LINE	38,"mk2.c::unpack::0::3"
	C_LINE	0,"assets/pantallas.h::unpack::0::3"
	C_LINE	8,"assets/pantallas.h::unpack::0::3"
	C_LINE	9,"assets/pantallas.h::unpack::0::3"
	C_LINE	10,"assets/pantallas.h::unpack::0::3"
	C_LINE	12,"assets/pantallas.h::unpack::0::3"
	._s_title
		BINARY "../bin/title.bin"
	._s_marco
	C_LINE	22,"assets/pantallas.h::unpack::0::3"
	._s_ending
		BINARY "../bin/ending.bin"
	C_LINE	39,"mk2.c::unpack::0::3"
	C_LINE	0,"assets/levels.h::unpack::0::3"
	C_LINE	11,"assets/levels.h::unpack::0::3"
	C_LINE	15,"assets/levels.h::unpack::0::3"
	C_LINE	22,"assets/levels.h::unpack::0::3"
	C_LINE	26,"assets/levels.h::unpack::0::3"
	C_LINE	45,"assets/levels.h::unpack::0::3"
	C_LINE	71,"assets/levels.h::unpack::0::3"
	C_LINE	72,"assets/levels.h::unpack::0::3"
	._level_data defs 16
	C_LINE	78,"assets/levels.h::unpack::0::3"
	C_LINE	79,"assets/levels.h::unpack::0::3"
	._map 
		defs 1800 		 
	C_LINE	86,"assets/levels.h::unpack::0::3"
	C_LINE	87,"assets/levels.h::unpack::0::3"
		._bolts 
			defs 4* 32 
	C_LINE	94,"assets/levels.h::unpack::0::3"
	C_LINE	95,"assets/levels.h::unpack::0::3"
	._baddies 
		defs  4  *  7  * 3 * 12
	C_LINE	102,"assets/levels.h::unpack::0::3"
	C_LINE	103,"assets/levels.h::unpack::0::3"
		._hotspots defs  4  *  7  * 3
	C_LINE	109,"assets/levels.h::unpack::0::3"
	C_LINE	110,"assets/levels.h::unpack::0::3"
	._behs 
		defs 48
	C_LINE	117,"assets/levels.h::unpack::0::3"
	C_LINE	118,"assets/levels.h::unpack::0::3"
	._tileset
		BINARY "../bin/font.bin"
		defs 192*8+256
	C_LINE	130,"assets/levels.h::unpack::0::3"
	C_LINE	131,"assets/levels.h::unpack::0::3"
	C_LINE	132,"assets/levels.h::unpack::0::3"
	C_LINE	133,"assets/levels.h::unpack::0::3"
	C_LINE	134,"assets/levels.h::unpack::0::3"
	C_LINE	135,"assets/levels.h::unpack::0::3"
	C_LINE	136,"assets/levels.h::unpack::0::3"
	C_LINE	137,"assets/levels.h::unpack::0::3"
	C_LINE	138,"assets/levels.h::unpack::0::3"
	C_LINE	139,"assets/levels.h::unpack::0::3"
	C_LINE	140,"assets/levels.h::unpack::0::3"
	C_LINE	141,"assets/levels.h::unpack::0::3"
	C_LINE	143,"assets/levels.h::unpack::0::3"
	._level0_map 
		BINARY "../bin/level0.map.c.bin"
	._level1_map
		BINARY "../bin/level1.map.c.bin"
	._level0_bolts
		BINARY "../bin/level0.locks.c.bin"
	._level1_bolts
		BINARY "../bin/level1.locks.c.bin"
	._level0_enems
		BINARY "../bin/level0.enems.c.bin"
	._level1_enems
		BINARY "../bin/level1.enems.c.bin"
	._level0_hotspots
		BINARY "../bin/level0.hotspots.c.bin"
	._level1_hotspots
		BINARY "../bin/level1.hotspots.c.bin"
	._level0_behs
		BINARY "../bin/level0.behs.c.bin"
	._level1_behs
		BINARY "../bin/level1.behs.c.bin"
	._level0_ts
		BINARY "../bin/level0.ts.c.bin"
	._level1_ts
		BINARY "../bin/level1.ts.c.bin"
	C_LINE	174,"assets/levels.h::unpack::0::3"
	SECTION	data_compiler
._levels
	defb	4
	defb	7
	defb	16
	defb	4
	defb	5
	defb	99
	defb	12
	defb	0
	defb	1
	defw	_level0_map + 0
	defw	_level0_bolts + 0
	defw	_level0_enems + 0
	defw	_level0_hotspots + 0
	defw	_level0_behs + 0
	defw	_level0_ts + 0
	defb	4
	defb	7
	defb	0
	defb	1
	defb	5
	defb	99
	defb	12
	defb	0
	defb	1
	defw	_level1_map + 0
	defw	_level1_bolts + 0
	defw	_level1_enems + 0
	defw	_level1_hotspots + 0
	defw	_level1_behs + 0
	defw	_level1_ts + 0
	SECTION	code_compiler
	C_LINE	0,"./assets/sprites.h::unpack::0::3"
	C_LINE	5,"./assets/sprites.h::unpack::0::3"
	C_LINE	6,"./assets/sprites.h::unpack::0::3"
	C_LINE	7,"./assets/sprites.h::unpack::0::3"
	C_LINE	8,"./assets/sprites.h::unpack::0::3"
	C_LINE	9,"./assets/sprites.h::unpack::0::3"
	C_LINE	10,"./assets/sprites.h::unpack::0::3"
	C_LINE	11,"./assets/sprites.h::unpack::0::3"
	C_LINE	12,"./assets/sprites.h::unpack::0::3"
	C_LINE	13,"./assets/sprites.h::unpack::0::3"
	C_LINE	14,"./assets/sprites.h::unpack::0::3"
	C_LINE	15,"./assets/sprites.h::unpack::0::3"
	C_LINE	16,"./assets/sprites.h::unpack::0::3"
	C_LINE	17,"./assets/sprites.h::unpack::0::3"
	C_LINE	18,"./assets/sprites.h::unpack::0::3"
	C_LINE	19,"./assets/sprites.h::unpack::0::3"
	C_LINE	20,"./assets/sprites.h::unpack::0::3"
	C_LINE	21,"./assets/sprites.h::unpack::0::3"
	C_LINE	22,"./assets/sprites.h::unpack::0::3"
	C_LINE	23,"./assets/sprites.h::unpack::0::3"
	C_LINE	24,"./assets/sprites.h::unpack::0::3"
	C_LINE	25,"./assets/sprites.h::unpack::0::3"
	C_LINE	26,"./assets/sprites.h::unpack::0::3"
	C_LINE	27,"./assets/sprites.h::unpack::0::3"
	C_LINE	28,"./assets/sprites.h::unpack::0::3"
	C_LINE	29,"./assets/sprites.h::unpack::0::3"
	C_LINE	30,"./assets/sprites.h::unpack::0::3"
	C_LINE	31,"./assets/sprites.h::unpack::0::3"
	C_LINE	32,"./assets/sprites.h::unpack::0::3"
	C_LINE	33,"./assets/sprites.h::unpack::0::3"
	C_LINE	34,"./assets/sprites.h::unpack::0::3"
	C_LINE	35,"./assets/sprites.h::unpack::0::3"
	C_LINE	36,"./assets/sprites.h::unpack::0::3"
	C_LINE	37,"./assets/sprites.h::unpack::0::3"
	C_LINE	38,"./assets/sprites.h::unpack::0::3"
	C_LINE	39,"./assets/sprites.h::unpack::0::3"
	C_LINE	40,"./assets/sprites.h::unpack::0::3"
	C_LINE	41,"./assets/sprites.h::unpack::0::3"
	C_LINE	42,"./assets/sprites.h::unpack::0::3"
	C_LINE	43,"./assets/sprites.h::unpack::0::3"
	C_LINE	44,"./assets/sprites.h::unpack::0::3"
	C_LINE	45,"./assets/sprites.h::unpack::0::3"
	C_LINE	46,"./assets/sprites.h::unpack::0::3"
	C_LINE	47,"./assets/sprites.h::unpack::0::3"
	C_LINE	48,"./assets/sprites.h::unpack::0::3"
	C_LINE	49,"./assets/sprites.h::unpack::0::3"
	C_LINE	50,"./assets/sprites.h::unpack::0::3"
	C_LINE	51,"./assets/sprites.h::unpack::0::3"
	C_LINE	52,"./assets/sprites.h::unpack::0::3"
	C_LINE	54,"./assets/sprites.h::unpack::0::3"
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_1_a
        defb 0, 240
        defb 3, 224
        defb 6, 192
        defb 13, 192
        defb 11, 192
        defb 11, 192
        defb 15, 128
        defb 3, 0
        defb 60, 0
        defb 127, 0
        defb 103, 0
        defb 7, 0
        defb 3, 0
        defb 126, 0
        defb 124, 0
        defb 64, 0
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_1_b
        defb 0, 15
        defb 224, 7
        defb 0, 3
        defb 16, 3
        defb 80, 3
        defb 80, 3
        defb 240, 3
        defb 224, 1
        defb 24, 0
        defb 252, 0
        defb 236, 0
        defb 226, 0
        defb 214, 0
        defb 46, 0
        defb 0, 0
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_1_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_2_a
        defb 3, 224
        defb 6, 192
        defb 13, 192
        defb 11, 192
        defb 11, 192
        defb 15, 192
        defb 3, 192
        defb 12, 128
        defb 31, 0
        defb 55, 0
        defb 55, 0
        defb 54, 0
        defb 6, 0
        defb 6, 224
        defb 6, 224
        defb 7, 224
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_2_b
        defb 224, 7
        defb 0, 3
        defb 16, 3
        defb 80, 3
        defb 80, 3
        defb 240, 3
        defb 224, 3
        defb 16, 3
        defb 248, 1
        defb 232, 1
        defb 232, 1
        defb 200, 1
        defb 96, 1
        defb 96, 7
        defb 96, 7
        defb 112, 3
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_2_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_3_a
        defb 0, 240
        defb 3, 224
        defb 6, 192
        defb 13, 192
        defb 11, 192
        defb 11, 192
        defb 15, 192
        defb 3, 192
        defb 12, 192
        defb 15, 192
        defb 7, 192
        defb 8, 128
        defb 23, 0
        defb 43, 0
        defb 48, 0
        defb 32, 2
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_3_b
        defb 0, 15
        defb 224, 7
        defb 0, 3
        defb 16, 3
        defb 80, 3
        defb 80, 3
        defb 240, 3
        defb 224, 3
        defb 16, 3
        defb 176, 3
        defb 176, 3
        defb 96, 0
        defb 228, 0
        defb 252, 0
        defb 124, 0
        defb 0, 0
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_3_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_4_a
        defb 0, 240
        defb 3, 224
        defb 6, 192
        defb 13, 192
        defb 11, 192
        defb 11, 192
        defb 15, 192
        defb 3, 192
        defb 12, 0
        defb 127, 0
        defb 103, 0
        defb 7, 0
        defb 31, 128
        defb 56, 0
        defb 48, 1
        defb 0, 3
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_4_b
        defb 0, 15
        defb 224, 7
        defb 0, 3
        defb 16, 3
        defb 80, 3
        defb 80, 3
        defb 240, 3
        defb 224, 3
        defb 16, 0
        defb 254, 0
        defb 230, 0
        defb 224, 0
        defb 248, 1
        defb 28, 0
        defb 12, 128
        defb 0, 192
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_4_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_5_a
        defb 0, 240
        defb 7, 224
        defb 0, 192
        defb 8, 192
        defb 10, 192
        defb 10, 192
        defb 15, 192
        defb 7, 128
        defb 24, 0
        defb 63, 0
        defb 55, 0
        defb 71, 0
        defb 107, 0
        defb 116, 0
        defb 0, 0
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_5_b
        defb 0, 15
        defb 192, 7
        defb 96, 3
        defb 176, 3
        defb 208, 3
        defb 208, 3
        defb 240, 1
        defb 192, 0
        defb 60, 0
        defb 254, 0
        defb 230, 0
        defb 224, 0
        defb 192, 0
        defb 126, 0
        defb 62, 0
        defb 2, 0
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_5_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_6_a
        defb 7, 224
        defb 0, 192
        defb 8, 192
        defb 10, 192
        defb 10, 192
        defb 15, 192
        defb 7, 192
        defb 8, 192
        defb 31, 128
        defb 23, 128
        defb 23, 128
        defb 19, 128
        defb 6, 128
        defb 6, 224
        defb 6, 224
        defb 14, 192
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_6_b
        defb 192, 7
        defb 96, 3
        defb 176, 3
        defb 208, 3
        defb 208, 3
        defb 240, 3
        defb 192, 3
        defb 48, 1
        defb 248, 0
        defb 236, 0
        defb 236, 0
        defb 108, 0
        defb 96, 0
        defb 96, 7
        defb 96, 7
        defb 224, 7
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_6_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_7_a
        defb 0, 240
        defb 7, 224
        defb 0, 192
        defb 8, 192
        defb 10, 192
        defb 10, 192
        defb 15, 192
        defb 7, 192
        defb 8, 192
        defb 13, 192
        defb 13, 192
        defb 6, 0
        defb 39, 0
        defb 63, 0
        defb 62, 0
        defb 0, 0
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_7_b
        defb 0, 15
        defb 192, 7
        defb 96, 3
        defb 176, 3
        defb 208, 3
        defb 208, 3
        defb 240, 3
        defb 192, 3
        defb 48, 3
        defb 240, 3
        defb 224, 3
        defb 16, 1
        defb 232, 0
        defb 212, 0
        defb 12, 0
        defb 4, 64
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_7_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_8_a
        defb 0, 240
        defb 7, 224
        defb 0, 192
        defb 8, 192
        defb 10, 192
        defb 10, 192
        defb 15, 192
        defb 7, 192
        defb 8, 0
        defb 127, 0
        defb 103, 0
        defb 7, 0
        defb 31, 128
        defb 56, 0
        defb 48, 1
        defb 0, 3
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_8_b
        defb 0, 15
        defb 192, 7
        defb 96, 3
        defb 176, 3
        defb 208, 3
        defb 208, 3
        defb 240, 3
        defb 192, 3
        defb 48, 0
        defb 254, 0
        defb 230, 0
        defb 224, 0
        defb 248, 1
        defb 28, 0
        defb 12, 128
        defb 0, 192
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_8_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_9_a
        defb 1, 240
        defb 7, 224
        defb 15, 128
        defb 47, 0
        defb 111, 0
        defb 75, 0
        defb 95, 0
        defb 44, 0
        defb 24, 0
        defb 12, 128
        defb 15, 192
        defb 7, 224
        defb 6, 224
        defb 6, 224
        defb 4, 224
        defb 0, 225
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_9_b
        defb 128, 31
        defb 192, 15
        defb 224, 7
        defb 240, 3
        defb 240, 3
        defb 120, 1
        defb 236, 0
        defb 246, 0
        defb 114, 0
        defb 242, 0
        defb 240, 0
        defb 96, 3
        defb 64, 15
        defb 96, 7
        defb 32, 7
        defb 0, 135
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_9_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_10_a
        defb 1, 248
        defb 3, 240
        defb 7, 224
        defb 15, 192
        defb 15, 192
        defb 30, 128
        defb 55, 0
        defb 111, 0
        defb 78, 0
        defb 79, 0
        defb 15, 0
        defb 6, 192
        defb 2, 240
        defb 6, 224
        defb 4, 224
        defb 0, 225
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_10_b
        defb 128, 15
        defb 224, 7
        defb 240, 1
        defb 244, 0
        defb 246, 0
        defb 210, 0
        defb 250, 0
        defb 52, 0
        defb 24, 0
        defb 48, 1
        defb 240, 3
        defb 224, 7
        defb 96, 7
        defb 96, 7
        defb 32, 7
        defb 0, 135
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_10_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_11_a
        defb 0, 255
        defb 0, 192
        defb 30, 128
        defb 63, 0
        defb 55, 0
        defb 63, 0
        defb 30, 128
        defb 15, 192
        defb 0, 224
        defb 3, 224
        defb 14, 192
        defb 14, 192
        defb 7, 224
        defb 1, 240
        defb 0, 252
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_11_b
        defb 0, 255
        defb 0, 127
        defb 0, 63
        defb 0, 15
        defb 32, 7
        defb 144, 3
        defb 152, 1
        defb 56, 1
        defb 248, 1
        defb 176, 3
        defb 0, 7
        defb 0, 127
        defb 0, 3
        defb 200, 1
        defb 112, 3
        defb 0, 7
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_11_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_12_a
        defb 0, 224
        defb 15, 192
        defb 31, 128
        defb 59, 0
        defb 63, 0
        defb 63, 0
        defb 31, 128
        defb 13, 192
        defb 7, 224
        defb 0, 224
        defb 7, 224
        defb 14, 192
        defb 14, 192
        defb 7, 224
        defb 0, 240
        defb 0, 254
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_12_b
        defb 0, 127
        defb 0, 63
        defb 128, 31
        defb 192, 15
        defb 224, 7
        defb 224, 3
        defb 164, 0
        defb 68, 0
        defb 142, 0
        defb 30, 0
        defb 252, 0
        defb 56, 1
        defb 0, 3
        defb 128, 1
        defb 228, 0
        defb 56, 1
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_12_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_13_a
        defb 1, 240
        defb 7, 224
        defb 3, 192
        defb 12, 192
        defb 26, 128
        defb 30, 128
        defb 12, 128
        defb 0, 128
        defb 30, 128
        defb 31, 128
        defb 11, 192
        defb 11, 192
        defb 3, 192
        defb 10, 192
        defb 0, 224
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_13_b
        defb 192, 15
        defb 192, 15
        defb 224, 7
        defb 0, 7
        defb 96, 7
        defb 208, 3
        defb 240, 3
        defb 96, 3
        defb 0, 3
        defb 176, 3
        defb 240, 3
        defb 224, 7
        defb 96, 7
        defb 96, 7
        defb 64, 15
        defb 0, 31
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_13_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_14_a
        defb 3, 240
        defb 3, 240
        defb 7, 224
        defb 0, 224
        defb 6, 224
        defb 11, 192
        defb 15, 192
        defb 6, 192
        defb 0, 192
        defb 13, 192
        defb 15, 192
        defb 7, 224
        defb 6, 224
        defb 6, 224
        defb 2, 240
        defb 0, 248
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_14_b
        defb 128, 15
        defb 224, 7
        defb 192, 3
        defb 48, 3
        defb 88, 1
        defb 120, 1
        defb 48, 1
        defb 0, 1
        defb 120, 1
        defb 248, 1
        defb 208, 3
        defb 208, 3
        defb 192, 3
        defb 80, 3
        defb 0, 7
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_14_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_15_a
        defb 0, 0
        defb 127, 0
        defb 63, 0
        defb 31, 128
        defb 0, 192
        defb 3, 240
        defb 3, 240
        defb 1, 248
        defb 0, 252
        defb 0, 252
        defb 1, 240
        defb 7, 224
        defb 6, 224
        defb 4, 224
        defb 6, 224
        defb 0, 240
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_15_b
        defb 0, 0
        defb 254, 0
        defb 254, 0
        defb 252, 0
        defb 172, 0
        defb 248, 0
        defb 224, 1
        defb 240, 3
        defb 240, 3
        defb 48, 3
        defb 240, 3
        defb 192, 7
        defb 0, 31
        defb 0, 127
        defb 0, 127
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_15_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_16_a
        defb 0, 0
        defb 127, 0
        defb 63, 0
        defb 31, 128
        defb 1, 192
        defb 3, 240
        defb 3, 240
        defb 1, 248
        defb 0, 252
        defb 0, 248
        defb 1, 248
        defb 3, 240
        defb 3, 240
        defb 3, 240
        defb 1, 248
        defb 0, 252
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_16_b
        defb 0, 0
        defb 254, 0
        defb 254, 0
        defb 248, 0
        defb 88, 1
        defb 240, 3
        defb 192, 3
        defb 224, 7
        defb 224, 7
        defb 96, 7
        defb 224, 7
        defb 192, 15
        defb 128, 15
        defb 0, 31
        defb 128, 31
        defb 0, 31
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
    ._sprite_16_c
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
	C_LINE	188,"assets/levels.h::unpack::0::3"
	C_LINE	0,"./assets/extrasprites.h::unpack::0::3"
	C_LINE	11,"./assets/extrasprites.h::unpack::0::3"
	C_LINE	42,"./assets/extrasprites.h::unpack::0::3"
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
        defb 0, 255
	C_LINE	64,"./assets/extrasprites.h::unpack::0::3"
	._sprite_18_a
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	._sprite_18_b
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	._sprite_18_c
		defb 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255
	C_LINE	189,"assets/levels.h::unpack::0::3"
	C_LINE	57,"mk2.c::unpack::0::3"
	C_LINE	0,"addons/helpers.h::unpack::0::3"
	C_LINE	67,"mk2.c::unpack::0::3"
	C_LINE	0,"sound/beeper.h::unpack::0::3"
	C_LINE	11,"sound/beeper.h::unpack::0::3"
.sound_play
	ld hl, soundEffectsData	;address of sound effects data
	;di
	push iy
	ld b,0
	ld c,a
	add hl,bc
	add hl,bc
	ld a,(hl)
	inc hl
	ld h,(hl)
	ld l,a
	push hl
	pop ix			;put it into ix
.readData
	ld a,(ix+0)		;read block type
	or a
	jr nz,readData_sound
	pop iy
	;ei
	ret
.readData_sound
	ld c,(ix+1)		;read duration 1
	ld b,(ix+2)
	ld e,(ix+3)		;read duration 2
	ld d,(ix+4)
	push de
	pop iy
	dec a
	jr nz,sfxRoutineNoise
;this routine generate tone with many parameters
.sfxRoutineTone
	ld e,(ix+5)		;freq
	ld d,(ix+6)
	ld a,(ix+9)		;duty
	ld (sfxRoutineTone_duty + 1),a
	ld hl,0
.sfxRoutineTone_l0
	push bc
	push iy
	pop bc
.sfxRoutineTone_l1
	add hl,de
	ld a,h
.sfxRoutineTone_duty
	cp 0
	sbc a,a
	and 16
.sfxRoutineTone_border
	or 0
	out ($fe),a
	dec bc
	ld a,b
	or c
	jr nz,sfxRoutineTone_l1
	ld a,(sfxRoutineTone_duty + 1)
	add a,(ix+10)	;duty change
	ld (sfxRoutineTone_duty + 1),a
	ld c,(ix+7)		;slide
	ld b,(ix+8)
	ex de,hl
	add hl,bc
	ex de,hl
	pop bc
	dec bc
	ld a,b
	or c
	jr nz,sfxRoutineTone_l0
	ld c,11
.nextData
	add ix,bc		;skip to the next block
	jr readData
;this routine generate noise with two parameters
.sfxRoutineNoise
	ld e,(ix+5)		;pitch
	ld d,1
	ld h,d
	ld l,d
.sfxRoutineNoise_l0
	push bc
	push iy
	pop bc
.sfxRoutineNoise_l1
	ld a,(hl)
	and 16
.sfxRoutineNoise_border
	or 0
	out ($fe),a
	dec d
	jr nz,sfxRoutineNoise_l2
	ld d,e
	inc hl
	ld a,h
	and $1f
	ld h,a
.sfxRoutineNoise_l2
	dec bc
	ld a,b
	or c
	jr nz,sfxRoutineNoise_l1
	ld a,e
	add a,(ix+6)	;slide
	ld e,a
	pop bc
	dec bc
	ld a,b
	or c
	jr nz,sfxRoutineNoise_l0
	ld c,7
	jr nextData
.soundEffectsData
	defw soundEffectsData_sfx0
	defw soundEffectsData_sfx1
	defw soundEffectsData_sfx2
	defw soundEffectsData_sfx3
	defw soundEffectsData_sfx4
	defw soundEffectsData_sfx5
	defw soundEffectsData_sfx6
	defw soundEffectsData_sfx7
	defw soundEffectsData_sfx8
	defw soundEffectsData_sfx9
	defw soundEffectsData_sfx10
	defw soundEffectsData_sfx11
.soundEffectsData_sfx0
	defb 0x01
	defw 0x000a,0x03e8,0x00c8,0x0016,0x1680
	defb 0x00
.soundEffectsData_sfx1
	defb 0x01
	defw 0x0064,0x0014,0x01f4,0x0002,0x0010
	defb 0x00
.soundEffectsData_sfx2
	defb 0x02
	defw 0x0001,0x03e8,0x000a
	defb 0x01
	defw 0x0014,0x0064,0x0190,0xfff0,0x0080
	defb 0x02
	defw 0x0001,0x07d0,0x0001
	defb 0x00
.soundEffectsData_sfx3
	defb 0x01
	defw 0x0014,0x00c8,0x0d48,0x000a,0x0040
	defb 0x00
.soundEffectsData_sfx4
	defb 0x01
	defw 0x0050,0x0014,0x03e8,0xffff,0x0080
	defb 0x00
.soundEffectsData_sfx5
	defb 0x01
	defw 0x0004,0x03e8,0x03e8,0x0190,0x0080
	defb 0x00
.soundEffectsData_sfx6
	defb 0x01
	defw 0x0002,0x0fa0,0x0190,0x00c8,0x0040
	defb 0x01
	defw 0x0002,0x0fa0,0x00c8,0x00c8,0x0020
	defb 0x00
.soundEffectsData_sfx7
	defb 0x01
	defw 0x000a,0x03e8,0x00c8,0x0002,0x0010
	defb 0x01
	defw 0x0001,0x0fa0,0x0000,0x0000,0x0000
	defb 0x01
	defw 0x000a,0x03e8,0x00c8,0xfffe,0x0010
	defb 0x01
	defw 0x0001,0x07d0,0x0000,0x0000,0x0000
	defb 0x01
	defw 0x000a,0x03e8,0x00b4,0xfffe,0x0010
	defb 0x01
	defw 0x0001,0x0fa0,0x0000,0x0000,0x0000
	defb 0x00
.soundEffectsData_sfx8
	defb 0x02
	defw 0x0001,0x03e8,0x0014
	defb 0x01
	defw 0x0001,0x03e8,0x0000,0x0000,0x0000
	defb 0x02
	defw 0x0001,0x03e8,0x0001
	defb 0x00
.soundEffectsData_sfx9
	defb 0x02
	defw 0x0014,0x0032,0x0101
	defb 0x00
.soundEffectsData_sfx10
	defb 0x02
	defw 0x0064,0x01f4,0x0264
	defb 0x00
.soundEffectsData_sfx11
	defb 0x01
	defw 0x0014,0x01f4,0x00c8,0x0005,0x0110
	defb 0x01
	defw 0x0001,0x03e8,0x0000,0x0000,0x0000
	defb 0x01
	defw 0x001e,0x01f4,0x00c8,0x0008,0x0110
	defb 0x01
	defw 0x0001,0x07d0,0x0000,0x0000,0x0000
	defb 0x00
	C_LINE	255,"sound/beeper.h::unpack::0::3"

; Function beep_fx flags 0x00000200 __smallc 
; void beep_fx(unsigned char n)
; parameter 'unsigned char n' at sp+2 size(1)
	C_LINE	255,"sound/beeper.h::beep_fx::0::3"
._beep_fx
	ld	hl,2	;const
	add	hl,sp
	ld	l,(hl)
	ld	h,0
	ld	(_asm_int),hl
		push ix
		push iy
		ld a, (_asm_int)
		call sound_play
		pop ix
		pop iy
	ret


	C_LINE	86,"mk2.c::beep_fx::0::4"
	C_LINE	0,"engine/isrc.h::beep_fx::0::4"
	C_LINE	5,"engine/isrc.h::beep_fx::0::4"
	defw 0
	C_LINE	11,"engine/isrc.h::beep_fx::0::4"

; Function ISR flags 0x00000200 __smallc 
; void ISR()
	C_LINE	11,"engine/isrc.h::ISR::0::4"
._ISR
	ld	hl,(_isrc)
	ld	h,0
	inc	hl
	ld	a,l
	ld	(_isrc),a
	ret


	C_LINE	88,"mk2.c::ISR::0::5"
	C_LINE	0,"engine/printer.h::ISR::0::5"
	C_LINE	8,"engine/printer.h::ISR::0::5"
	SECTION	data_compiler
._spacer
	defw	i_1+0
	SECTION	code_compiler
	C_LINE	25,"engine/printer.h::ISR::0::5"

; Function draw_coloured_tile flags 0x00000200 __smallc 
; void draw_coloured_tile()
	C_LINE	25,"engine/printer.h::draw_coloured_tile::0::5"
._draw_coloured_tile
				ld  a, (__x)
				sub  1 
				srl a
				ld  (_xx), a
				ld  a, (__y)
				sub  2 
				srl a
				ld  (_yy), a
	ld	a,(_xx)
	ld	(_cx1),a
	ld	hl,(_yy)
	ld	h,0
	ld	a,l
	ld	(_cy1),a
	call	_attr
	ld	a,l
	and	8
	jp	nz,i_13	;
	ld	hl,(__t)
	ld	h,0
	ld	a,l
	sub	16
	ccf
	jp	nc,i_14	;
	ld	a,(__t)
	cp	19
	jp	z,i_14	;
	ld	hl,1	;const
	jr	i_15
.i_14
	ld	hl,0	;const
.i_15
	ld	a,h
	or	l
	jp	nz,i_13	;
	jr	i_16
.i_13
	ld	hl,1	;const
.i_16
	call	l_lneg
	ld	h,0
	ld	a,l
	ld	(_nocast),a
				ld  a, (__t)
				sla a 
				sla a 
				add 64
				ld  (__ta), a
				ld  hl, _tileset + 2048
				ld  b, 0
				ld  c, a
				add hl, bc
				ld  (_gen_pt), hl
	ld	hl,(__t)
	ld	h,0
	ld	a,l
	cp	19
	jp	nz,i_17	;
					ld  hl, _tileset + 2048 + 192
					ld  (_gen_pt_alt), hl
	ld	a,192
	ld	(_t_alt),a
	jp	i_18	;EOS
.i_17
					ld  hl, _tileset + 2048 + 128
					ld  de, (__ta)
					ld  d, 0
					add hl, de
					ld  (_gen_pt_alt), hl
	ld	hl,(__ta)
	ld	h,0
	ld	bc,128
	add	hl,bc
	ld	h,0
	ld	a,l
	ld	(_t_alt),a
.i_18
	ld	hl,_tileset
	ld	a,8
	add	h
	ld	h,a
	ex	de,hl
	ld	hl,(_t_alt)
	ld	h,0
	add	hl,de
	ld	(_gen_pt_alt),hl
					ld  a, (_xx)
					dec a
					ld  (_cx1), a
					ld  a, (_yy)
					or  a
					jr  z, _dct_1_set_yy
					dec a
				._dct_1_set_yy
					ld  (_cy1), a
					ld  a, (_nocast)
					or  a
					jr  z, _dct_a1_set
					call _attr
					ld  a, l
					and 8
					jr  z, _dct_a1_set
					ld  a, 1
				._dct_a1_set
					ld  (_a1), a
					ld  a, (_xx)					
					ld  (_cx1), a
					ld  a, (_yy)
					or  a
					jr  z, _dct_2_set_yy
					dec a
				._dct_2_set_yy
					ld  (_cy1), a
					ld  a, (_nocast)
					or  a
					jr  z, _dct_a2_set
					call _attr
					ld  a, l
					and 8
					jr  z, _dct_a2_set
					ld  a, 1
				._dct_a2_set
					ld  (_a2), a
					ld  a, (_xx)
					dec a
					ld  (_cx1), a
					ld  a, (_yy)					
					ld  (_cy1), a
					ld  a, (_nocast)
					or  a
					jr  z, _dct_a3_set
					call _attr
					ld  a, l
					and 8
					jr  z, _dct_a3_set
					ld  a, 1
				._dct_a3_set
					ld  (_a3), a
					ld  a, (_a1)
					or  a
					jr  nz, _dct_1_shadow
					ld  a, (_a2)
					or  a
					jr  z, _dct_1_no_shadow
					ld  a, (_a3)
					or  a
					jr  z, _dct_1_no_shadow
				._dct_1_shadow
					ld  hl, (_gen_pt_alt)
					ld  a, (hl)
					ld  (_c1), a
					ld  a, (_t_alt)
					ld  (_t1), a
					jr  _dct_1_increment
				._dct_1_no_shadow
					ld  hl, (_gen_pt)
					ld  a, (hl)
					ld  (_c1), a
					ld  a, (__ta)
					ld  (_t1), a
				._dct_1_increment
					ld  hl, (_gen_pt)
					inc hl
					ld  (_gen_pt), hl
					ld  hl, (_gen_pt_alt)
					inc hl
					ld  (_gen_pt_alt), hl
					ld  hl, __ta
					inc (hl)
					ld  hl, _t_alt
					inc (hl)
					ld  a, (_a2)
					or  a
					jr  z, _dct_2_no_shadow
				._dct_2_shadow
					ld  hl, (_gen_pt_alt)
					ld  a, (hl)
					ld  (_c2), a
					ld  a, (_t_alt)
					ld  (_t2), a
					jr  _dct_2_increment
				._dct_2_no_shadow
					ld  hl, (_gen_pt)
					ld  a, (hl)
					ld  (_c2), a
					ld  a, (__ta)
					ld  (_t2), a
				._dct_2_increment
					ld  hl, (_gen_pt)
					inc hl
					ld  (_gen_pt), hl
					ld  hl, (_gen_pt_alt)
					inc hl
					ld  (_gen_pt_alt), hl
					ld  hl, __ta
					inc (hl)
					ld  hl, _t_alt
					inc (hl)
					ld  a, (_a3)
					or  a
					jr  z, _dct_3_no_shadow
				._dct_3_shadow
					ld  hl, (_gen_pt_alt)
					ld  a, (hl)
					ld  (_c3), a
					ld  a, (_t_alt)
					ld  (_t3), a
					jr  _dct_3_increment
				._dct_3_no_shadow
					ld  hl, (_gen_pt)
					ld  a, (hl)
					ld  (_c3), a
					ld  a, (__ta)
					ld  (_t3), a
				._dct_3_increment
					ld  hl, (_gen_pt)
					inc hl
					ld  (_gen_pt), hl
					ld  hl, (_gen_pt_alt)
					inc hl
					ld  (_gen_pt_alt), hl
					ld  hl, __ta
					inc (hl)
					ld  hl, _t_alt
					inc (hl)
				ld  hl, (_gen_pt)
				ld  a, (hl)
				ld  (_c4), a
				ld  a, (__ta)
				ld  (_t4), a
				ld  a, (__x)
				ld  c, a
				ld  a, (__y)
				call SPCompDListAddr
				ld  a, (_c1) 		 
				ld  (hl), a 		 
				inc hl
				ld  a, (_t1)		 
				ld  (hl), a			 
				inc hl
				inc hl
				inc hl 				 
				ld  a, (_c2) 		 
				ld  (hl), a 		 
				inc hl				
				ld  a, (_t2)  		 
				ld  (hl), a			 
				ld  bc, 123
				add hl, bc 			 
				ld  a, (_c3) 		 
				ld  (hl), a 		 
				inc hl				
				ld  a, (_t3)		 
				ld  (hl), a			 
				inc hl
				inc hl
				inc hl 				 
				ld  a, (_c4) 		 
				ld  (hl), a 		 
				inc hl
				ld  a, (_t4)		 
				ld  (hl), a			 
	ret


	C_LINE	476,"engine/printer.h::draw_coloured_tile::0::8"

; Function invalidate_tile flags 0x00000200 __smallc 
; void invalidate_tile()
	C_LINE	476,"engine/printer.h::invalidate_tile::0::8"
._invalidate_tile
			; Invalidate Rectangle
			;
			; enter:  B = row coord top left corner
			;         C = col coord top left corner
			;         D = row coord bottom right corner
			;         E = col coord bottom right corner
			;        IY = clipping rectangle, set it to "ClipStruct" for full screen
			ld  a, (__x)
			inc a
			ld  e, a
			ld  a, (__y)
			inc a
			ld  d, a
			ld  a, (__x)
			ld  c, a
			ld  a, (__y)
			ld  b, a
			ld  iy, fsClipStruct
			call SPInvalidate			
	ret


	C_LINE	503,"engine/printer.h::invalidate_tile::0::9"

; Function invalidate_viewport flags 0x00000200 __smallc 
; void invalidate_viewport()
	C_LINE	503,"engine/printer.h::invalidate_viewport::0::9"
._invalidate_viewport
			; Invalidate Rectangle
			;
			; enter:  B = row coord top left corner
			;         C = col coord top left corner
			;         D = row coord bottom right corner
			;         E = col coord bottom right corner
			;        IY = clipping rectangle, set it to "ClipStruct" for full screen
			ld  b,  2 
			ld  c,  1 
			ld  d,  2 +19
			ld  e,  1 +29
			ld  iy, vpClipStruct
			call SPInvalidate
	ret


	C_LINE	524,"engine/printer.h::invalidate_viewport::0::10"

; Function validate_viewport flags 0x00000200 __smallc 
; void validate_viewport()
	C_LINE	524,"engine/printer.h::validate_viewport::0::10"
._validate_viewport
			; Invalidate Rectangle
			;
			; enter:  B = row coord top left corner
			;         C = col coord top left corner
			;         D = row coord bottom right corner
			;         E = col coord bottom right corner
			;        IY = clipping rectangle, set it to "ClipStruct" for full screen
			ld  b,  2 
			ld  c,  1 
			ld  d,  2 +19
			ld  e,  1 +29
			ld  iy, vpClipStruct
			call SPValidate
	ret


	C_LINE	545,"engine/printer.h::validate_viewport::0::11"

; Function draw_invalidate_coloured_tile_gamearea flags 0x00000200 __smallc 
; void draw_invalidate_coloured_tile_gamearea()
	C_LINE	545,"engine/printer.h::draw_invalidate_coloured_tile_gamearea::0::11"
._draw_invalidate_coloured_tile_gamearea
	call	_draw_coloured_tile_gamearea
	call	_invalidate_tile
	ret


	C_LINE	550,"engine/printer.h::draw_invalidate_coloured_tile_gamearea::0::12"

; Function draw_coloured_tile_gamearea flags 0x00000200 __smallc 
; void draw_coloured_tile_gamearea()
	C_LINE	550,"engine/printer.h::draw_coloured_tile_gamearea::0::12"
._draw_coloured_tile_gamearea
	ld	hl,(__x)
	ld	h,0
	add	hl,hl
	inc	hl
	ld	a,l
	ld	(__x),a
	ld	hl,(__y)
	ld	h,0
	add	hl,hl
	inc	hl
	inc	hl
	ld	h,0
	ld	a,l
	ld	(__y),a
	call	_draw_coloured_tile
	ret


	C_LINE	564,"engine/printer.h::draw_coloured_tile_gamearea::0::13"

; Function print_number2 flags 0x00000200 __smallc 
; void print_number2()
	C_LINE	564,"engine/printer.h::print_number2::0::13"
._print_number2
	ld	hl,(__t)
	ld	h,0
	ld	de,10
	ex	de,hl
	call	l_div_u
	ld	bc,16
	add	hl,bc
	ld	a,l
	ld	(_rda),a
	ld	hl,(__t)
	ld	h,0
	ld	de,10
	ex	de,hl
	call	l_div_u
	ex	de,hl
	ld	bc,16
	add	hl,bc
	ld	h,0
	ld	a,l
	ld	(_rdb),a
			; enter:  A = row position (0..23)
			;         C = col position (0..31/63)
			;         D = pallette #
			;         E = graphic #
			ld  a, (_rda)
			ld  e, a
			ld  d, 7
			ld  a, (__x)
			ld  c, a
			ld  a, (__y)
			call SPPrintAtInv
			ld  a, (_rdb)
			ld  e, a
			ld  d, 7
			ld  a, (__x)
			inc a
			ld  c, a
			ld  a, (__y)
			call SPPrintAtInv
	ret


	C_LINE	601,"engine/printer.h::print_number2::0::14"

; Function draw_objs flags 0x00000200 __smallc 
; void draw_objs()
	C_LINE	601,"engine/printer.h::draw_objs::0::14"
._draw_objs
	ld	a,17
	ld	(__x),a
	xor	a
	ld	(__y),a
	ld	hl,(_level_data+5)
	ld	h,0
	ex	de,hl
	ld	hl,(_p_objs)
	ld	h,0
	ex	de,hl
	and	a
	sbc	hl,de
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_print_number2
	ret


	C_LINE	687,"engine/printer.h::draw_objs::0::15"

; Function print_str flags 0x00000200 __smallc 
; void print_str()
	C_LINE	687,"engine/printer.h::print_str::0::15"
._print_str
		ld  hl, (_gp_gen)
		.print_str_loop
			ld  a, (hl)
			or  a
			ret z 
			inc hl
			sub 32
			ld  e, a
			ld  a, (__t)
			ld  d, a
			ld  a, (__x)
			ld  c, a
			inc a
			ld  (__x), a
			ld  a, (__y)
			push hl
			call SPPrintAtInv
			pop  hl
			jr  print_str_loop
	ret


	C_LINE	720,"engine/printer.h::print_str::0::16"

; Function blackout_area flags 0x00000200 __smallc 
; void blackout_area()
	C_LINE	720,"engine/printer.h::blackout_area::0::16"
._blackout_area
			ld  de, 22528 + 32 *  2  +  1 
			ld  b, 20
		.bal1
			push bc
			ld  h, d 
			ld  l, e
			ld	(hl), 0
			inc de
			ld  bc, 29
			ldir
			inc de
			inc de
			pop bc
			djnz bal1
	ret


	C_LINE	741,"engine/printer.h::blackout_area::0::17"
	SECTION	data_compiler
._utaux
	defb	0
	SECTION	code_compiler
	C_LINE	742,"engine/printer.h::blackout_area::0::17"

; Function update_tile flags 0x00000200 __smallc 
; void update_tile()
	C_LINE	742,"engine/printer.h::update_tile::0::17"
._update_tile
		ld  a, (__x)
		ld  c, a
		ld  a, (__y)
		ld  b, a
		sla a 
		sla a 
		sla a 
		sla a 
		sub b
		add c
		ld  b, 0
		ld  c, a
		ld  hl, _map_attr
		add hl, bc
		ld  a, (__n)
		ld  (hl), a
		ld  hl, _map_buff
		add hl, bc
		ld  a, (__t)
		ld  (hl), a
		call _draw_coloured_tile_gamearea
		ld  a, (_is_rendering)
		or  a
		ret nz
		call _invalidate_tile
	ret


	C_LINE	781,"engine/printer.h::update_tile::0::18"

; Function print_message flags 0x00000200 __smallc 
; void print_message()
	C_LINE	781,"engine/printer.h::print_message::0::18"
._print_message
	ld	a,10
	ld	(__x),a
	ld	a,12
	ld	(__y),a
	ld	hl,87	;const
	ld	a,l
	ld	(__t),a
	call	_print_str
	ld	a,10
	ld	(__x),a
	ld	a,11
	ld	(__y),a
	ld	a,87
	ld	(__t),a
	ld	hl,(_spacer)
	ld	(_gp_gen),hl
	call	_print_str
	ld	a,10
	ld	(__x),a
	ld	a,13
	ld	(__y),a
	ld	a,87
	ld	(__t),a
	ld	hl,(_spacer)
	ld	(_gp_gen),hl
	call	_print_str
	call	sp_UpdateNow
	call	sp_WaitForNoKey
	ret


	C_LINE	92,"mk2.c::print_message::0::19"
	C_LINE	0,"engine/general.h::print_message::0::19"
	C_LINE	11,"engine/general.h::print_message::0::19"

; Function read_controller flags 0x00000200 __smallc 
; void read_controller()
	C_LINE	11,"engine/general.h::read_controller::0::19"
._read_controller
			ld  a, (_pad0)
			ld  (_pad_this_frame), a
			ld	hl, (_joyfunc)
			push hl
			ld	hl,_keys
			ex	(sp), hl
			call l_jphl
			pop	bc
			ld	a, l
			ld	(_pad0), a
			ld  hl, 0x017f
			push hl
			call sp_KeyPressed
			pop bc
			xor a
			or  l
			ld  a, (_pad0)
			jp  z, space_not_pressed
		.space_pressed
			and 0xbf
			jr  space_read_update_pad0
		.space_not_pressed
			or 0x40
		.space_read_update_pad0
			ld  (_pad0), a
			ld  c, a
			ld  a, (_pad_this_frame)
			xor c
			neg
			or  c
			or  0x30
			ld  (_pad_this_frame), a
	ret


	C_LINE	81,"engine/general.h::read_controller::0::20"

; Function button_pressed flags 0x00000200 __smallc 
; unsigned char button_pressed()
	C_LINE	81,"engine/general.h::button_pressed::0::20"
._button_pressed
	call	_read_controller
	ld	a,(_pad_this_frame)
	cp	255
	ld	hl,0	;const
	jr	z,ASMPC+3
	inc	hl
	ret


	C_LINE	85,"engine/general.h::button_pressed::0::21"

; Function step flags 0x00000200 __smallc 
; void step()
	C_LINE	85,"engine/general.h::step::0::21"
._step
		ld a, 16
		out (254), a
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		xor 16
		out (254), a
	ret


	C_LINE	105,"engine/general.h::step::0::22"

; Function cortina flags 0x00000200 __smallc 
; void cortina()
	C_LINE	105,"engine/general.h::cortina::0::22"
._cortina
		ld b, 7
	.fade_out_extern
		push bc
		ld   e, 3               ; 3 tercios
		ld   hl, 22528          ; aqu empiezan los atributos
	.fade_out_bucle
		ld   a, (hl )           ; nos traemos el atributo actual
		ld   d, a               ; tomar atributo
		and  7                  ; aislar la tinta
		jr   z, ink_done        ; si vale 0, no se decrementa
		dec  a                  ; decrementamos tinta
	.ink_done
		ld   b, a               ; en b tenemos ahora la tinta ya procesada.
		ld   a, d               ; tomar atributo
		and  56                 ; aislar el papel, sin modificar su posicin en el byte
		jr   z, paper_done      ; si vale 0, no se decrementa
		sub  8                  ; decrementamos papel restando 8
	.paper_done
		ld   c, a               ; en c tenemos ahora el papel ya procesado.
		ld   a, d
		and  192                ; nos quedamos con bits 6 y 7 ( 0x40  y  0x80 )
		or   c                  ; aadimos paper
		or   b                  ; e ink, con lo que recompuesto el atributo
		ld   (hl),a             ; lo escribimos,
		inc  l                  ; e incrementamos el puntero.
		jr   nz, fade_out_bucle ; continuamos hasta acabar el tercio (cuando L valga 0)
		inc  h                  ; siguiente tercio
		dec  e
		jr   nz, fade_out_bucle ; repetir las 3 veces
		pop bc
		djnz fade_out_extern
	ret


	C_LINE	151,"engine/general.h::cortina::0::23"

; Function addsign flags 0x00000200 __smallc 
; int addsign(int n, int value)
; parameter 'int value' at sp+2 size(2)
; parameter 'int n' at sp+4 size(2)
	C_LINE	151,"engine/general.h::addsign::0::23"
._addsign
	ld	hl,4	;const
	add	hl,sp
	call	l_gint	;
	ld	a,h
	or	l
	jr	nz,ASMPC+3
	scf
	jp	nc,i_20	;
	ld	hl,0	;const
	jp	i_21	;
.i_20
	ld	hl,4	;const
	add	hl,sp
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	ld	hl,0
	call	l_gt
	jp	nc,i_22	;
	pop	bc
	pop	hl
	push	hl
	push	bc
	jp	i_23	;
.i_22
	pop	bc
	pop	hl
	push	hl
	push	bc
	call	l_neg
.i_23
.i_21
	ret


	C_LINE	156,"engine/general.h::addsign::0::24"

; Function abs flags 0x00000200 __smallc 
; unsigned int abs(int n)
; parameter 'int n' at sp+2 size(2)
	C_LINE	156,"engine/general.h::abs::0::24"
._abs
	pop	bc
	pop	hl
	push	hl
	push	bc
	ld	a,h
	rla
	jp	nc,i_24	;
	pop	bc
	pop	hl
	push	hl
	push	bc
	call	l_neg
	ret


.i_24
	pop	bc
	pop	hl
	push	hl
	push	bc
	ret


.i_25
	ret


	C_LINE	163,"engine/general.h::abs::0::25"

; Function active_sleep flags 0x00000200 __smallc 
; void active_sleep(int espera)
; parameter 'int espera' at sp+2 size(2)
	C_LINE	163,"engine/general.h::active_sleep::0::25"
._active_sleep
.i_28
	ld	a,250
	ld	(_gpjt),a
.i_31
	ld	a,1
	ld	(_gpit),a
.i_29
	ld	hl,(_gpjt)
	ld	h,0
	dec	hl
	ld	a,l
	ld	(_gpjt),a
	ld	a,h
	or	l
	jp	nz,i_31	;EOS
.i_30
	call	_button_pressed
	ld	a,h
	or	l
	jp	nz,i_27	;EOS
.i_32
.i_26
	pop	de
	pop	hl
	dec	hl
	push	hl
	push	de
	ld	a,h
	or	l
	jp	nz,i_28	;EOS
.i_27
	ld	hl,0	;const
	push	hl
	call	sp_Border
	pop	bc
	ret


	C_LINE	179,"engine/general.h::active_sleep::0::28"

; Function select_joyfunc flags 0x00000200 __smallc 
; void select_joyfunc()
	C_LINE	179,"engine/general.h::select_joyfunc::0::28"
._select_joyfunc
			; Music generated by beepola
			call musicstart
.i_33
	call	sp_GetKey
	ld	a,l
	ld	hl,_gpit
	ld	(hl),a
	ld	a,48
	cp	(hl)
	jp	nc,i_36	;
	ld	a,(_gpit)
	cp	53
	jp	nc,i_36	;
	defc	i_36 = i_35
.i_37_i_36
	ld	hl,_joyfuncs
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	ld	bc,-49
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	ld	(_joyfunc),hl
	ld	a,(_gpit)
	cp	51
	jp	nc,i_38	;
	ld	hl,(_gpit)
	ld	h,0
	ld	bc,-49
	add	hl,bc
	ld	a,h
	or	l
	jp	z,i_39	;
	ld	hl,6	;const
	jp	i_40	;
.i_39
	ld	hl,0	;const
.i_40
	ld	a,l
	ld	(_gpjt),a
	ld	hl,_keys+8
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	ld	hl,_keys+6
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	ld	hl,_keys+4
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	ld	hl,_keys+2
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	ld	hl,_keys
	push	hl
	ld	hl,_keyscancodes
	push	hl
	ld	hl,_gpjt
	ld	a,(hl)
	inc	(hl)
	ld	l,a
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	jp	i_34	;EOS
	defc	i_38 = i_34
	defc	i_35 = i_33
.i_34
	ret


	C_LINE	94,"mk2.c::select_joyfunc::0::32"
	C_LINE	0,"engine/frames.h::select_joyfunc::0::32"
	C_LINE	37,"engine/frames.h::select_joyfunc::0::32"
	SECTION	data_compiler
._player_frames
	defw	_sprite_5_a + 0
	defw	_sprite_6_a + 0
	defw	_sprite_7_a + 0
	defw	_sprite_6_a + 0
	defw	_sprite_1_a + 0
	defw	_sprite_2_a + 0
	defw	_sprite_3_a + 0
	defw	_sprite_2_a + 0
	defw	_sprite_8_a + 0
	defw	_sprite_4_a + 0
	SECTION	code_compiler
	C_LINE	45,"engine/frames.h::select_joyfunc::0::32"
	SECTION	data_compiler
._enem_frames
	defw	_sprite_9_a + 0
	defw	_sprite_10_a + 0
	defw	_sprite_11_a + 0
	defw	_sprite_12_a + 0
	defw	_sprite_13_a + 0
	defw	_sprite_14_a + 0
	defw	_sprite_15_a + 0
	defw	_sprite_16_a + 0
	SECTION	code_compiler
	C_LINE	112,"mk2.c::select_joyfunc::0::32"
	C_LINE	0,"engine/clevels.h::select_joyfunc::0::32"
	C_LINE	88,"engine/clevels.h::select_joyfunc::0::32"

; Function prepare_level flags 0x00000200 __smallc 
; void prepare_level()
	C_LINE	88,"engine/clevels.h::prepare_level::0::32"
._prepare_level
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,9
	add	hl,bc
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_map
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,11
	add	hl,bc
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_bolts
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,13
	add	hl,bc
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_baddies
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,15
	add	hl,bc
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_hotspots
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,17
	add	hl,bc
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_behs
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,19
	add	hl,bc
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_tileset + 256 + 256
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	ld	hl,_level_data
	push	hl
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	a,(hl)
	pop	de
	ld	(de),a
	ld	hl,_level_data+1
	push	hl
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	inc	hl
	ld	a,(hl)
	pop	de
	ld	(de),a
	ld	hl,_level_data+5
	push	hl
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,6
	add	hl,bc
	ld	a,(hl)
	pop	de
	ld	(de),a
	ld	hl,_level_data+6
	push	hl
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	ld	a,(hl)
	pop	de
	ld	(de),a
	ld	hl,_level_data+7
	push	hl
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,7
	add	hl,bc
	ld	a,(hl)
	pop	de
	ld	(de),a
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	a,(hl)
	ld	(_n_pant),a
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	inc	hl
	ld	l,(hl)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	ld	a,l
	ld	(_gpx),a
	ld	hl,_levels
	push	hl
	ld	hl,(_level)
	ld	h,0
	ld	de,21
	call	l_mult
	pop	de
	add	hl,de
	ld	bc,4
	add	hl,bc
	ld	l,(hl)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	ld	a,l
	ld	(_gpy),a
	ld	hl,(_gpx)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	ld	(_p_x),hl
	ld	hl,(_gpy)
	ld	h,0
	add	hl,hl
	add	hl,hl
	add	hl,hl
	add	hl,hl
	ld	(_p_y),hl
	ret


	C_LINE	118,"mk2.c::prepare_level::0::33"
	C_LINE	0,"engine/collision.h::prepare_level::0::33"
	C_LINE	7,"engine/collision.h::prepare_level::0::33"

; Function collide_pixel flags 0x00000200 __smallc 
; unsigned char collide_pixel()
	C_LINE	7,"engine/collision.h::collide_pixel::0::33"
._collide_pixel
			ld  hl, 0
			ld  a, (_cx2)
			inc a
			ld  c, a
			ld  a, (_cx1)
			cp  c 
			jr  c, _collide_pixel_return
			ld  a, (_cx1)
			ld  c, a
			ld  a, (_cx2)
			add 14
			cp  c
			jr  c, _collide_pixel_return
			ld  a, (_cy2)
			inc a
			ld  c, a
			ld  a, (_cy1)
			cp  c 
			jr  c, _collide_pixel_return
			ld  a, (_cy1)
			ld  c, a
			ld  a, (_cy2)
			add 14
			cp  c
			jr  c, _collide_pixel_return
			ld  l, 1
		._collide_pixel_return
			ret
	ret


	C_LINE	52,"engine/collision.h::collide_pixel::0::34"

; Function cm_two_points flags 0x00000200 __smallc 
; unsigned char cm_two_points()
	C_LINE	52,"engine/collision.h::cm_two_points::0::34"
._cm_two_points
			ld  a, (_cx1)
			cp  15
			jr  nc, _cm_two_points_at1_reset
			ld  a, (_cy1)
			cp  10
			jr  c, _cm_two_points_at1_do
		._cm_two_points_at1_reset
			xor a
			jr  _cm_two_points_at1_done
		._cm_two_points_at1_do
			ld  a, (_cy1)
			ld  b, a
			sla a
			sla a
			sla a
			sla a
			sub b
			ld  b, a
			ld  a, (_cx1)
			add b
			ld  e, a
			ld  d, 0
			ld  hl, _map_attr
			add hl, de
			ld  a, (hl)
		._cm_two_points_at1_done
			ld (_at1), a
			ld  a, (_cx2)
			cp  15
			jr  nc, _cm_two_points_at2_reset
			ld  a, (_cy2)
			cp  10
			jr  c, _cm_two_points_at2_do
		._cm_two_points_at2_reset
			xor a
			jr  _cm_two_points_at2_done
		._cm_two_points_at2_do
			ld  a, (_cy2)
			ld  b, a
			sla a
			sla a
			sla a
			sla a
			sub b
			ld  b, a
			ld  a, (_cx2)
			add b
			ld  e, a
			ld  d, 0
			ld  hl, _map_attr
			add hl, de
			ld  a, (hl)
		._cm_two_points_at2_done
			ld (_at2), a
	ret


	C_LINE	127,"engine/collision.h::cm_two_points::0::35"

; Function attr flags 0x00000200 __smallc 
; unsigned char attr()
	C_LINE	127,"engine/collision.h::attr::0::35"
._attr
			ld  a, (_cx1)
			cp  15
			jr  nc, _attr_reset
			ld  a, (_cy1)
			cp  10
			jr  c, _attr_do
		._attr_reset
			ld  hl, 0
			ret
		._attr_do
			ld  a, (_cy1)
			ld  b, a
			sla a
			sla a
			sla a
			sla a
			sub b
			ld  b, a
			ld  a, (_cx1)
			add b
			ld  e, a
			ld  d, 0
			ld  hl, _map_attr
			add hl, de
			ld  a, (hl)
			ld  h, 0
			ld  l, a
			ret
	ret


	C_LINE	169,"engine/collision.h::attr::0::36"

; Function qtile flags 0x00000200 __smallc 
; unsigned char qtile()
	C_LINE	169,"engine/collision.h::qtile::0::36"
._qtile
			ld  a, (_cx1)
			cp  15
			jr  nc, _qtile_reset
			ld  a, (_cy1)
			cp  10
			jr  c, _qtile_do
		._qtile_reset
			ld  hl, 0
			ret
		._qtile_do
			ld  a, (_cy1)
			ld  b, a
			sla a
			sla a
			sla a
			sla a
			sub b
			ld  b, a
			ld  a, (_cx1)
			add b
			ld  e, a
			ld  d, 0
			ld  hl, _map_buff
			add hl, de
			ld  a, (hl)
			ld  h, 0
			ld  l, a
			ret
	ret


	C_LINE	122,"mk2.c::qtile::0::37"
	C_LINE	0,"engine/random.h::qtile::0::37"
	C_LINE	7,"engine/random.h::qtile::0::37"
	C_LINE	8,"engine/random.h::qtile::0::37"
	C_LINE	9,"engine/random.h::qtile::0::37"
	C_LINE	10,"engine/random.h::qtile::0::37"
	._seed1 defw 0
	._seed2 defw 0
	._randres defb 0
	C_LINE	18,"engine/random.h::qtile::0::37"

; Function rand flags 0x00000200 __smallc 
; unsigned char rand()
	C_LINE	18,"engine/random.h::rand::0::37"
._rand
		.rnd 
			ld  hl,0xA280
	        ld  de,0xC0DE
	        ld  a,h         ; t = x ^ (x << 1)
	        add a,a
	        xor h
	        ld  h,l         ; x = y
	        ld  l,d         ; y = z
	        ld  d,e         ; z = w
	        ld  e,a
	        rra             ; t = t ^ (t >> 1)
	        xor e
	        ld  e,a
	        ld  a,d         ; w = w ^ ( w << 3 ) ^ t
	        add a,a
	        add a,a
	        add a,a
	        xor d
	        xor e
	        ld  e,a
	        ld  (rnd+1),hl
	        ld  (rnd+4),de
	        ld	(_randres), a
	ld	hl,(_randres)
	ld	h,0
	ret


	C_LINE	49,"engine/random.h::rand::0::38"

; Function srand flags 0x00000200 __smallc 
; void srand()
	C_LINE	49,"engine/random.h::srand::0::38"
._srand
			ld	hl, (_seed1)
			ld	(rnd+1),hl
			ld	hl, (_seed2)			
			ld	(rnd+4),hl
	ret


	C_LINE	125,"mk2.c::srand::0::39"
	C_LINE	0,"engine/messages.h::srand::0::39"
	C_LINE	9,"engine/messages.h::srand::0::39"
	C_LINE	12,"engine/messages.h::srand::0::39"

; Function game_ending flags 0x00000200 __smallc 
; void game_ending()
	C_LINE	12,"engine/messages.h::game_ending::0::39"
._game_ending
	call	sp_UpdateNow
	ld	hl,_s_ending
	push	hl
	ld	hl,16384	;const
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	ld	a,4
	ld	(_bs),a
.i_45
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
	ld	hl,3	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_43
	ld	hl,(_bs)
	ld	h,0
	dec	hl
	ld	a,l
	ld	(_bs),a
	ld	a,h
	or	l
	jp	nz,i_45	;EOS
.i_44
	ld	hl,6	;const
	push	hl
	call	_beep_fx
	pop	bc
	ret


	C_LINE	31,"engine/messages.h::game_ending::0::41"

; Function game_over flags 0x00000200 __smallc 
; void game_over()
	C_LINE	31,"engine/messages.h::game_over::0::41"
._game_over
	ld	a,6
	ld	(__x),a
	xor	a
	ld	(__y),a
	ld	hl,(_p_life)
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_print_number2
	ld	hl,i_1+13
	ld	(_gp_gen),hl
	call	_print_message
	ld	a,4
	ld	(_bs),a
.i_48
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
	ld	hl,3	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_46
	ld	hl,(_bs)
	ld	h,0
	dec	hl
	ld	a,l
	ld	(_bs),a
	ld	a,h
	or	l
	jp	nz,i_48	;EOS
.i_47
	ld	hl,10	;const
	push	hl
	call	_beep_fx
	pop	bc
	ret


	C_LINE	128,"mk2.c::game_over::0::43"
	C_LINE	0,"engine/inits.h::game_over::0::43"
	C_LINE	158,"mk2.c::game_over::0::43"
	C_LINE	0,"engine/blocks.h::game_over::0::43"
	C_LINE	12,"engine/blocks.h::game_over::0::43"

; Function process_tile flags 0x00000200 __smallc 
; void process_tile()
	C_LINE	12,"engine/blocks.h::process_tile::0::43"
._process_tile
	ld	a,(_x0)
	ld	(_cx1),a
	ld	hl,(_y0)
	ld	h,0
	ld	a,l
	ld	(_cy1),a
	call	_qtile
	ld	a,l
	cp	15
	jp	nz,i_50	;
	ld	a,(_p_keys)
	and	a
	jp	z,i_50	;
	defc	i_50 = i_49
.i_51_i_50
	ld	a,(_x0)
	ld	(__x),a
	ld	a,(_y0)
	ld	(__y),a
	xor	a
	ld	(__n),a
	ld	hl,0	;const
	ld	a,l
	ld	(__t),a
	call	_update_tile
	xor	a
	ld	(_gpit),a
	jp	i_54	;EOS
.i_52
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
.i_54
	ld	a,(_gpit)
	sub	32
	jp	nc,i_53	;
	ld	hl,_bolts
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	add	hl,hl
	pop	de
	add	hl,de
	inc	hl
	ld	a,(_x0)
	cp	(hl)
	jp	nz,i_56	;
	ld	hl,_bolts
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	add	hl,hl
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	a,(_y0)
	cp	(hl)
	jp	nz,i_56	;
	ld	hl,_bolts
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	add	hl,hl
	pop	de
	add	hl,de
	ld	a,(_n_pant)
	cp	(hl)
	jp	nz,i_56	;
	defc	i_56 = i_55
.i_57_i_56
	ld	hl,_bolts
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	add	hl,hl
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	inc	hl
	ld	(hl),0
	jp	i_53	;EOS
	defc	i_55 = i_52
.i_53
	ld	hl,_p_keys
	ld	a,(hl)
	dec	(hl)
	ld	hl,8	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_49
	ret


	C_LINE	176,"mk2.c::process_tile::0::47"
	C_LINE	0,"engine/player.h::process_tile::0::47"
	C_LINE	25,"engine/player.h::process_tile::0::47"

; Function player_init flags 0x00000200 __smallc 
; void player_init()
	C_LINE	25,"engine/player.h::player_init::0::47"
._player_init
	xor	a
	ld	(_p_vy),a
	ld	(_p_vx),a
	ld	a,1
	ld	(_p_jmp_ct),a
	xor	a
	ld	(_p_jmp_on),a
	ld	(_p_frame),a
	xor	a
	ld	(_p_subframe),a
	ld	a,1
	ld	(_p_facing),a
	ld	hl,255	;const
	ld	a,l
	ld	(_p_facing_h),a
	ld	a,l
	ld	(_p_facing_v),a
	xor	a
	ld	(_p_state),a
	ld	(_p_state_ct),a
	ld	a,9
	ld	(_p_life),a
	xor	a
	ld	(_p_objs),a
	ld	(_p_keys),a
	xor	a
	ld	(_p_killed),a
	ld	hl,0	;const
	ld	a,l
	ld	(_p_disparando),a
	ret


	C_LINE	146,"engine/player.h::player_init::0::48"

; Function player_calc_bounding_box flags 0x00000200 __smallc 
; void player_calc_bounding_box()
	C_LINE	146,"engine/player.h::player_calc_bounding_box::0::48"
._player_calc_bounding_box
			ld  a, (_gpx)
			add 4
			srl a
			srl a
			srl a
			srl a
			ld  (_ptx1), a
			ld  a, (_gpx)
			add 11
			srl a
			srl a
			srl a
			srl a
			ld  (_ptx2), a
			ld  a, (_gpy)
			add 8
			srl a
			srl a
			srl a
			srl a
			ld  (_pty1), a
			ld  a, (_gpy)
			add 15
			srl a
			srl a
			srl a
			srl a
			ld  (_pty2), a
	ret


	C_LINE	276,"engine/player.h::player_calc_bounding_box::0::49"

; Function player_kill flags 0x00000200 __smallc 
; void player_kill()
	C_LINE	276,"engine/player.h::player_kill::0::49"
._player_kill
	ld	hl,_p_life
	ld	a,(hl)
	dec	(hl)
	ld	hl,(_p_killme)
	ld	h,0
	push	hl
	call	_beep_fx
	pop	bc
	ld	a,2
	ld	(_p_state),a
	ld	hl,50	;const
	ld	a,l
	ld	(_p_state_ct),a
	ret


	C_LINE	377,"engine/player.h::player_kill::0::50"

; Function player_move flags 0x00000200 __smallc 
; unsigned char player_move()
	C_LINE	377,"engine/player.h::player_move::0::50"
._player_move
	ld	hl,0	;const
	ld	a,l
	ld	(_wall_h),a
	ld	h,0
	ld	a,l
	ld	(_wall_v),a
	C_LINE	0,"./engine/playermods/va.h::player_move::1::51"
	C_LINE	0,"./engine/playermods/va_gravity_asm.h::player_move::1::51"
			ld  a, (_do_gravity)
			or  a
			jr  z, _player_gravity_done
			; Signed comparisons are hard
			; p_vy <=  127  -  6 
			; We are going to take a shortcut.
			; If p_vy < 0, just add  6 .
			; If p_vy > 0, we can use unsigned comparition anyway.
			ld  a, (_p_vy)
			bit 7, a
			jr  nz, _player_gravity_add 	; < 0
			cp   127  -  6 
			jr  nc, _player_gravity_maximum
		._player_gravity_add
			add  6 
			jr  _player_gravity_vy_set
		._player_gravity_maximum
			ld  a,  127 
		._player_gravity_vy_set
			ld  (_p_vy), a
		._player_gravity_done
			ld  a, (_p_gotten)
			or  a
			jr  z, _player_gravity_p_gotten_done
			xor a
			ld  (_p_vy), a
		._player_gravity_p_gotten_done
	C_LINE	8,"./engine/playermods/va.h::player_move::1::51"
	ld	hl,(_p_y)
	push	hl
	ld	hl,_p_vy
	call	l_gchar
	pop	de
	add	hl,de
	ld	(_p_y),hl
	ld	a,h
	rla
	jp	nc,i_58	;
	ld	hl,0	;const
	ld	(_p_y),hl
.i_58
	ld	hl,(_p_y)
	ld	de,2304
	ex	de,hl
	call	l_gt
	jp	nc,i_59	;
	ld	hl,2304	;const
	ld	(_p_y),hl
.i_59
	ld	hl,(_p_y)
	ld	de,4
	call	l_asr_hl_by_e
	ld	h,0
	ld	a,l
	ld	(_gpy),a
	C_LINE	0,"./engine/playermods/va_collision_asm.h::player_move::1::51"
		call _player_calc_bounding_box
		xor a 
		ld  (_hit_v), a
		ld  a, (_ptx1)
		ld  (_cx1), a
		ld  a, (_ptx2)
		ld  (_cx2), a
		ld  a, (_p_vy)
					ld  c, a
			ld  a, (_ptgmy)
			add c
		or  a
		jp  z, _va_collision_done
		bit 7, a
		jr  z, _va_collision_vy_positive
	._va_collision_vy_negative
		ld  a, (_pty1)
		ld  (_cy1), a
		ld  (_cy2), a
		call _cm_two_points
		ld  a, (_at1)
		and 8
		jr  nz, _va_col_vy_neg_do
		ld  a, (_at2)
		and 8
		jr  z, _va_collision_checkevil
	._va_col_vy_neg_do
			xor a
		ld  (_p_vy), a
		ld  a, (_pty1)
		inc a
		sla a
		sla a
		sla a
		sla a		
			sub 8
		ld  (_gpy), a
		ld  d, 0
		ld  e, a
		ld  l,  4 
		call l_asl
		ld  (_p_y), hl
		ld  a,  1 
		ld  (_wall_v), a
		jr  _va_collision_checkevil
	._va_collision_vy_positive
		ld  a, (_pty2)
		ld  (_cy1), a
		ld  (_cy2), a
		call _cm_two_points
			ld  a, (_at1)
			and 8
			jr  nz, _va_col_vy_pos_do
			ld  a, (_at2)
			and 8
			jr  nz, _va_col_vy_pos_do
			ld  a, (_gpy)
			dec a
			and 15
			cp  8 
			jr  nc, _va_collision_checkevil
			ld  a, (_at1)
			and 4
			jr  nz, _va_col_vy_pos_do
			ld  a, (_at2)
			and 4
			jr  z, _va_collision_checkevil
	._va_col_vy_pos_do
			xor a
		ld  (_p_vy), a	
		ld  a, (_pty2)
		dec a 
		sla a
		sla a
		sla a
		sla a
		ld  (_gpy), a
		ld  d, 0
		ld  e, a
		ld  l,  4 
		call l_asl
		ld  (_p_y), hl
		ld  a,  2 
		ld  (_wall_v), a
		jr  _va_collision_done
	._va_collision_checkevil
	ld	a,(_at1)
	cp	1
	jp	z,i_60	;
	ld	a,(_at2)
	cp	1
	jp	z,i_60	;
	ld	hl,0	;const
	jr	i_61
.i_60
	ld	hl,1	;const
.i_61
	ld	h,0
	ld	a,l
	ld	(_hit_v),a
	._va_collision_done
	ld	hl,(_gpx)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_gpxx),a
	ld	hl,(_gpy)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_gpyy),a
	C_LINE	47,"./engine/playermods/va.h::player_move::1::51"
	C_LINE	0,"./engine/playermods/possee.h::player_move::1::51"
	ld	hl,(_gpy)
	ld	h,0
	ld	bc,16
	add	hl,bc
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_cy2),a
	ld	a,l
	ld	(_cy1),a
	ld	a,(_ptx1)
	ld	(_cx1),a
	ld	hl,(_ptx2)
	ld	h,0
	ld	a,l
	ld	(_cx2),a
	call	_cm_two_points
	ld	a,(_at1)
	and	12
	jp	nz,i_62	;
	ld	a,(_at2)
	and	12
	jp	z,i_64	;
.i_62
	ld	hl,(_gpy)
	ld	h,0
	ld	a,15
	and	l
	ld	l,a
	ld	a,l
	sub	8
	jp	nc,i_64	;
	ld	hl,1	;const
	jr	i_65
.i_64
	ld	hl,0	;const
.i_65
	ld	h,0
	ld	a,l
	ld	(_possee),a
	C_LINE	52,"./engine/playermods/va.h::player_move::1::51"
	C_LINE	0,"./engine/playermods/jump_sideview.h::player_move::1::51"
	ld	hl,(_pad_this_frame)
	ld	h,0
	ld	a,128
	and	l
	ld	l,a
	jr	nz,ASMPC+3
	scf
	jp	nc,i_67	;
	ld	a,(_p_jmp_on)
	and	a
	jp	nz,i_67	;
	ld	a,(_possee)
	and	a
	jp	nz,i_68	;
	ld	a,(_p_gotten)
	and	a
	jp	z,i_67	;
.i_68
	defc	i_67 = i_66
.i_70_i_67
	ld	a,1
	ld	(_p_jmp_on),a
	xor	a
	ld	(_p_jmp_ct),a
	ld	hl,1	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_66
	ld	hl,(_pad0)
	ld	h,0
	ld	a,128
	and	l
	ld	l,a
	jr	nz,ASMPC+3
	scf
	jp	nc,i_72	;
	ld	a,(_p_jmp_on)
	and	a
	jp	z,i_72	;
	defc	i_72 = i_71
.i_73_i_72
	ld	hl,_p_vy
	call	l_gchar
	push	hl
	ld	hl,(_p_jmp_ct)
	ld	h,0
	ld	a,l
	rrca
	and	127
	ld	l,a
	ld	de,20
	ex	de,hl
	and	a
	sbc	hl,de
	pop	de
	ex	de,hl
	and	a
	sbc	hl,de
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	hl,_p_vy
	ld	(hl),a
	call	l_gchar
	ld	a,l
	xor	128
	sub	-80
	jp	nc,i_74	;
	ld	a,176
	call	l_sxt
	ld	a,l
	ld	(_p_vy),a
.i_74
	ld	hl,_p_jmp_ct
	ld	a,(hl)
	inc	(hl)
	ld	a,(_p_jmp_ct)
	cp	8
	jp	nz,i_75	;
	ld	hl,0	;const
	ld	a,l
	ld	(_p_jmp_on),a
.i_75
.i_71
	ld	hl,(_pad0)
	ld	h,0
	ld	a,128
	and	l
	ld	l,a
	jr	nz,ASMPC+3
	scf
	ccf
	jp	nc,i_76	;
	ld	hl,0	;const
	ld	a,l
	ld	(_p_jmp_on),a
.i_76
	C_LINE	59,"./engine/playermods/va.h::player_move::1::54"
	C_LINE	405,"engine/player.h::player_move::1::54"
	C_LINE	0,"./engine/playermods/ha.h::player_move::1::54"
	C_LINE	0,"./engine/playermods/ha_controller.h::player_move::1::54"
	ld	hl,(_pad0)
	ld	h,0
	ld	a,4
	and	l
	ld	l,a
	jp	z,i_77	;
	ld	hl,(_pad0)
	ld	h,0
	ld	a,8
	and	l
	ld	l,a
	jp	z,i_77	;
	ld	hl,0	;const
	jr	i_78
.i_77
	ld	hl,1	;const
.i_78
	ld	a,l
	ld	hl,_rda
	ld	(hl),a
	and	a
	jp	nz,i_79	;
	ld	hl,_p_vx
	call	l_gchar
	ld	de,0
	ex	de,hl
	call	l_gt
	jp	nc,i_80	;
	ld	hl,_p_vx
	call	l_gchar
	ld	bc,-4
	add	hl,bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	hl,_p_vx
	ld	(hl),a
	rla
	jp	nc,i_81	;
	xor	a
	ld	(_p_vx),a
	jp	i_82	;EOS
	defc	i_81 = i_82
.i_80
	ld	hl,_p_vx
	ld	a,(hl)
	rla
	jp	nc,i_83	;
	ld	hl,_p_vx
	call	l_gchar
	ld	bc,4
	add	hl,bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	hl,_p_vx
	ld	(hl),a
	call	l_gchar
	ld	de,0
	ex	de,hl
	call	l_gt
	jp	nc,i_84	;
	ld	hl,0	;const
	ld	a,l
	ld	(_p_vx),a
.i_84
.i_83
.i_82
.i_79
	ld	hl,(_pad0)
	ld	h,0
	ld	a,4
	and	l
	ld	l,a
	jr	nz,ASMPC+3
	scf
	jp	nc,i_85	;
	ld	hl,_p_vx
	call	l_gchar
	ld	de,65488
	ex	de,hl
	call	l_gt
	jp	nc,i_86	;
	xor	a
	ld	(_p_facing),a
	ld	hl,_p_vx
	call	l_gchar
	ld	bc,-6
	add	hl,bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_p_vx),a
.i_86
.i_85
	ld	hl,(_pad0)
	ld	h,0
	ld	a,8
	and	l
	ld	l,a
	jr	nz,ASMPC+3
	scf
	jp	nc,i_87	;
	ld	hl,_p_vx
	call	l_gchar
	ld	a,l
	xor	128
	sub	176
	jp	nc,i_88	;
	ld	hl,_p_vx
	call	l_gchar
	ld	bc,6
	add	hl,bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_p_vx),a
	ld	hl,1	;const
	ld	a,l
	ld	(_p_facing),a
.i_88
	C_LINE	7,"./engine/playermods/ha.h::player_move::1::61"
.i_87
	ld	hl,(_p_x)
	push	hl
	ld	hl,_p_vx
	call	l_gchar
	pop	de
	add	hl,de
	ld	(_p_x),hl
	ld	a,(_p_gotten)
	and	a
	jp	z,i_89	;
	ld	hl,(_p_x)
	push	hl
	ld	hl,_ptgmx
	call	l_gchar
	pop	de
	add	hl,de
	ld	(_p_x),hl
.i_89
	ld	hl,(_p_x)
	ld	a,h
	rla
	jp	nc,i_90	;
	ld	hl,0	;const
	ld	(_p_x),hl
.i_90
	ld	hl,(_p_x)
	ld	de,3584
	ex	de,hl
	call	l_gt
	jp	nc,i_91	;
	ld	hl,3584	;const
	ld	(_p_x),hl
.i_91
	ld	hl,(_p_x)
	ld	de,4
	call	l_asr_hl_by_e
	ld	h,0
	ld	a,l
	ld	(_gpx),a
	C_LINE	0,"./engine/playermods/ha_collision_asm.h::player_move::1::61"
		call _player_calc_bounding_box
		ld  a, (_pty1)
		ld  (_cy1), a
		ld  a, (_pty2)
		ld  (_cy2), a
		ld  a, (_p_vx)
			ld  c, a
			ld  a, (_ptgmx)
			add c
		or  a
		jp  z, _ha_collision_done
		bit 7, a
		jr  z, _ha_collision_vx_positive
	._ha_collision_vx_negative
		ld  a, (_ptx1)
		ld  (_cx1), a
		ld  (_cx2), a
		call _cm_two_points
		ld  a, (_at1)
		and 8
		jr  nz, _ha_col_vx_neg_do
		ld  a, (_at2)
		and 8
		jr  z, _ha_collision_checkevil
	._ha_col_vx_neg_do
			xor a
		ld  (_p_vx), a
		ld  a, (_ptx1)
		inc a
		sla a
		sla a
		sla a
		sla a
			sub 4
		ld (_gpx), a
		ld  d, 0
		ld  e, a
		ld  l,  4 
		call l_asl
		ld  (_p_x), hl
		ld  a,  3 
		ld  (_wall_h), a
		jr  _ha_collision_checkevil
	._ha_collision_vx_positive
		ld  a, (_ptx2)
		ld  (_cx1), a
		ld  (_cx2), a
		call _cm_two_points
		ld  a, (_at1)
		and 8
		jr  nz, _ha_col_vx_pos_do
		ld  a, (_at2)
		and 8
		jr  z, _ha_collision_checkevil
	._ha_col_vx_pos_do
			xor a
		ld  (_p_vx), a
		ld  a, (_ptx2)
		dec a
		sla a
		sla a
		sla a
		sla a
			add 4
		ld (_gpx), a
		ld  d, 0
		ld  e, a
		ld  l,  4 
		call l_asl
		ld  (_p_x), hl
		ld  a,  4 
		ld  (_wall_h), a
	._ha_collision_checkevil
	._ha_collision_done
	C_LINE	27,"./engine/playermods/ha.h::player_move::1::61"
	C_LINE	411,"engine/player.h::player_move::1::61"
	C_LINE	0,"./engine/playermods/type10.h::player_move::1::61"
	ld	hl,(_p_x)
	ld	de,4
	call	l_asr_hl_by_e
	ld	a,l
	ld	hl,_gpx
	ld	(hl),a
	ld	l,(hl)
	ld	h,0
	ld	bc,8
	add	hl,bc
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_cx1),a
	ld	hl,(_gpy)
	ld	h,0
	ld	bc,8
	add	hl,bc
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_cy1),a
	ld	a,(_wall_h)
	cp	3
	jp	nz,i_92	;
	ld	hl,(_gpx)
	ld	h,0
	inc	hl
	inc	hl
	inc	hl
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_cx1),a
	call	_attr
	ld	a,l
	cp	10
	jp	nz,i_93	;
	ld	hl,(_cy1)
	ld	a,l
	ld	(_y1),a
	ld	(_y0),a
	ld	a,(_cx1)
	ld	(_x0),a
	ld	hl,(_cx1)
	dec	l
	ld	h,0
	ld	a,l
	ld	(_x1),a
	call	_process_tile
	jp	i_94	;EOS
	defc	i_93 = i_94
.i_92
	ld	a,(_wall_h)
	cp	4
	jp	nz,i_95	;
	ld	hl,(_gpx)
	ld	h,0
	ld	bc,12
	add	hl,bc
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(_cx1),a
	call	_attr
	ld	a,l
	cp	10
	jp	nz,i_96	;
	ld	hl,(_cy1)
	ld	a,l
	ld	(_y1),a
	ld	(_y0),a
	ld	a,(_cx1)
	ld	(_x0),a
	ld	hl,(_cx1)
	inc	l
	ld	h,0
	ld	a,l
	ld	(_x1),a
	call	_process_tile
.i_96
	C_LINE	460,"engine/player.h::player_move::1::65"
	C_LINE	0,"./engine/playermods/fire.h::player_move::1::65"
	C_LINE	466,"engine/player.h::player_move::1::65"
	C_LINE	0,"./engine/playermods/hitter.h::player_move::1::65"
	C_LINE	472,"engine/player.h::player_move::1::65"
	C_LINE	0,"./engine/playermods/bombs.h::player_move::1::65"
	C_LINE	478,"engine/player.h::player_move::1::65"
	C_LINE	0,"./engine/playermods/fire_button.h::player_move::1::65"
	C_LINE	481,"engine/player.h::player_move::1::65"
.i_95
.i_94
	ld	a,(_hit_v)
	and	a
	jp	z,i_97	;
	ld	hl,_p_vy
	call	l_gchar
	call	l_neg
	push	hl
	ld	hl,100	;const
	push	hl
	call	_addsign
	pop	bc
	pop	bc
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_p_vy),a
	ld	hl,(_p_y)
	ld	a,h
	ld	h,a
	ld	l,0
	ld	(_p_y),hl
	ld	hl,(_gpy)
	ld	h,0
	ld	a,240
	and	l
	ld	l,a
	ld	a,l
	ld	(_gpy),a
	ld	a,(_p_state)
	and	a
	jp	nz,i_98	;
	ld	hl,3	;const
	ld	a,l
	ld	(_p_killme),a
.i_98
.i_97
	ld	a,(_possee)
	and	a
	jp	nz,i_100	;
	ld	a,(_p_gotten)
	and	a
	jp	nz,i_100	;
	defc	i_100 = i_99
.i_101_i_100
	ld	hl,_player_frames
	push	hl
	ld	hl,(_p_facing)
	ld	h,0
	ld	bc,8
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	ld	(_p_n_f),hl
	jp	i_102	;EOS
.i_99
	ld	hl,(_p_facing)
	ld	h,0
	add	hl,hl
	add	hl,hl
	ld	a,l
	ld	(_gpit),a
	ld	a,(_p_vx)
	and	a
	jp	nz,i_103	;
	ld	hl,_player_frames
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	inc	hl
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	ld	(_p_n_f),hl
	jp	i_104	;EOS
.i_103
	ld	hl,_p_subframe
	ld	a,(hl)
	inc	(hl)
	ld	a,(_p_subframe)
	cp	4
	jp	nz,i_105	;
	xor	a
	ld	(_p_subframe),a
	ld	hl,(_p_frame)
	ld	h,0
	inc	hl
	ld	a,l
	and	3
	ld	l,a
	ld	h,0
	ld	(_p_frame),a
	call	_step
.i_105
	ld	hl,_player_frames
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	ex	de,hl
	ld	hl,(_p_frame)
	ld	h,0
	add	hl,de
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	ld	(_p_n_f),hl
.i_104
.i_102
	ret


	C_LINE	182,"mk2.c::player_move::0::72"
	C_LINE	0,"engine/enems.h::player_move::0::72"
	C_LINE	0,"./engine/enemmods/helper_funcs.h::player_move::0::72"
	C_LINE	16,"engine/enems.h::player_move::0::72"
	C_LINE	24,"engine/enems.h::player_move::0::72"

; Function enems_init flags 0x00000200 __smallc 
; void enems_init()
	C_LINE	24,"engine/enems.h::enems_init::0::72"
._enems_init
	xor	a
	ld	(_gpit),a
	jp	i_108	;EOS
.i_106
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
.i_108
	ld	a,(_gpit)
	sub	3
	jp	nc,i_107	;
	ld	de,_en_an_count
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	ld	(hl),3
	ld	de,_en_an_state
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	ld	(hl),0
	ld	hl,_enoffs
	ld	a,(_gpit)
	add	(hl)
	ld	(_enoffsmasi),a
	ld	hl,_baddies
	push	hl
	ld	hl,(_enoffsmasi)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,hl
	add	hl,hl
	add	hl,bc
	add	hl,hl
	pop	de
	add	hl,de
	ld	bc,8
	add	hl,bc
	ld	a,(hl)
	ld	hl,__en_t
	ld	(hl),a
	ld	l,(hl)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	and	31
	ld	hl,_gpt
	ld	(hl),a
	and	a
	jp	z,i_110	;
	ld	a,(_gpt)
	sub	16
	jp	nc,i_110	;
	defc	i_110 = i_109
.i_111_i_110
	ld	de,_en_an_base_frame
	ld	hl,(_gpit)
	ld	h,0
	add	hl,de
	push	hl
	ld	hl,(__en_t)
	ld	h,0
	ld	a,3
	and	l
	ld	l,a
	add	hl,hl
	pop	de
	ld	a,l
	ld	(de),a
	ld	hl,(_gpt)
	ld	h,0
.i_114
	ld	a,l
	jp	i_115	;EOS
	C_LINE	0,"./my/extra_enems_init.h::enems_init::5::76"
	C_LINE	141,"engine/enems.h::enems_init::5::76"
	jp	i_113	;EOS
	defc	i_115 = i_113
	defc	i_113 = i_106
	defc	i_109 = i_106
.i_107
	ret


	C_LINE	158,"engine/enems.h::enems_init::0::76"

; Function enems_move_spr_abs flags 0x00000200 __smallc 
; void enems_move_spr_abs()
	C_LINE	158,"engine/enems.h::enems_move_spr_abs::0::76"
._enems_move_spr_abs
		; enter: IX = sprite structure address 
		;        IY = clipping rectangle, set it to "ClipStruct" for full screen 
		;        BC = animate bitdef displacement (0 for no animation) 
		;         H = new row coord in chars 
		;         L = new col coord in chars 
		;         D = new horizontal rotation (0..7) ie horizontal pixel position 
		;         E = new vertical rotation (0..7) ie vertical pixel position 
		ld  a, (_enit)
		sla a
		ld  c, a
		ld  b, 0 				 
		ld  hl, _sp_moviles
		add hl, bc
		ld  e, (hl)
		inc hl 
		ld  d, (hl)
		push de						
		pop ix
		ld  iy, vpClipStruct
		ld  hl, _en_an_c_f
		add hl, bc 				 
		ld  e, (hl)
		inc hl 
		ld  d, (hl) 			 
		ld  hl, _en_an_n_f
		add hl, bc 				 
		ld  a, (hl)
		inc hl
		ld  h, (hl)
		ld  l, a 				 
		or  a 					 
		sbc hl, de 				 
		push bc 				 
		ld  b, h
		ld  c, l 				 
		ld  a, (__en_y)					
		srl a
		srl a
		srl a
		add  2 
		ld h, a
		ld  a, (__en_x)
		srl a
		srl a
		srl a
		add  1 
		ld  l, a
		ld  a, (__en_x)
		and 7
		ld  d, a
		ld  a, (__en_y)
		and 7
		ld  e, a
		call SPMoveSprAbs
		pop bc 					 
		ld  hl, _en_an_c_f
		add hl, bc
		ex  de, hl 				 
		ld  hl, _en_an_n_f
		add hl, bc 				 
		ldi
		ldi
	ret


	C_LINE	253,"engine/enems.h::enems_move_spr_abs::0::77"

; Function enems_move flags 0x00000200 __smallc 
; void enems_move()
	C_LINE	253,"engine/enems.h::enems_move::0::77"
._enems_move
	ld	hl,0	;const
	ld	a,l
	ld	(_ptgmx),a
	ld	a,l
	call	l_sxt
	ld	a,l
	ld	(_ptgmy),a
	ld	a,l
	ld	(_p_gotten),a
	xor	a
	ld	(_tocado),a
	ld	(_enit),a
	jp	i_118	;EOS
.i_116
	ld	hl,(_enit)
	ld	h,0
	inc	hl
	ld	a,l
	ld	(_enit),a
.i_118
	ld	a,(_enit)
	sub	3
	jp	nc,i_117	;
	ld	hl,0	;const
	ld	a,l
	ld	(_animate),a
	ld	a,l
	ld	(_killable),a
	ld	(_active),a
	ld	hl,(_enoffs)
	ld	h,0
	ex	de,hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	ld	h,0
	ld	a,l
	ld	(_enoffsmasi),a
				ld 	hl, (_enoffsmasi)
				ld  h, 0
				add hl, hl 				 
				ld  d, h
				ld  e, l 				 
				add hl, hl 				 
				add hl, hl 				 
				add hl, de 				 
				ld  de, _baddies
				add hl, de
				ld  (__baddies_pointer), hl 		 
				ld  a, (hl)
				ld  (__en_x), a
				inc hl 
				ld  a, (hl)
				ld  (__en_y), a
				inc hl 
				ld  a, (hl)
				ld  (__en_x1), a
				inc hl 
				ld  a, (hl)
				ld  (__en_y1), a
				inc hl 
				ld  a, (hl)
				ld  (__en_x2), a
				inc hl 
				ld  a, (hl)
				ld  (__en_y2), a
				inc hl 
				ld  a, (hl)
				ld  (__en_mx), a
				inc hl 
				ld  a, (hl)
				ld  (__en_my), a
				inc hl 
				ld  a, (hl)
				ld  (__en_t), a
				inc hl 
				ld  a, (hl)
				ld  (__en_life), a
	ld	a,(__en_t)
	and	a
	jp	nz,i_119	;
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ex	de,hl
	ld	hl,_sprite_18_a
	call	l_pint
	jp	i_120	;EOS
.i_119
	ld	hl,(__en_t)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	and	31
	ld	hl,_gpt
	ld	(hl),a
	ld	l,(hl)
	ld	h,0
	ld	a,l
	cp	8
	jp	nz,i_121	;
								ld  a, (__en_x)
								ld  c, a
								ld  a, (_gpx)
								add 12
								cp  c
								jp  c, _enems_move_pregotten_not 	 
								ld  a, (_gpx)
								ld  c, a
								ld  a, (__en_x)
								add 12
								cp  c 
								jp  c, _enems_move_pregotten_not 	 
								ld  a, 1
								jr  _enems_move_pregotten_set
							._enems_move_pregotten_not
								xor a
							._enems_move_pregotten_set
								ld  (_pregotten), a			
.i_121
	ld	hl,(_gpt)
	ld	h,0
.i_124
	ld	a,l
	cp	+(1% 256)
	jp	z,i_125	;
	cp	+(8% 256)
	jp	z,i_126	;
	jp	i_127	;EOS
.i_125
	ld	hl,1	;const
	ld	a,l
	ld	(_killable),a
.i_126
	C_LINE	0,"./engine/enemmods/move_linear.h::enems_move::5::83"
		ld 	a, 1
		ld  (_active), a
		ld  (_animate), a
		ld  a, (__en_mx)
		ld  c, a
		ld  a, (__en_x)
		add a, c
		ld  (__en_x), a
		ld  c, a
		ld  a, (__en_x1)
		cp  c
		jr  z, _enems_lm_change_axis_x
		ld  a, (__en_x2)
		cp  c
		jr  nz, _enems_lm_change_axis_x_done
	._enems_lm_change_axis_x
		ld  a, (__en_mx)
		neg
		ld  (__en_mx), a
	._enems_lm_change_axis_x_done
		ld  a, (__en_my)
		ld  c, a
		ld  a, (__en_y)
		add a, c
		ld  (__en_y), a
		ld  c, a
		ld  a, (__en_y1)
		cp  c
		jr  z, _enems_lm_change_axis_y
		ld  a, (__en_y2)
		cp  c
		jr  nz, _enems_lm_change_axis_y_done
	._enems_lm_change_axis_y
		ld  a, (__en_my)
		neg
		ld  (__en_my), a
	._enems_lm_change_axis_y_done
	C_LINE	483,"engine/enems.h::enems_move::5::83"
	jp	i_123	;EOS
	C_LINE	0,"./my/extra_enems_move.h::enems_move::5::83"
	C_LINE	522,"engine/enems.h::enems_move::5::83"
.i_127
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ex	de,hl
	ld	hl,_sprite_18_a
	call	l_pint
.i_123
	ld	a,(_active)
	and	a
	jp	z,i_128	;
	ld	a,(_animate)
	and	a
	jp	z,i_129	;
	ld	a,(__en_mx)
	and	a
	jp	z,i_130	;
	ld	hl,(__en_x)
	ld	h,0
	ld	bc,4
	add	hl,bc
	ld	a,l
	rrca
	rrca
	rrca
	and	1
	ld	l,a
	ld	h,0
	jp	i_131	;
.i_130
	ld	hl,(__en_y)
	ld	h,0
	ld	bc,4
	add	hl,bc
	ld	a,l
	rrca
	rrca
	rrca
	and	1
	ld	l,a
	ld	h,0
.i_131
	ld	a,l
	ld	(_gpjt),a
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_enit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,_enem_frames
	push	hl
	ld	de,_en_an_base_frame
	ld	hl,(_enit)
	ld	h,0
	add	hl,de
	ld	e,(hl)
	ld	d,0
	ld	hl,(_gpjt)
	ld	h,0
	add	hl,de
	add	hl,hl
	pop	de
	add	hl,de
	call	l_gint	;
	pop	de
	call	l_pint
	C_LINE	0,"./engine/enemmods/platforms.h::enems_move::5::86"
.i_129
			ld  a, (_gpt)
			cp  8
			jp  nz, _enems_platforms_done
			ld  a, (_p_jmp_on)
			or  a
			jp  nz, _enems_collision_skip
			ld  a, (_pregotten)
			or  a
			jp  z, _enems_collision_skip
			ld  a, (_p_gotten)
			or  a
			jp  nz, _enems_collision_skip
			ld  a, (__en_mx)
			or  a
			jr  z, _enems_plats_horz_done
			ld  a, (__en_y)
			ld  c, a
			ld  a, (_gpy)
			add 18
			cp  c
			jr  c, _enems_plats_horz_done
			ld  a, (_gpy)
			add 8
			ld  c, a
			ld  a, (__en_y)
			cp  c
			jr  c, _enems_plats_horz_done
		._enems_plats_horz_do
			ld  a, 1
			ld  (_p_gotten), a
			ld  a, (__en_mx)
			sla a
			sla a
			sla a
			sla a 	; times  4 
			ld  (_ptgmx), a
			call _enems_plats_gpy_set
		._enems_plats_horz_done
		._enems_plats_vert_check_1
			ld  a, (_gpy)
			add 10
			ld  c, a
			ld  a, (__en_y)
			cp  c
			jr  c, _enems_plats_vert_done
			ld  a, (__en_my)
			bit 7, a
			jr  z, _enems_plats_vert_check_2 	; _en_my is positive 
			ld  a, (__en_y)
			ld  c, a
			ld  a, (_gpy)
			add 17
			cp  c
			jr  nc, _enems_plats_vert_do
		._enems_plats_vert_check_2
			ld  a, (__en_y)
			ld  c, a
			ld  a, (__en_my)
			ld  b, a
			ld  a, (_gpy)
			add 17
			add b
			cp  c
			jr  c, _enems_plats_vert_done		
		._enems_plats_vert_do
			ld  a, 1
			ld  (_p_gotten), a
			ld  a, (__en_my)
			sla a
			sla a
			sla a
			sla a 	; times  4 
			ld  (_ptgmy), a
			xor a
			ld  (_p_vy), a
			call _enems_plats_gpy_set
		._enems_plats_vert_done
			jp  _enems_collision_skip
		._enems_plats_gpy_set
			ld  a, (__en_y)
			sub 16
			ld  (_gpy), a
			ld  d, 0
			ld  e, a
			ld  l,  4 
			call l_asl
			ld  (_p_y), hl
			ret 
		._enems_platforms_done
	C_LINE	567,"engine/enems.h::enems_move::5::86"
					ld  a, (_tocado)
					or  a
					jp  nz, _enems_collision_skip
					ld  a, (_p_state)
					or  a
					jp  nz, _enems_collision_skip
					ld  a, (__en_x)
					ld  c, a
					ld  a, (_gpx)
						add 12
					cp  c
					jp  c, _enems_collision_skip
					ld  a, (_gpx)
					ld  c, a
					ld  a, (__en_x)
						add 12
					cp  c
					jp  c, _enems_collision_skip
					ld  a, (__en_y)
					ld  c, a
					ld  a, (_gpy)
						add 12
					cp  c
					jp  c, _enems_collision_skip
					ld  a, (_gpy)
					ld  c, a
					ld  a, (__en_y)
						add 12
					cp  c
					jp  c, _enems_collision_skip			
	ld	a,(_p_life)
	and	a
	jp	z,i_132	;
	ld	a,1
	ld	(_tocado),a
.i_132
	ld	hl,2	;const
	ld	a,l
	ld	(_p_killme),a
					._enems_collision_skip
.i_128
.i_120
.i_133
			.enems_loop_continue_a
	call	_enems_move_spr_abs
				ld  hl, (__baddies_pointer) 		 
				ld  a, (__en_x)
				ld  (hl), a
				inc hl
				ld  a, (__en_y)
				ld  (hl), a
				inc hl
				ld  a, (__en_x1)
				ld  (hl), a
				inc hl
				ld  a, (__en_y1)
				ld  (hl), a
				inc hl
				ld  a, (__en_x2)
				ld  (hl), a
				inc hl
				ld  a, (__en_y2)
				ld  (hl), a
				inc hl
				ld  a, (__en_mx)
				ld  (hl), a
				inc hl
				ld  a, (__en_my)
				ld  (hl), a
				inc hl
				ld  a, (__en_t)
				ld  (hl), a
				inc hl
				ld  a, (__en_life)
				ld  (hl), a
	jp	i_116	;EOS
.i_117
	ret


	C_LINE	196,"mk2.c::enems_move::0::88"
	C_LINE	0,"engine/update_sprites.h::enems_move::0::88"
	C_LINE	1,"engine/update_sprites.h::enems_move::0::88"

; Function update_sprites flags 0x00000200 __smallc 
; void update_sprites()
	C_LINE	1,"engine/update_sprites.h::update_sprites::0::88"
._update_sprites
	ld	hl,(_p_state)
	ld	h,0
	ld	a,2
	and	l
	ld	l,a
	jp	z,i_135	;
	ld	a,(_half_life)
	and	a
	jp	nz,i_134	;
.i_135
					ld  ix, (_sp_player)
					ld  iy, vpClipStruct
					ld  hl, (_p_n_f)
					ld  de, (_p_c_f)
					or  a
					sbc hl, de
					ld  b, h
					ld  c, l
					ld  a, (_gpy)
					srl a
					srl a
					srl a
					add  2 
					ld  h, a 
					ld  a, (_gpx)
					srl a
					srl a
					srl a
					add  1 
					ld  l, a 
					ld  a, (_gpx)
					and 7
					ld  d, a
					ld  a, (_gpy)
					and 7
					ld  e, a
					call SPMoveSprAbs
	jp	i_137	;EOS
.i_134
					ld  ix, (_sp_player)
					ld  iy, vpClipStruct
					ld  hl, (_p_n_f)
					ld  de, (_p_c_f)
					or  a
					sbc hl, de
					ld  b, h
					ld  c, l
					ld  hl, 0xfefe
					ld  de, 0
					call SPMoveSprAbs
.i_137
	ld	hl,(_p_n_f)
	ld	(_p_c_f),hl
	ret


	C_LINE	199,"mk2.c::update_sprites::0::91"
	C_LINE	0,"engine/drawscr.h::update_sprites::0::91"
	C_LINE	11,"engine/drawscr.h::update_sprites::0::91"

; Function advance_worm flags 0x00000200 __smallc 
; void advance_worm()
	C_LINE	11,"engine/drawscr.h::advance_worm::0::91"
._advance_worm
					call _rand 
			ld   a, l
			and  15
			ld   (_gpjt), a
			ld  bc, (_gpit)
			ld  b, 0
			ld  de, (_gpt)
			ld  d, 0
			ld  hl, _behs
			add hl, de
			ld  a, (hl)
			ld  hl, _map_attr
			add hl, bc
			ld  (hl), a
			ld  a, (_gpd)
							ld  d, a
				or  a
				jr  nz, _draw_scr_alt_tile_skip
				ld  a, (_gpjt)
				cp   1
				jr  nz, _draw_scr_alt_tile_skip
				ld  a,  19 				
				jr _draw_scr_alt_tile_done
			._draw_scr_alt_tile_skip
				ld  a, d
			._draw_scr_alt_tile_done
			ld  hl, _map_buff
			add hl, bc
			ld  (hl), a
			ld  (__t), a
			call _draw_coloured_tile
			ld  a, (__x)
			add 2
			cp  30 +  1 
			jr  c, _advance_worm_no_inc_y
			ld  a, (__y)
			add 2
			ld  (__y), a
			ld  a,  1 
		._advance_worm_no_inc_y
			ld  (__x), a
			ld  hl, _gpit
			inc (hl)
	ret


	C_LINE	122,"engine/drawscr.h::advance_worm::0::92"

; Function draw_scr_background flags 0x00000200 __smallc 
; void draw_scr_background()
	C_LINE	122,"engine/drawscr.h::draw_scr_background::0::92"
._draw_scr_background
	ld	de,_seed1
	ld	hl,(_n_pant)
	ld	h,0
	call	l_pint
	ld	de,_seed2
	ld	hl,(_level)
	ld	h,0
	call	l_pint
	call	_srand
			._draw_scr_get_scr_address
				ld  a, (_n_pant)
				sla a
				ld  d, 0
				ld  e, a
				ld  hl, _map
				add hl, de 		; HL = map + (n_pant << 1)
				ld  e, (hl)
				inc hl
				ld  d, (hl) 	; DE = index
				ld  hl, _map
				add hl, de      ; HL = map + index
				ld  (_map_pointer), hl
			._draw_scr_rle
				xor a
				ld  (_gpit), a
				ld  a,  1 
				ld  (__x), a
				ld  a,  2 
				ld  (__y), a
			._draw_scr_loop
				ld  a, (_gpit)
				cp  150
				jr  z, _draw_scr_loop_done
				ld  hl, (_map_pointer)
				ld  a, (hl)
				inc hl
				ld  (_map_pointer), hl
				ld  c, a
							and 0x0f
				ld  (_gpt), a
				ld  (_gpd), a
				ld  a, c
				ld  (_gpc), a
			._draw_scr_advance_loop
				ld  a, (_gpc)
				cp  0x10
				jr  c, _draw_scr_advance_loop_done
				sub 0x10
				ld  (_gpc), a
				call _advance_worm
				jr _draw_scr_advance_loop
			._draw_scr_advance_loop_done
				call _advance_worm
				jr _draw_scr_loop
			._draw_scr_loop_done			
				ld  a, 240
				ld  (_hotspot_y), a
				ld  a, (_n_pant)
				ld  b, a
				sla a
				add b
				ld  c, a
				ld  b, 0
				ld  hl, _hotspots
				add hl, bc
				ld  a, (hl) 		 
				ld  b, a
				srl a
				srl a
				srl a
				srl a
				ld  (__x), a
				ld  a, b
				and 15
				ld  (__y), a
				inc hl 				 
				ld  b, (hl) 		 
				inc hl 				 
				ld  c, (hl) 		 
				ld  a, b
				and c
							jr  nz, _hotspots_setup_do
				call _rand
				ld  a, l
				and 7
				cp  2		
				jr  z, _hotspots_setup_done
			._hotspots_setup_do
				ld  a, (__x)
				ld  e, a
				sla a
				sla a
				sla a
				sla a
				ld  (_hotspot_x), a
				ld  a, (__y)
				ld  d, a
				sla a
				sla a
				sla a
				sla a
				ld  (_hotspot_y), a
				sub d
				add e
				ld  e, a
				ld  d, 0
				ld  hl, _map_buff
				add hl, de
				ld  a, (hl)
				ld  (_orig_tile), a
				ld  a, c
				or  a
				jr  z, _hotspots_setup_set_refill
				ld  a, b
				jp  _hotspots_setup_set
			._hotspots_setup_set_refill
				xor a
			._hotspots_setup_set
				add 16
				ld  (__t), a		
				call _draw_coloured_tile_gamearea
			._hotspots_setup_done
				ld  hl, _bolts
				ld  b,  32 
			._open_locks_loop
				push bc
				ld  a, (_n_pant)
				ld  c, a
				ld  a, (hl)			 
				inc hl
				cp  c
				jr  nz, _open_locks_done
				ld  a, (hl)
				inc hl
				ld  d, a 			 
				ld  a, (hl)
				inc hl
				ld  e, a 			 
				ld  a, (hl)			 
				inc hl
				or  a
				jr  nz, _open_locks_done				
			._open_locks_do
				ld  a, d
				ld  (__x), a
				ld  a, e
				ld  (__y), a
				sla a
				sla a
				sla a
				sla a
				sub e
				add d
				ld  b, 0
				ld  c, a
				xor a
				push hl 			 
				ld  hl, _map_attr
				add hl, bc
				ld  (hl), a
				ld  hl, _map_buff
				add hl, bc
				ld  (hl), a
				ld  (__t), a
				call _draw_coloured_tile_gamearea
				pop hl
			._open_locks_done
				pop bc
				dec b
				jr  nz, _open_locks_loop
	ret


	C_LINE	560,"engine/drawscr.h::draw_scr_background::0::93"

; Function draw_scr flags 0x00000200 __smallc 
; void draw_scr()
	C_LINE	560,"engine/drawscr.h::draw_scr::0::93"
._draw_scr
	ld	a,1
	ld	(_is_rendering),a
	ld	a,(_no_draw)
	and	a
	jp	z,i_138	;
	xor	a
	ld	(_no_draw),a
	jp	i_139	;EOS
.i_138
	call	_draw_scr_background
.i_139
	ld	hl,(_n_pant)
	ld	h,0
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ld	h,0
	ld	a,l
	ld	(_enoffs),a
	call	_enems_init
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_level_data)
	ld	h,0
	call	l_div_u
	ex	de,hl
	ld	a,l
	ld	(_x_pant),a
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_level_data)
	ld	h,0
	call	l_div_u
	ld	h,0
	ld	a,l
	ld	(_y_pant),a
	call	_invalidate_viewport
	ld	hl,0	;const
	ld	a,l
	ld	(_is_rendering),a
	ret


	C_LINE	202,"mk2.c::draw_scr::0::96"
	C_LINE	0,"engine/hud.h::draw_scr::0::96"
	C_LINE	7,"engine/hud.h::draw_scr::0::96"
	C_LINE	29,"engine/hud.h::draw_scr::0::96"

; Function update_hud flags 0x00000200 __smallc 
; void update_hud()
	C_LINE	29,"engine/hud.h::update_hud::0::96"
._update_hud
	ld	hl,(_p_objs)
	ld	h,0
	ex	de,hl
	ld	hl,(_objs_old)
	ld	h,0
	call	l_ne
	jp	nc,i_140	;
	call	_draw_objs
	ld	hl,(_p_objs)
	ld	h,0
	ld	a,l
	ld	(_objs_old),a
.i_140
	ld	hl,(_p_life)
	ld	h,0
	ex	de,hl
	ld	hl,(_life_old)
	ld	h,0
	call	l_ne
	jp	nc,i_141	;
	ld	a,6
	ld	(__x),a
	xor	a
	ld	(__y),a
	ld	hl,(_p_life)
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_print_number2
	ld	hl,(_p_life)
	ld	h,0
	ld	a,l
	ld	(_life_old),a
.i_141
	ret


	C_LINE	205,"mk2.c::update_hud::0::99"
	C_LINE	0,"engine/flickscreen.h::update_hud::0::99"
	C_LINE	53,"engine/flickscreen.h::update_hud::0::99"

; Function flick_screen flags 0x00000200 __smallc 
; void flick_screen()
	C_LINE	53,"engine/flickscreen.h::flick_screen::0::99"
._flick_screen
	ld	a,(_gpx)
	and	a
	jp	nz,i_143	;
	ld	hl,_p_vx
	ld	a,(hl)
	rla
	jp	nc,i_143	;
	ld	hl,(_x_pant)
	ld	h,0
	xor	a
	sub	l
	jp	nc,i_143	;
	defc	i_143 = i_142
.i_144_i_143
	ld	hl,(_n_pant)
	dec	l
	ld	a,l
	ld	(_n_pant),a
	ld	hl,3584	;const
	ld	(_p_x),hl
	ld	a,224
	ld	(_gpx),a
	jp	i_145	;EOS
.i_142
	ld	a,(_gpx)
	cp	224
	jp	nz,i_147	;
	ld	hl,_p_vx
	call	l_gchar
	ld	de,0
	ex	de,hl
	call	l_gt
	jp	nc,i_147	;
	ld	hl,(_x_pant)
	ld	h,0
	push	hl
	ld	hl,(_level_data)
	ld	h,0
	dec	hl
	pop	de
	ex	de,hl
	and	a
	sbc	hl,de
	jp	nc,i_147	;
	defc	i_147 = i_146
.i_148_i_147
	ld	hl,(_n_pant)
	inc	l
	ld	a,l
	ld	(_n_pant),a
	ld	hl,0	;const
	ld	a,l
	ld	(_gpx),a
	ld	(_p_x),hl
.i_146
.i_145
	ld	a,(_gpy)
	and	a
	jp	nz,i_150	;
	ld	hl,_p_vy
	ld	a,(hl)
	rla
	jp	nc,i_150	;
	ld	hl,(_y_pant)
	ld	h,0
	xor	a
	sub	l
	jp	nc,i_150	;
	defc	i_150 = i_149
.i_151_i_150
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_level_data)
	ld	h,0
	ex	de,hl
	and	a
	sbc	hl,de
	ld	a,l
	ld	(_n_pant),a
	ld	hl,2304	;const
	ld	(_p_y),hl
	ld	a,144
	ld	(_gpy),a
	ld	hl,_p_vy
	call	l_gchar
	ld	de,65456
	ex	de,hl
	call	l_gt
	jp	nc,i_152	;
	ld	a,176
	call	l_sxt
	ld	a,l
	ld	(_p_vy),a
	jp	i_153	;EOS
	defc	i_152 = i_153
.i_149
	ld	a,(_gpy)
	cp	144
	jp	nz,i_155	;
	ld	hl,_p_vy
	call	l_gchar
	ld	de,0
	ex	de,hl
	call	l_gt
	jp	nc,i_155	;
	ld	hl,(_y_pant)
	ld	h,0
	push	hl
	ld	hl,(_level_data+1)
	ld	h,0
	dec	hl
	pop	de
	ex	de,hl
	and	a
	sbc	hl,de
	jp	nc,i_155	;
	defc	i_155 = i_154
.i_156_i_155
	ld	hl,_n_pant
	ld	a,(_level_data)
	add	(hl)
	ld	(_n_pant),a
	ld	hl,0	;const
	ld	a,l
	ld	(_gpy),a
	ld	(_p_y),hl
.i_154
.i_153
	ret


	C_LINE	213,"mk2.c::flick_screen::0::104"
	C_LINE	0,"mainloop/mainloop.h::flick_screen::0::104"
	C_LINE	0,"./mainloop/hide_sprites.h::flick_screen::0::104"
	C_LINE	1,"./mainloop/hide_sprites.h::flick_screen::0::104"

; Function hide_sprites flags 0x00000200 __smallc 
; void hide_sprites(unsigned char which_ones)
; parameter 'unsigned char which_ones' at sp+2 size(1)
	C_LINE	1,"./mainloop/hide_sprites.h::hide_sprites::0::104"
._hide_sprites
	ld	hl,2	;const
	add	hl,sp
	ld	a,(hl)
	and	a
	jp	nz,i_157	;
			ld  ix, (_sp_player)
			ld  iy, vpClipStruct
			ld  bc, 0
			ld  hl, 0xdede
			ld  de, 0
			call SPMoveSprAbs
.i_157
			xor a
		.hide_sprites_enems_loop
			ld  (_gpit), a
			sla a
			ld  c, a
			ld  b, 0
			ld  hl, _sp_moviles
			add hl, bc
			ld  e, (hl)
			inc hl
			ld  d, (hl)
			push de
			pop ix
			ld  iy, vpClipStruct
			ld  bc, 0
			ld  hl, 0xfefe	 
			ld  de, 0
			call SPMoveSprAbs
			ld  a, (_gpit)
			inc a
			cp  3
			jr  nz, hide_sprites_enems_loop
	ret


	C_LINE	8,"mainloop/mainloop.h::hide_sprites::0::106"
	C_LINE	12,"mainloop/mainloop.h::hide_sprites::0::106"

; Function main flags 0x00000000 __stdc 
; void main()
	C_LINE	12,"mainloop/mainloop.h::main::0::107"
._main
		di
	C_LINE	0,"./mainloop/mysystem.h::main::1::108"
	ld	hl,61937	;const
	push	hl
	call	sp_InitIM2
	pop	bc
	ld	hl,61937	;const
	push	hl
	call	sp_CreateGenericISR
	pop	bc
	ld	hl,255	;const
	push	hl
	ld	hl,_ISR
	push	hl
	call	sp_RegisterHook
	pop	bc
	pop	bc
	ld	hl,0	;const
	push	hl
	push	hl
	call	sp_Initialize
	pop	bc
	pop	bc
	ld	hl,0	;const
	push	hl
	call	sp_Border
	pop	bc
	ld	hl,0	;const
	push	hl
	ld	hl,40	;const
	push	hl
	ld	hl,14	;const
	push	hl
	ld	hl,_AD_FREE
	push	hl
	call	sp_AddMemory
	pop	bc
	pop	bc
	pop	bc
	pop	bc
	ld	hl,sp_JoyKeyboard
	ld	(_joyfunc),hl
	ld	hl,_tileset
	ld	(_gen_pt),hl
	xor	a
	ld	(_gpit),a
.i_160
	ld	hl,(_gpit)
	ld	h,0
	push	hl
	ld	hl,(_gen_pt)
	push	hl
	call	sp_TileArray
	pop	bc
	pop	bc
	ld	hl,(_gen_pt)
	ld	bc,8
	add	hl,bc
	ld	(_gen_pt),hl
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
.i_158
	ld	hl,(_gpit)
	ld	h,0
	ld	a,h
	or	l
	jp	nz,i_160	;EOS
.i_159
	C_LINE	22,"mainloop/mainloop.h::main::1::109"
	C_LINE	0,"./mainloop/sprdefs.h::main::1::109"
	ld	hl,0	;const
	push	hl
	ld	hl,3	;const
	push	hl
	ld	hl,_sprite_2_a
	push	hl
	call	sp_CreateSpr
	pop	bc
	pop	bc
	pop	bc
	ld	(_sp_player),hl
	push	hl
	ld	hl,_sprite_2_b
	push	hl
	call	sp_AddColSpr
	pop	bc
	pop	bc
	ld	hl,(_sp_player)
	push	hl
	ld	hl,_sprite_2_c
	push	hl
	call	sp_AddColSpr
	pop	bc
	pop	bc
	ld	hl,_sprite_2_a
	ld	(_p_n_f),hl
	ld	(_p_c_f),hl
	xor	a
	ld	(_gpit),a
	jp	i_163	;EOS
.i_161
	ld	hl,_gpit
	ld	a,(hl)
	inc	(hl)
.i_163
	ld	a,(_gpit)
	sub	3
	jp	nc,i_162	;
	ld	hl,_sp_moviles
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,0	;const
	push	hl
	ld	hl,3	;const
	push	hl
	ld	hl,_sprite_9_a
	push	hl
	call	sp_CreateSpr
	pop	bc
	pop	bc
	pop	bc
	pop	de
	call	l_pint
	ld	hl,_sp_moviles
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_sprite_9_b
	push	hl
	call	sp_AddColSpr
	pop	bc
	pop	bc
	ld	hl,_sp_moviles
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ld	e,(hl)
	inc	hl
	ld	d,(hl)
	push	de
	ld	hl,_sprite_9_c
	push	hl
	call	sp_AddColSpr
	pop	bc
	pop	bc
	ld	hl,_en_an_c_f
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	push	hl
	ld	hl,_en_an_n_f
	push	hl
	ld	hl,(_gpit)
	ld	h,0
	add	hl,hl
	pop	de
	add	hl,de
	ex	de,hl
	ld	hl,_sprite_9_a
	call	l_pint
	pop	de
	call	l_pint
	jp	i_161	;EOS
.i_162
	C_LINE	25,"mainloop/mainloop.h::main::1::110"
			ei
	call	_cortina
.i_164
	C_LINE	0,"./my/title_screen.h::main::2::111"
	call	sp_UpdateNow
	ld	hl,_s_title
	push	hl
	ld	hl,16384	;const
	push	hl
	call	_unpack
	pop	bc
	pop	bc
	call	_select_joyfunc
	C_LINE	57,"mainloop/mainloop.h::main::2::111"
	C_LINE	0,"./mainloop/game_init.h::main::2::111"
	ld	a,1
	ld	(_mlplaying),a
	xor	a
	ld	(_silent_level),a
	ld	hl,0	;const
	ld	a,l
	ld	(_level),a
	C_LINE	63,"mainloop/mainloop.h::main::2::111"
.i_166
	ld	hl,(_mlplaying)
	ld	h,0
	ld	a,h
	or	l
	jp	z,i_167	;
	call	_prepare_level
	C_LINE	0,"./my/new_level.h::main::3::112"
	ld	a,(_silent_level)
	and	a
	jp	nz,i_168	;
	call	_blackout_area
	ld	a,12
	ld	(__x),a
	ld	a,12
	ld	(__y),a
	ld	a,71
	ld	(__t),a
	ld	hl,i_1+26
	ld	(_gp_gen),hl
	call	_print_str
	ld	a,18
	ld	(__x),a
	ld	a,12
	ld	(__y),a
	ld	hl,(_level)
	inc	l
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_print_number2
	call	sp_UpdateNow
	ld	hl,250	;const
	push	hl
	call	_active_sleep
	pop	bc
.i_168
	ld	hl,0	;const
	ld	a,l
	ld	(_silent_level),a
	C_LINE	73,"mainloop/mainloop.h::main::3::113"
	C_LINE	0,"./mainloop/level_init.h::main::3::113"
	ld	hl,1	;const
	ld	a,l
	ld	(_playing),a
	call	_player_init
	xor	a
	ld	(_maincounter),a
	ld	a,1
	ld	(_do_respawn),a
	ld	hl,255	;const
	ld	a,l
	ld	(_killed_old),a
	ld	a,l
	ld	(_life_old),a
	ld	(_keys_old),a
	ld	a,l
	ld	(_objs_old),a
	xor	a
	ld	(_success),a
	ld	a,255
	ld	(_o_pant),a
	ld	hl,0	;const
	ld	a,l
	ld	(_no_draw),a
	C_LINE	80,"mainloop/mainloop.h::main::3::113"
.i_169
	ld	hl,(_playing)
	ld	h,0
	ld	a,h
	or	l
	jp	z,i_170	;
	call	_read_controller
	C_LINE	0,"./mainloop/timer.h::main::4::114"
	C_LINE	91,"mainloop/mainloop.h::main::4::114"
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_o_pant)
	ld	h,0
	call	l_ne
	jp	nc,i_171	;
	C_LINE	0,"./my/before_flick.h::main::5::115"
	C_LINE	95,"mainloop/mainloop.h::main::5::115"
	ld	hl,(_n_pant)
	ld	h,0
	ld	a,l
	ld	(_o_pant),a
	call	_draw_scr
.i_171
	call	_update_hud
	ld	hl,_maincounter
	ld	a,(hl)
	inc	(hl)
	ld	hl,(_half_life)
	ld	h,0
	call	l_lneg
	ld	h,0
	ld	a,l
	ld	(_half_life),a
	call	_player_move
	call	_enems_move
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_o_pant)
	ld	h,0
	call	l_eq
	call	c,_update_sprites
.i_172
.i_173
	ld	hl,(_isrc)
	ld	h,0
	ld	a,l
	sub	2
	jp	nc,i_174	;
						halt
	jp	i_173	;EOS
.i_174
	xor	a
	ld	(_isrc),a
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_o_pant)
	ld	h,0
	call	l_eq
	call	c,sp_UpdateNow
.i_175
	ld	a,(_p_state)
	and	a
	jp	z,i_176	;
	ld	hl,_p_state_ct
	ld	a,(hl)
	dec	(hl)
	ld	a,(_p_state_ct)
	and	a
	jp	nz,i_177	;
	ld	hl,0	;const
	ld	a,l
	ld	(_p_state),a
.i_177
	C_LINE	0,"./mainloop/hotspots.h::main::4::117"
.i_176
		ld  a, (_hotspot_x)
		ld  c, a
		ld  a, (_gpx)
			add 12
		cp  c
		jp  c, _hotspots_skip
		ld  a, (_gpx)
		ld  c, a
		ld  a, (_hotspot_x)
			add 12
		cp  c
		jp  c, _hotspots_skip
		ld  a, (_hotspot_y)
		ld  c, a
		ld  a, (_gpy)
			add 12
		cp  c
		jp  c, _hotspots_skip
		ld  a, (_gpy)
		ld  c, a
		ld  a, (_hotspot_y)
			add 12
		cp  c
		jp  c, _hotspots_skip			
	xor	a
	ld	(_gpit),a
	ld	hl,_hotspots
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,bc
	add	hl,bc
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	a,(hl)
	and	a
	jp	nz,i_178	;
	ld	hl,(_p_life)
	inc	l
	ld	a,l
	ld	hl,_p_life
	ld	(hl),a
	ld	a,9
	sub	(hl)
	jp	nc,i_179	;
	ld	a,9
	ld	(_p_life),a
.i_179
	ld	hl,_hotspots
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,bc
	add	hl,bc
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	(hl),2
	ld	hl,7	;const
	push	hl
	call	_beep_fx
	pop	bc
	jp	i_180	;EOS
.i_178
	ld	hl,_hotspots
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,bc
	add	hl,bc
	pop	de
	add	hl,de
	inc	hl
	ld	l,(hl)
	ld	h,0
.i_183
	ld	a,l
	cp	+(1% 256)
	jp	z,i_184	;
	cp	+(2% 256)
	jp	z,i_185	;
	jp	i_182	;EOS
.i_184
	ld	hl,_p_objs
	ld	a,(hl)
	inc	(hl)
	ld	hl,6	;const
	push	hl
	call	_beep_fx
	pop	bc
	jp	i_182	;EOS
.i_185
	ld	hl,_p_keys
	ld	a,(hl)
	inc	(hl)
	ld	hl,6	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_182
.i_180
	ld	a,(_gpit)
	and	a
	jp	nz,i_186	;
	ld	hl,(_hotspot_x)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(__x),a
	ld	hl,(_hotspot_y)
	ld	h,0
	ld	a,l
	rrca
	rrca
	rrca
	rrca
	and	15
	ld	l,a
	ld	h,0
	ld	(__y),a
	ld	hl,(_orig_tile)
	ld	h,0
	ld	a,l
	ld	(__t),a
	call	_draw_invalidate_coloured_tile_gamearea
	ld	hl,_hotspots
	push	hl
	ld	hl,(_n_pant)
	ld	h,0
	ld	b,h
	ld	c,l
	add	hl,bc
	add	hl,bc
	pop	de
	add	hl,de
	inc	hl
	inc	hl
	ld	(hl),0
	jp	i_187	;EOS
.i_186
	ld	hl,2	;const
	push	hl
	call	_beep_fx
	pop	bc
.i_187
	ld	hl,240	;const
	ld	a,l
	ld	(_hotspot_y),a
	._hotspots_skip
	C_LINE	192,"mainloop/mainloop.h::main::4::123"
	C_LINE	0,"./mainloop/win_game.h::main::4::123"
	ld	a,(_level_data+7)
	and	a
	jp	nz,i_189	;
	ld	hl,(_p_objs)
	ld	h,0
	ex	de,hl
	ld	hl,(_level_data+5)
	ld	h,0
	call	l_eq
	jp	c,i_191	;
.i_189
	jr	i_189_i_190
.i_190
	ld	a,h
	or	l
	jp	nz,i_191	;
.i_189_i_190
	ld	a,(_level_data+7)
	cp	1
	jp	nz,i_192	;
	ld	hl,(_n_pant)
	ld	h,0
	ex	de,hl
	ld	hl,(_level_data+8)
	ld	h,0
	call	l_eq
	jp	nc,i_192	;
.i_191
	defc	i_192 = i_188
.i_194_i_192
	ld	a,1
	ld	(_success),a
	ld	hl,0	;const
	ld	a,l
	ld	(_playing),a
	C_LINE	216,"mainloop/mainloop.h::main::4::124"
	C_LINE	0,"./mainloop/game_over.h::main::4::124"
.i_188
	ld	a,(_p_life)
	and	a
	jp	nz,i_196	;
	ld	a,(_p_killme)
	and	a
	jp	z,i_196	;
	defc	i_196 = i_195
.i_197_i_196
	ld	hl,0	;const
	ld	a,l
	ld	(_playing),a
	C_LINE	219,"mainloop/mainloop.h::main::4::125"
.i_195
	ld	hl,(_p_killme)
	ld	h,0
	ld	a,h
	or	l
	jp	z,i_198	;
	call	_player_kill
	ld	hl,0	;const
	ld	a,l
	ld	(_p_killme),a
.i_198
	call	_flick_screen
	jp	i_169	;EOS
.i_170
	ld	hl,0	;const
	push	hl
	call	_hide_sprites
	pop	bc
	call	sp_UpdateNow
	ld	hl,(_success)
	ld	h,0
.i_201
	ld	a,l
	and	a
	jp	z,i_202	;
	cp	+(1% 256)
	jp	z,i_203	;
	jp	i_200	;EOS
.i_202
	ld	hl,i_1+13
	ld	(_gp_gen),hl
	call	_print_message
	xor	a
	ld	(_mlplaying),a
	ld	hl,250	;const
	push	hl
	call	_active_sleep
	pop	bc
	jp	i_200	;EOS
.i_203
	ld	hl,i_1+32
	ld	(_gp_gen),hl
	call	_print_message
	ld	hl,_level
	ld	a,(hl)
	inc	(hl)
	ld	hl,250	;const
	push	hl
	call	_active_sleep
	pop	bc
.i_200
	ld	hl,(_level)
	ld	h,0
	ld	a,l
	cp	2
	jp	nz,i_204	;
	call	_game_ending
	xor	a
	ld	(_mlplaying),a
	jp	i_166	;EOS
	defc	i_204 = i_166
.i_167
	call	_cortina
	jp	i_164	;EOS
.i_165
	ret


	C_LINE	218,"mk2.c::main::0::128"
	C_LINE	0,"sound/music.h::main::0::128"
	C_LINE	8,"sound/music.h::main::0::128"
; *****************************************************************************
; * Phaser1 Engine, with synthesised drums
; *
; * Original code by Shiru - .HTTP 
; * Modified by Chris Cowley
; *
; * Produced by Beepola v1.05.01
; ******************************************************************************
.musicstart
             LD    HL,MUSICDATA         ;  <- Pointer to Music Data. Change
                                        ;     this to play a different song
             LD   A,(HL)                         ; Get the loop start pointer
             LD   (PATTERN_LOOP_BEGIN),A
             INC  HL
             LD   A,(HL)                         ; Get the song end pointer
             LD   (PATTERN_LOOP_END),A
             INC  HL
             LD   E,(HL)
             INC  HL
             LD   D,(HL)
             INC  HL
             LD   (INSTRUM_TBL),HL
             LD   (CURRENT_INST),HL
             ADD  HL,DE
             LD   (PATTERN_ADDR),HL
             XOR  A
             LD   (PATTERN_PTR),A                ; Set the pattern pointer to zero
             LD   H,A
             LD   L,A
             LD   (NOTE_PTR),HL                  ; Set the note offset (within this pattern) to 0
.PLAYER
             DI
             PUSH IY
             ;LD   A,BORDER_COL
             xor a
             LD   H,$00
             LD   L,A
             LD   (CNT_1A),HL
             LD   (CNT_1B),HL
             LD   (DIV_1A),HL
             LD   (DIV_1B),HL
             LD   (CNT_2),HL
             LD   (DIV_2),HL
             LD   (OUT_1),A
             LD   (OUT_2),A
             JR   MAIN_LOOP
; ********************************************************************************************************
; * NEXT_PATTERN
; *
; * Select the next pattern in sequence (and handle looping if weve reached PATTERN_LOOP_END
; * Execution falls through to PLAYNOTE to play the first note from our next pattern
; ********************************************************************************************************
.NEXT_PATTERN
                          LD   A,(PATTERN_PTR)
                          INC  A
                          INC  A
                          DEFB $FE                           ; CP n
.PATTERN_LOOP_END         DEFB 0
                          JR   NZ,NO_PATTERN_LOOP
                          ; Handle Pattern Looping at and of song
                          DEFB $3E                           ; LD A,n
.PATTERN_LOOP_BEGIN       DEFB 0
.NO_PATTERN_LOOP          LD   (PATTERN_PTR),A
                          LD   HL,$0000
                          LD   (NOTE_PTR),HL   ; Start of pattern (NOTE_PTR = 0)
.MAIN_LOOP
             LD   IYL,0                        ; Set channel = 0
.READ_LOOP
             LD   HL,(PATTERN_ADDR)
             LD   A,(PATTERN_PTR)
             LD   E,A
             LD   D,0
             ADD  HL,DE
             LD   E,(HL)
             INC  HL
             LD   D,(HL)                       ; Now DE = Start of Pattern data
             LD   HL,(NOTE_PTR)
             INC  HL                           ; Increment the note pointer and...
             LD   (NOTE_PTR),HL                ; ..STORE it
             DEC  HL
             ADD  HL,DE                        ; Now HL = address of note data
             LD   A,(HL)
             OR   A
             JR   Z,NEXT_PATTERN               ; select next pattern
             BIT  7,A
             JP   Z,RENDER                     ; Play the currently defined note(S) and drum
             LD   IYH,A
             AND  $3F
             CP   $3C
             JP   NC,OTHER                     ; Other parameters
             ADD  A,A
             LD   B,0
             LD   C,A
             LD   HL,FREQ_TABLE
             ADD  HL,BC
             LD   E,(HL)
             INC  HL
             LD   D,(HL)
             LD   A,IYL                        ; IYL = 0 for channel 1, or = 1 for channel 2
             OR   A
             JR   NZ,SET_NOTE2
             LD   (DIV_1A),DE
             EX   DE,HL
             DEFB $DD,$21                      ; LD IX,nn
.CURRENT_INST
             DEFW $0000
             LD   A,(IX+$00)
             OR   A
             JR   Z,L809B                      ; Original code jumps into byte 2 of the DJNZ (invalid opcode FD)
             LD   B,A
.L8098       ADD  HL,HL
             DJNZ L8098
.L809B       LD   E,(IX+$01)
             LD   D,(IX+$02)
             ADD  HL,DE
             LD   (DIV_1B),HL
             LD   IYL,1                        ; Set channel = 1
             LD   A,IYH
             AND  $40
             JR   Z,READ_LOOP                  ; No phase reset
             LD   HL,OUT_1                     ; Reset phaser
             RES  4,(HL)
             LD   HL,$0000
             LD   (CNT_1A),HL
             LD   H,(IX+$03)
             LD   (CNT_1B),HL
             JR   READ_LOOP
.SET_NOTE2
             LD   (DIV_2),DE
             LD   A,IYH
             LD   HL,OUT_2
             RES  4,(HL)
             LD   HL,$0000
             LD   (CNT_2),HL
             JP   READ_LOOP
.SET_STOP
             LD   HL,$0000
             LD   A,IYL
             OR   A
             JR   NZ,SET_STOP2
             ; Stop channel 1 note
             LD   (DIV_1A),HL
             LD   (DIV_1B),HL
             LD   HL,OUT_1
             RES  4,(HL)
             LD   IYL,1
             JP   READ_LOOP
.SET_STOP2
             ; Stop channel 2 note
             LD   (DIV_2),HL
             LD   HL,OUT_2
             RES  4,(HL)
             JP   READ_LOOP
.OTHER       CP   $3C
             JR   Z,SET_STOP                   ; Stop note
             CP   $3E
             JR   Z,SKIP_CH1                   ; No changes to channel 1
             INC  HL                           ; Instrument change
             LD   L,(HL)
             LD   H,$00
             ADD  HL,HL
             LD   DE,(NOTE_PTR)
             INC  DE
             LD   (NOTE_PTR),DE                ; Increment the note pointer
             DEFB $01                          ; LD BC,nn
.INSTRUM_TBL
             DEFW $0000
             ADD  HL,BC
             LD   (CURRENT_INST),HL
             JP   READ_LOOP
.SKIP_CH1
             LD   IYL,$01
             JP   READ_LOOP
.EXIT_PLAYER
             LD   HL,$2758
             EXX
             POP  IY
             EI
             RET
.RENDER
             AND  $7F                          ; L813A
             CP   $76
             JP   NC,DRUMS
             LD   D,A
             EXX
             DEFB $21                          ; LD HL,nn
.CNT_1A      DEFW $0000
             DEFB $DD,$21                      ; LD IX,nn
.CNT_1B      DEFW $0000
             DEFB $01                          ; LD BC,nn
.DIV_1A      DEFW $0000
             DEFB $11                          ; LD DE,nn
.DIV_1B      DEFW $0000
             DEFB $3E                          ; LD A,n
.OUT_1       DEFB $0
             EXX
             EX   AF,AF ; beware!
             DEFB $21                          ; LD HL,nn
.CNT_2       DEFW $0000
             DEFB $01                          ; LD BC,nn
.DIV_2       DEFW $0000
             DEFB $3E                          ; LD A,n
.OUT_2       DEFB $00
.PLAY_NOTE
             ; Read keyboard
             LD   E,A
             XOR  A
             IN   A,($FE)
             OR   $E0
             INC  A
.PLAYER_WAIT_KEY
             JR   NZ,EXIT_PLAYER
             LD   A,E
             LD   E,0
.L8168       EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L8171
             JR   L8173
.L8171       XOR  $10
.L8173       ADD  IX,DE
             JR   C,L8179
             JR   L817B
.L8179       XOR  $10
.L817B       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L8184
             JR   L8186
.L8184       XOR  $10
.L8186       NOP
             JP   L818A
.L818A       EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L8193
             JR   L8195
.L8193       XOR  $10
.L8195       ADD  IX,DE
             JR   C,L819B
             JR   L819D
.L819B       XOR  $10
.L819D       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L81A6
             JR   L81A8
.L81A6       XOR  $10
.L81A8       NOP
             JP   L81AC
.L81AC       EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L81B5
             JR   L81B7
.L81B5       XOR  $10
.L81B7       ADD  IX,DE
             JR   C,L81BD
             JR   L81BF
.L81BD       XOR  $10
.L81BF       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L81C8
             JR   L81CA
.L81C8       XOR  $10
.L81CA       NOP
             JP   L81CE
.L81CE       EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L81D7
             JR   L81D9
.L81D7       XOR  $10
.L81D9       ADD  IX,DE
             JR   C,L81DF
             JR   L81E1
.L81DF       XOR  $10
.L81E1       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L81EA
             JR   L81EC
.L81EA       XOR  $10
.L81EC       DEC  E
             JP   NZ,L8168
             EXX
             EX   AF,AF ; beware!
             ADD  HL,BC
             OUT  ($FE),A
             JR   C,L81F9
             JR   L81FB
.L81F9       XOR  $10
.L81FB       ADD  IX,DE
             JR   C,L8201
             JR   L8203
.L8201       XOR  $10
.L8203       EX   AF,AF ; beware!
             OUT  ($FE),A
             EXX
             ADD  HL,BC
             JR   C,L820C
             JR   L820E
.L820C       XOR  $10
.L820E       DEC  D
             JP   NZ,PLAY_NOTE
             LD   (CNT_2),HL
             LD   (OUT_2),A
             EXX
             EX   AF,AF ; beware!
             LD   (CNT_1A),HL
             LD   (CNT_1B),IX
             LD   (OUT_1),A
             JP   MAIN_LOOP
; ************************************************************
; * DRUMS - Synthesised
; ************************************************************
.DRUMS
             ADD  A,A                          ; On entry A=$75+Drum number (i.E. $76 to $7E)
             LD   B,0
             LD   C,A
             LD   HL,DRUM_TABLE - 236
             ADD  HL,BC
             LD   E,(HL)
             INC  HL
             LD   D,(HL)
             EX   DE,HL
             JP   (HL)
.DRUM_TONE1  LD   L,16
             JR   DRUM_TONE
.DRUM_TONE2  LD   L,12
             JR   DRUM_TONE
.DRUM_TONE3  LD   L,8
             JR   DRUM_TONE
.DRUM_TONE4  LD   L,6
             JR   DRUM_TONE
.DRUM_TONE5  LD   L,4
             JR   DRUM_TONE
.DRUM_TONE6  LD   L,2
.DRUM_TONE
             LD   DE,3700
             LD   BC,$0101
             xor a
.DT_LOOP0    OUT  ($FE),A
             DEC  B
             JR   NZ,DT_LOOP1
             XOR  16
             LD   B,C
             EX   AF,AF ; beware!
             LD   A,C
             ADD  A,L
             LD   C,A
             EX   AF,AF ; beware!
.DT_LOOP1    DEC  E
             JR   NZ,DT_LOOP0
             DEC  D
             JR   NZ,DT_LOOP0
             JP   MAIN_LOOP
.DRUM_NOISE1 LD   DE,2480
             LD   IXL,1
             JR   DRUM_NOISE
.DRUM_NOISE2 LD   DE,1070
             LD   IXL,10
             JR   DRUM_NOISE
.DRUM_NOISE3 LD   DE,365
             LD   IXL,101
.DRUM_NOISE
             LD   H,D
             LD   L,E
             xor a
             LD   C,A
.DN_LOOP0    LD   A,(HL)
             AND  16
             OR   C
             OUT  ($FE),A
             LD   B,IXL
.DN_LOOP1    DJNZ DN_LOOP1
             INC  HL
             DEC  E
             JR   NZ,DN_LOOP0
             DEC  D
             JR   NZ,DN_LOOP0
             JP   MAIN_LOOP
.PATTERN_ADDR   DEFW  $0000
.PATTERN_PTR    DEFB  0
.NOTE_PTR       DEFW  $0000
; **************************************************************
; * Frequency Table
; **************************************************************
.FREQ_TABLE
             DEFW 178,189,200,212,225,238,252,267,283,300,318,337
             DEFW 357,378,401,425,450,477,505,535,567,601,637,675
             DEFW 715,757,802,850,901,954,1011,1071,1135,1202,1274,1350
             DEFW 1430,1515,1605,1701,1802,1909,2023,2143,2270,2405,2548,2700
             DEFW 2860,3030,3211,3402,3604,3818,4046,4286,4541,4811,5097,5400
; *****************************************************************
; * Synth Drum Lookup Table
; *****************************************************************
.DRUM_TABLE
             DEFW DRUM_TONE1,DRUM_TONE2,DRUM_TONE3,DRUM_TONE4,DRUM_TONE5,DRUM_TONE6
             DEFW DRUM_NOISE1,DRUM_NOISE2,DRUM_NOISE3
.MUSICDATA
             DEFB 0  ; Pattern loop begin * 2
             DEFB 2  ; Song length * 2
             DEFW 4         ; Offset to start of song (length of instrument table)
             DEFB 2      ; Multiple
             DEFW 0      ; Detune
             DEFB 0      ; Phase
.PATTERNDATA        DEFW      PAT0
; *** Pattern data - $00 marks the end of a pattern ***
.PAT0
         DEFB $BD,0
         DEFB 230
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 124
     DEFB 4
         DEFB 166
         DEFB 156
         DEFB 125
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 123
     DEFB 4
         DEFB 173
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 163
         DEFB 154
         DEFB 124
     DEFB 4
         DEFB 164
         DEFB 159
         DEFB 125
     DEFB 4
         DEFB 168
         DEFB 154
         DEFB 123
     DEFB 4
         DEFB 166
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 124
     DEFB 4
         DEFB 166
         DEFB 156
         DEFB 125
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 123
     DEFB 4
         DEFB 173
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 175
         DEFB 154
         DEFB 124
     DEFB 4
         DEFB 176
         DEFB 159
         DEFB 125
     DEFB 4
         DEFB 180
         DEFB 154
         DEFB 123
     DEFB 4
         DEFB 178
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 124
     DEFB 4
         DEFB 175
         DEFB 156
         DEFB 125
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 123
     DEFB 4
         DEFB 176
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 178
         DEFB 154
         DEFB 124
     DEFB 4
         DEFB 176
         DEFB 159
         DEFB 125
     DEFB 4
         DEFB 175
         DEFB 154
         DEFB 123
     DEFB 4
         DEFB 173
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 124
     DEFB 4
         DEFB 176
         DEFB 156
         DEFB 125
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 123
     DEFB 4
         DEFB 175
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 176
         DEFB 154
         DEFB 124
     DEFB 4
         DEFB 178
         DEFB 159
         DEFB 125
     DEFB 4
         DEFB 180
         DEFB 154
         DEFB 123
     DEFB 4
         DEFB 178
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 124
     DEFB 4
         DEFB 178
         DEFB 156
         DEFB 125
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 123
     DEFB 4
         DEFB 173
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 175
         DEFB 154
         DEFB 124
     DEFB 4
         DEFB 176
         DEFB 159
         DEFB 125
     DEFB 4
         DEFB 180
         DEFB 154
         DEFB 123
     DEFB 4
         DEFB 178
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 124
     DEFB 4
         DEFB 178
         DEFB 156
         DEFB 125
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 123
     DEFB 4
         DEFB 173
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 175
         DEFB 154
         DEFB 124
     DEFB 4
         DEFB 176
         DEFB 159
         DEFB 125
     DEFB 4
         DEFB 180
         DEFB 154
         DEFB 123
     DEFB 4
         DEFB 178
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 124
     DEFB 4
         DEFB 175
         DEFB 156
         DEFB 125
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 123
     DEFB 4
         DEFB 176
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 178
         DEFB 154
         DEFB 124
     DEFB 4
         DEFB 176
         DEFB 159
         DEFB 125
     DEFB 4
         DEFB 175
         DEFB 154
         DEFB 123
     DEFB 4
         DEFB 173
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 124
     DEFB 4
         DEFB 168
         DEFB 156
         DEFB 125
     DEFB 4
         DEFB 190
         DEFB 159
         DEFB 123
     DEFB 4
         DEFB 166
         DEFB 147
         DEFB 118
     DEFB 4
         DEFB 168
         DEFB 154
         DEFB 124
     DEFB 4
         DEFB 170
         DEFB 159
         DEFB 125
     DEFB 4
         DEFB 171
         DEFB 154
         DEFB 123
     DEFB 4
         DEFB $00
	C_LINE	222,"mk2.c::main::0::128"
	SECTION	rodata_compiler
.i_1
	defm	"            "
	defb	0

	defm	" GAME OVER! "
	defb	0

	defm	"LEVEL"
	defb	0

	defm	" ZONE CLEAR "
	defb	0


; --- Start of Static Variables ---

	SECTION	bss_compiler
._AD_FREE	defs	600
._keys	defs	10
._gen_pt	defs	2
._sp_player	defs	2
._sp_moviles	defs	6
._enoffs	defs	1
._p_x	defs	2
._p_y	defs	2
._p_vx	defs	1
._p_vy	defs	1
._ptgmx	defs	1
._ptgmy	defs	1
._p_g	defs	1
._p_jmp_ct	defs	1
._p_c_f	defs	2
._p_n_f	defs	2
._p_jmp_on	defs	1
._p_frame	defs	1
._p_subframe	defs	1
._p_facing	defs	1
._p_state	defs	1
._p_state_ct	defs	1
._p_gotten	defs	1
._p_life	defs	1
._p_objs	defs	1
._p_keys	defs	1
._p_killed	defs	1
._p_disparando	defs	1
._p_facing_v	defs	1
._p_facing_h	defs	1
._p_killme	defs	1
._cx1	defs	1
._cx2	defs	1
._cy1	defs	1
._cy2	defs	1
._at1	defs	1
._at2	defs	1
._ptx1	defs	1
._pty1	defs	1
._ptx2	defs	1
._pty2	defs	1
._en_an_base_frame	defs	3
._en_an_count	defs	3
._en_an_c_f	defs	6
._en_an_n_f	defs	6
._en_an_state	defs	3
._pregotten	defs	1
._map_attr	defs	150
._hotspot_x	defs	1
._hotspot_y	defs	1
._orig_tile	defs	1
._do_respawn	defs	1
._no_draw	defs	1
._n_pant	defs	1
._o_pant	defs	1
._silent_level	defs	1
._is_rendering	defs	1
._maincounter	defs	1
._x_pant	defs	1
._y_pant	defs	1
._p_engine	defs	1
._enoffsmasi	defs	1
._gpx	defs	1
._gpy	defs	1
._gpd	defs	1
._gpc	defs	1
._gpt	defs	1
._gps	defs	1
._rdx	defs	1
._rdy	defs	1
._rda	defs	1
._rdb	defs	1
._rds	defs	1
._gpxx	defs	1
._gpyy	defs	1
._gpcx	defs	1
._gpcy	defs	1
._possee	defs	1
._hit_v	defs	1
._hit_h	defs	1
._hit	defs	1
._wall_h	defs	1
._wall_v	defs	1
._gpaux	defs	1
.__en_x	defs	1
.__en_y	defs	1
.__en_x1	defs	1
.__en_y1	defs	1
.__en_x2	defs	1
.__en_y2	defs	1
.__en_t	defs	1
.__en_life	defs	1
.__en_mx	defs	1
.__en_my	defs	1
.__baddies_pointer	defs	2
._tocado	defs	1
._active	defs	1
._killable	defs	1
._animate	defs	1
._gpit	defs	1
._gpjt	defs	1
._map_pointer	defs	2
._enit	defs	1
.__val	defs	2
.__min	defs	2
.__max	defs	2
._c1	defs	1
._c2	defs	1
._c3	defs	1
._c4	defs	1
._t1	defs	1
._t2	defs	1
._t3	defs	1
._t4	defs	1
._nocast	defs	1
.__ta	defs	1
._xx	defs	1
._yy	defs	1
._a1	defs	2
._a2	defs	2
._a3	defs	2
._gen_pt_alt	defs	2
._t_alt	defs	1
.__x	defs	1
.__y	defs	1
.__t	defs	1
.__n	defs	1
._gp_gen	defs	2
._x0	defs	1
._y0	defs	1
._x1	defs	1
._y1	defs	1
._pad0	defs	1
._pad_this_frame	defs	1
._action_pressed	defs	1
._mlplaying	defs	1
._success	defs	1
._playing	defs	1
._bs	defs	1
._objs_old	defs	1
._keys_old	defs	1
._life_old	defs	1
._killed_old	defs	1
	SECTION	code_compiler


; --- Start of Scope Defns ---

	GLOBAL	_u_malloc
	GLOBAL	_u_free
	GLOBAL	sp_InitIM2
	GLOBAL	sp_InstallISR
	GLOBAL	sp_EmptyISR
	GLOBAL	sp_CreateGenericISR
	GLOBAL	sp_RegisterHook
	GLOBAL	sp_RegisterHookFirst
	GLOBAL	sp_RegisterHookLast
	GLOBAL	sp_RemoveHook
	GLOBAL	sp_Initialize
	GLOBAL	sp_SwapEndian
	GLOBAL	sp_Swap
	GLOBAL	sp_PFill
	GLOBAL	sp_StackSpace
	GLOBAL	sp_Random32
	GLOBAL	sp_Border
	GLOBAL	sp_inp
	GLOBAL	sp_outp
	GLOBAL	sp_IntRect
	GLOBAL	sp_IntLargeRect
	GLOBAL	sp_IntPtLargeRect
	GLOBAL	sp_IntIntervals
	GLOBAL	sp_IntPtInterval
	GLOBAL	sp_CreateSpr
	GLOBAL	sp_AddColSpr
	GLOBAL	sp_DeleteSpr
	GLOBAL	sp_IterateSprChar
	GLOBAL	sp_RemoveDList
	GLOBAL	sp_MoveSprAbs
	GLOBAL	sp_MoveSprAbsC
	GLOBAL	sp_MoveSprAbsNC
	GLOBAL	sp_MoveSprRel
	GLOBAL	sp_MoveSprRelC
	GLOBAL	sp_MoveSprRelNC
	GLOBAL	sp_PrintAt
	GLOBAL	sp_PrintAtInv
	GLOBAL	sp_ScreenStr
	GLOBAL	sp_PrintAtDiff
	GLOBAL	sp_PrintString
	GLOBAL	sp_ComputePos
	GLOBAL	sp_TileArray
	GLOBAL	sp_Pallette
	GLOBAL	sp_GetTiles
	GLOBAL	sp_PutTiles
	GLOBAL	sp_IterateDList
	GLOBAL	sp_AddMemory
	GLOBAL	sp_BlockAlloc
	GLOBAL	sp_BlockFit
	GLOBAL	sp_FreeBlock
	GLOBAL	sp_InitAlloc
	GLOBAL	sp_BlockCount
	GLOBAL	sp_Invalidate
	GLOBAL	sp_Validate
	GLOBAL	sp_ClearRect
	GLOBAL	sp_UpdateNow
	GLOBAL	sp_UpdateNowEx
	GLOBAL	sp_CompDListAddr
	GLOBAL	sp_CompDirtyAddr
	GLOBAL	sp_JoySinclair1
	GLOBAL	sp_JoySinclair2
	GLOBAL	sp_JoyTimexEither
	GLOBAL	sp_JoyTimexLeft
	GLOBAL	sp_JoyTimexRight
	GLOBAL	sp_JoyFuller
	GLOBAL	sp_JoyKempston
	GLOBAL	sp_JoyKeyboard
	GLOBAL	sp_WaitForKey
	GLOBAL	sp_WaitForNoKey
	GLOBAL	sp_Pause
	GLOBAL	sp_Wait
	GLOBAL	sp_LookupKey
	GLOBAL	sp_GetKey
	GLOBAL	sp_Inkey
	GLOBAL	sp_KeyPressed
	GLOBAL	sp_MouseAMXInit
	GLOBAL	sp_MouseAMX
	GLOBAL	sp_SetMousePosAMX
	GLOBAL	sp_MouseKempston
	GLOBAL	sp_SetMousePosKempston
	GLOBAL	sp_MouseSim
	GLOBAL	sp_SetMousePosSim
	GLOBAL	sp_CharDown
	GLOBAL	sp_CharLeft
	GLOBAL	sp_CharRight
	GLOBAL	sp_CharUp
	GLOBAL	sp_GetAttrAddr
	GLOBAL	sp_GetCharAddr
	GLOBAL	sp_GetScrnAddr
	GLOBAL	sp_PixelDown
	GLOBAL	sp_PixelUp
	GLOBAL	sp_PixelLeft
	GLOBAL	sp_PixelRight
	GLOBAL	sp_ListCreate
	GLOBAL	sp_ListCount
	GLOBAL	sp_ListFirst
	GLOBAL	sp_ListLast
	GLOBAL	sp_ListNext
	GLOBAL	sp_ListPrev
	GLOBAL	sp_ListCurr
	GLOBAL	sp_ListAdd
	GLOBAL	sp_ListInsert
	GLOBAL	sp_ListAppend
	GLOBAL	sp_ListPrepend
	GLOBAL	sp_ListRemove
	GLOBAL	sp_ListConcat
	GLOBAL	sp_ListFree
	GLOBAL	sp_ListTrim
	GLOBAL	sp_ListSearch
	GLOBAL	sp_HashCreate
	GLOBAL	sp_HashRemove
	GLOBAL	sp_HashLookup
	GLOBAL	sp_HashAdd
	GLOBAL	sp_HashDelete
	GLOBAL	sp_Heapify
	GLOBAL	sp_HeapSiftDown
	GLOBAL	sp_HeapSiftUp
	GLOBAL	sp_HeapAdd
	GLOBAL	sp_HeapExtract
	GLOBAL	sp_HuffCreate
	GLOBAL	sp_HuffDelete
	GLOBAL	sp_HuffAccumulate
	GLOBAL	sp_HuffExtract
	GLOBAL	sp_HuffSetState
	GLOBAL	sp_HuffGetState
	GLOBAL	sp_HuffDecode
	GLOBAL	sp_HuffEncode
	GLOBAL	_AD_FREE
	GLOBAL	_keyscancodes
	defc	_asm_int	= 23297
	defc	_asm_int_2	= 23299
	defc	_safe_byte	= 23301
	GLOBAL	_keys
	GLOBAL	_joyfunc
	GLOBAL	_joyfuncs
	GLOBAL	_gen_pt
	GLOBAL	_my_malloc
	GLOBAL	_sp_player
	GLOBAL	_sp_moviles
	GLOBAL	_enoffs
	GLOBAL	_half_life
	GLOBAL	_p_x
	GLOBAL	_p_y
	GLOBAL	_p_vx
	GLOBAL	_p_vy
	GLOBAL	_ptgmx
	GLOBAL	_ptgmy
	GLOBAL	_p_g
	GLOBAL	_p_jmp_ct
	GLOBAL	_p_c_f
	GLOBAL	_p_n_f
	GLOBAL	_p_jmp_on
	GLOBAL	_p_frame
	GLOBAL	_p_subframe
	GLOBAL	_p_facing
	GLOBAL	_p_state
	GLOBAL	_p_state_ct
	GLOBAL	_p_gotten
	GLOBAL	_p_life
	GLOBAL	_p_objs
	GLOBAL	_p_keys
	GLOBAL	_p_killed
	GLOBAL	_p_disparando
	GLOBAL	_p_facing_v
	GLOBAL	_p_facing_h
	GLOBAL	_p_killme
	GLOBAL	_cx1
	GLOBAL	_cx2
	GLOBAL	_cy1
	GLOBAL	_cy2
	GLOBAL	_at1
	GLOBAL	_at2
	GLOBAL	_ptx1
	GLOBAL	_pty1
	GLOBAL	_ptx2
	GLOBAL	_pty2
	GLOBAL	_en_an_base_frame
	GLOBAL	_en_an_count
	GLOBAL	_en_an_c_f
	GLOBAL	_en_an_n_f
	GLOBAL	_en_an_state
	GLOBAL	_pregotten
	GLOBAL	_map_attr
	defc	_map_buff	= 61697
	GLOBAL	_hotspot_x
	GLOBAL	_hotspot_y
	GLOBAL	_orig_tile
	GLOBAL	_do_respawn
	GLOBAL	_no_draw
	GLOBAL	_n_pant
	GLOBAL	_o_pant
	GLOBAL	_level
	GLOBAL	_silent_level
	GLOBAL	_is_rendering
	GLOBAL	_maincounter
	GLOBAL	_x_pant
	GLOBAL	_y_pant
	GLOBAL	_do_gravity
	GLOBAL	_p_engine
	GLOBAL	_enoffsmasi
	GLOBAL	_gpx
	GLOBAL	_gpy
	GLOBAL	_gpd
	GLOBAL	_gpc
	GLOBAL	_gpt
	GLOBAL	_gps
	GLOBAL	_rdx
	GLOBAL	_rdy
	GLOBAL	_rda
	GLOBAL	_rdb
	GLOBAL	_rds
	GLOBAL	_gpxx
	GLOBAL	_gpyy
	GLOBAL	_gpcx
	GLOBAL	_gpcy
	GLOBAL	_possee
	GLOBAL	_hit_v
	GLOBAL	_hit_h
	GLOBAL	_hit
	GLOBAL	_wall_h
	GLOBAL	_wall_v
	GLOBAL	_gpaux
	GLOBAL	__en_x
	GLOBAL	__en_y
	GLOBAL	__en_x1
	GLOBAL	__en_y1
	GLOBAL	__en_x2
	GLOBAL	__en_y2
	GLOBAL	__en_t
	GLOBAL	__en_life
	GLOBAL	__en_mx
	GLOBAL	__en_my
	GLOBAL	__baddies_pointer
	GLOBAL	_tocado
	GLOBAL	_active
	GLOBAL	_killable
	GLOBAL	_animate
	GLOBAL	_gpit
	GLOBAL	_gpjt
	GLOBAL	_map_pointer
	GLOBAL	_enit
	GLOBAL	__val
	GLOBAL	__min
	GLOBAL	__max
	GLOBAL	_c1
	GLOBAL	_c2
	GLOBAL	_c3
	GLOBAL	_c4
	GLOBAL	_t1
	GLOBAL	_t2
	GLOBAL	_t3
	GLOBAL	_t4
	GLOBAL	_nocast
	GLOBAL	__ta
	GLOBAL	_xx
	GLOBAL	_yy
	GLOBAL	_a1
	GLOBAL	_a2
	GLOBAL	_a3
	GLOBAL	_gen_pt_alt
	GLOBAL	_t_alt
	GLOBAL	__x
	GLOBAL	__y
	GLOBAL	__t
	GLOBAL	__n
	GLOBAL	_gp_gen
	GLOBAL	_x0
	GLOBAL	_y0
	GLOBAL	_x1
	GLOBAL	_y1
	defc	_isrc	= 23296
	GLOBAL	_pad0
	GLOBAL	_pad_this_frame
	GLOBAL	_action_pressed
	GLOBAL	_mlplaying
	GLOBAL	_success
	GLOBAL	_playing
	GLOBAL	_active_sleep
	GLOBAL	_run_fire_script
	GLOBAL	_cortina
	GLOBAL	_rand
	GLOBAL	_hide_sprites
	GLOBAL	_draw_coloured_tile
	GLOBAL	_draw_coloured_tile_gamearea
	GLOBAL	_collide_pixel
	GLOBAL	_attr
	GLOBAL	_print_number2
	GLOBAL	_update_sprites
	GLOBAL	_enems_move
	GLOBAL	_ram_address
	GLOBAL	_ram_destination
	GLOBAL	_unpack
	GLOBAL	_s_title
	GLOBAL	_s_marco
	GLOBAL	_s_ending
	GLOBAL	_level_data
	GLOBAL	_map
	GLOBAL	_bolts
	GLOBAL	_baddies
	GLOBAL	_hotspots
	GLOBAL	_behs
	GLOBAL	_tileset
	GLOBAL	_level0_map
	GLOBAL	_level1_map
	GLOBAL	_level0_bolts
	GLOBAL	_level1_bolts
	GLOBAL	_level0_enems
	GLOBAL	_level1_enems
	GLOBAL	_level0_hotspots
	GLOBAL	_level1_hotspots
	GLOBAL	_level0_behs
	GLOBAL	_level1_behs
	GLOBAL	_level0_ts
	GLOBAL	_level1_ts
	GLOBAL	_levels
	GLOBAL	_sprite_1_a
	GLOBAL	_sprite_1_b
	GLOBAL	_sprite_1_c
	GLOBAL	_sprite_2_a
	GLOBAL	_sprite_2_b
	GLOBAL	_sprite_2_c
	GLOBAL	_sprite_3_a
	GLOBAL	_sprite_3_b
	GLOBAL	_sprite_3_c
	GLOBAL	_sprite_4_a
	GLOBAL	_sprite_4_b
	GLOBAL	_sprite_4_c
	GLOBAL	_sprite_5_a
	GLOBAL	_sprite_5_b
	GLOBAL	_sprite_5_c
	GLOBAL	_sprite_6_a
	GLOBAL	_sprite_6_b
	GLOBAL	_sprite_6_c
	GLOBAL	_sprite_7_a
	GLOBAL	_sprite_7_b
	GLOBAL	_sprite_7_c
	GLOBAL	_sprite_8_a
	GLOBAL	_sprite_8_b
	GLOBAL	_sprite_8_c
	GLOBAL	_sprite_9_a
	GLOBAL	_sprite_9_b
	GLOBAL	_sprite_9_c
	GLOBAL	_sprite_10_a
	GLOBAL	_sprite_10_b
	GLOBAL	_sprite_10_c
	GLOBAL	_sprite_11_a
	GLOBAL	_sprite_11_b
	GLOBAL	_sprite_11_c
	GLOBAL	_sprite_12_a
	GLOBAL	_sprite_12_b
	GLOBAL	_sprite_12_c
	GLOBAL	_sprite_13_a
	GLOBAL	_sprite_13_b
	GLOBAL	_sprite_13_c
	GLOBAL	_sprite_14_a
	GLOBAL	_sprite_14_b
	GLOBAL	_sprite_14_c
	GLOBAL	_sprite_15_a
	GLOBAL	_sprite_15_b
	GLOBAL	_sprite_15_c
	GLOBAL	_sprite_16_a
	GLOBAL	_sprite_16_b
	GLOBAL	_sprite_16_c
	GLOBAL	_sprite_18_a
	GLOBAL	_beep_fx
	GLOBAL	_ISR
	GLOBAL	_spacer
	GLOBAL	_invalidate_tile
	GLOBAL	_invalidate_viewport
	GLOBAL	_validate_viewport
	GLOBAL	_draw_invalidate_coloured_tile_gamearea
	GLOBAL	_draw_objs
	GLOBAL	_print_str
	GLOBAL	_blackout_area
	GLOBAL	_utaux
	GLOBAL	_update_tile
	GLOBAL	_print_message
	GLOBAL	_read_controller
	GLOBAL	_button_pressed
	GLOBAL	_step
	GLOBAL	_addsign
	GLOBAL	_abs
	GLOBAL	_select_joyfunc
	GLOBAL	_player_frames
	GLOBAL	_enem_frames
	GLOBAL	_prepare_level
	GLOBAL	_cm_two_points
	GLOBAL	_qtile
	GLOBAL	_seed1
	GLOBAL	_seed2
	GLOBAL	_randres
	GLOBAL	_srand
	GLOBAL	_bs
	GLOBAL	_game_ending
	GLOBAL	_game_over
	GLOBAL	_process_tile
	GLOBAL	_player_init
	GLOBAL	_player_calc_bounding_box
	GLOBAL	_player_kill
	GLOBAL	_player_move
	GLOBAL	_enems_init
	GLOBAL	_enems_move_spr_abs
	GLOBAL	_advance_worm
	GLOBAL	_draw_scr_background
	GLOBAL	_draw_scr
	GLOBAL	_objs_old
	GLOBAL	_keys_old
	GLOBAL	_life_old
	GLOBAL	_killed_old
	GLOBAL	_update_hud
	GLOBAL	_flick_screen
	GLOBAL	_main


; --- End of Scope Defns ---


; --- End of Compilation ---
